2026-01-28 22:26:51,861 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=403 user_id=invalid_token time=3.47ms
2026-01-28 22:26:51,862 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=403 user_id=invalid_token time=0.64ms
2026-01-28 22:28:01,310 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=403 user_id=invalid_token time=0.79ms
2026-01-28 22:28:01,348 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=403 user_id=invalid_token time=1.57ms
2026-01-28 22:28:10,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:28:10,629 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-01-28 22:28:10,629 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('test@qq.com',)
2026-01-28 22:28:10,846 - api_logger - INFO - rid=/api/auth/login method=POST status_code=200 user_id=anonymous time=240.67ms
2026-01-28 22:28:10,847 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:28:10,898 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:28:10,899 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:28:10,899 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,901 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:28:10,901 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,903 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.92ms
2026-01-28 22:28:10,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:28:10,905 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:28:10,905 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:28:10,905 - sqlalchemy.engine.Engine - INFO - [cached since 0.006123s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,905 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:28:10,906 - sqlalchemy.engine.Engine - INFO - [cached since 0.004638s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,906 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.06ms
2026-01-28 22:28:10,907 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:28:10,908 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:28:10,909 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:28:10,909 - sqlalchemy.engine.Engine - INFO - [cached since 0.009795s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,910 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:28:10,910 - sqlalchemy.engine.Engine - INFO - [cached since 0.009514s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,912 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.58ms
2026-01-28 22:28:10,912 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:28:10,913 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:28:10,913 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:28:10,913 - sqlalchemy.engine.Engine - INFO - [cached since 0.01453s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,914 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:28:10,914 - sqlalchemy.engine.Engine - INFO - [cached since 0.0132s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:28:10,915 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.89ms
2026-01-28 22:28:10,916 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:31:06,340 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:31:06,340 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:31:06,340 - sqlalchemy.engine.Engine - INFO - [cached since 175.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:06,341 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:31:06,341 - sqlalchemy.engine.Engine - INFO - [cached since 175.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:06,342 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.75ms
2026-01-28 22:31:06,342 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:31:06,354 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:31:06,354 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:31:06,354 - sqlalchemy.engine.Engine - INFO - [cached since 175.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:06,355 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:31:06,355 - sqlalchemy.engine.Engine - INFO - [cached since 175.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:06,359 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.44ms
2026-01-28 22:31:06,360 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:31:09,136 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:31:09,136 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:31:09,136 - sqlalchemy.engine.Engine - INFO - [cached since 178.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:09,137 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:31:09,137 - sqlalchemy.engine.Engine - INFO - [cached since 178.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:09,139 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.06ms
2026-01-28 22:31:09,139 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-28 22:31:09,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-28 22:31:09,140 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-28 22:31:09,140 - sqlalchemy.engine.Engine - INFO - [cached since 178.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:09,141 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-28 22:31:09,141 - sqlalchemy.engine.Engine - INFO - [cached since 178.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-28 22:31:09,144 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.82ms
2026-01-28 22:31:09,145 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-29 21:12:56,362 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-29 21:12:56,371 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-01-29 21:12:56,372 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('test@qq.com',)
2026-01-29 21:12:56,587 - api_logger - INFO - rid=/api/auth/login method=POST status_code=200 user_id=anonymous time=236.62ms
2026-01-29 21:12:56,588 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-29 21:12:56,647 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-29 21:12:56,647 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-29 21:12:56,647 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,649 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-29 21:12:56,649 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,651 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.85ms
2026-01-29 21:12:56,651 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-29 21:12:56,653 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-29 21:12:56,653 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-29 21:12:56,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.005993s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,654 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-29 21:12:56,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.004778s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,655 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.97ms
2026-01-29 21:12:56,655 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-29 21:12:56,656 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-29 21:12:56,656 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-29 21:12:56,656 - sqlalchemy.engine.Engine - INFO - [cached since 0.008943s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,656 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-29 21:12:56,657 - sqlalchemy.engine.Engine - INFO - [cached since 0.007692s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,657 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.11ms
2026-01-29 21:12:56,658 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-29 21:12:56,659 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-29 21:12:56,659 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-29 21:12:56,659 - sqlalchemy.engine.Engine - INFO - [cached since 0.0119s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,659 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-29 21:12:56,659 - sqlalchemy.engine.Engine - INFO - [cached since 0.01053s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:56,660 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.14ms
2026-01-29 21:12:56,661 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-29 21:12:58,476 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-29 21:12:58,477 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-29 21:12:58,477 - sqlalchemy.engine.Engine - INFO - [cached since 1.83s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:58,477 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-29 21:12:58,478 - sqlalchemy.engine.Engine - INFO - [cached since 1.829s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:58,481 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.79ms
2026-01-29 21:12:58,484 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-29 21:12:58,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-29 21:12:58,487 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-29 21:12:58,487 - sqlalchemy.engine.Engine - INFO - [cached since 1.84s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:58,489 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-29 21:12:58,489 - sqlalchemy.engine.Engine - INFO - [cached since 1.84s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-29 21:12:58,490 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.67ms
2026-01-29 21:12:58,491 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-30 11:07:48,006 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-30 11:07:48,008 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-30 11:07:48,008 - sqlalchemy.engine.Engine - INFO - [cached since 1.44e+04s ago] ('38ed9ac6-5b4a-4514-a40e-5ed0a6939c77',)
2026-01-30 11:07:48,017 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-30 11:07:48,018 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=404 user_id=38ed9ac6-5b4a-4514-a40e-5ed0a6939c77 time=52.17ms
2026-01-30 11:07:48,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-30 11:07:48,021 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-30 11:07:48,021 - sqlalchemy.engine.Engine - INFO - [cached since 1.44e+04s ago] ('38ed9ac6-5b4a-4514-a40e-5ed0a6939c77',)
2026-01-30 11:07:48,021 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-30 11:07:48,022 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=404 user_id=38ed9ac6-5b4a-4514-a40e-5ed0a6939c77 time=1.80ms
2026-01-30 11:07:49,591 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-30 11:07:49,591 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-30 11:07:49,591 - sqlalchemy.engine.Engine - INFO - [cached since 1.44e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-30 11:07:49,595 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-30 11:07:49,595 - sqlalchemy.engine.Engine - INFO - [cached since 1.44e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-30 11:07:49,601 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.15ms
2026-01-30 11:07:49,602 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-30 11:07:49,604 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-30 11:07:49,604 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-01-30 11:07:49,604 - sqlalchemy.engine.Engine - INFO - [cached since 1.44e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-30 11:07:49,607 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-01-30 11:07:49,608 - sqlalchemy.engine.Engine - INFO - [cached since 1.44e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-01-30 11:07:49,610 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.40ms
2026-01-30 11:07:49,612 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 22:13:52,916 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=403 user_id=invalid_token time=32.05ms
2026-02-03 22:14:02,491 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 22:14:02,507 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-03 22:14:02,508 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('test@qq.com',)
2026-02-03 22:14:02,718 - api_logger - INFO - rid=/api/auth/login method=POST status_code=200 user_id=anonymous time=251.70ms
2026-02-03 22:14:02,719 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 22:14:02,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 22:14:02,768 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 22:14:02,768 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 22:14:02,771 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 22:14:02,772 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 22:14:02,773 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.51ms
2026-02-03 22:14:02,774 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 22:14:02,775 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 22:14:02,775 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 22:14:02,775 - sqlalchemy.engine.Engine - INFO - [cached since 0.007401s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 22:14:02,775 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 22:14:02,775 - sqlalchemy.engine.Engine - INFO - [cached since 0.004226s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 22:14:02,776 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1.97ms
2026-02-03 22:14:02,777 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 22:14:40,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 22:14:40,965 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 22:14:40,965 - sqlalchemy.engine.Engine - INFO - [cached since 38.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 22:14:40,968 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 22:14:40,969 - sqlalchemy.engine.Engine - INFO - [cached since 38.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 22:14:40,971 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.41ms
2026-02-03 22:14:40,972 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:33:45,297 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:33:45,298 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:33:45,298 - sqlalchemy.engine.Engine - INFO - [cached since 1495s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:33:45,307 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:33:45,307 - sqlalchemy.engine.Engine - INFO - [cached since 1495s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:33:45,315 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=23.11ms
2026-02-03 23:33:45,315 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:36:04,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:36:04,888 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:36:04,888 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:36:04,890 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:36:04,890 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:36:04,892 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=21.21ms
2026-02-03 23:36:04,892 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:36:05,095 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:36:05,096 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:36:05,096 - sqlalchemy.engine.Engine - INFO - [cached since 0.2074s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:36:05,097 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:36:05,097 - sqlalchemy.engine.Engine - INFO - [cached since 0.2068s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:36:05,103 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.06ms
2026-02-03 23:36:05,103 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:38:50,037 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:38:50,039 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:38:50,039 - sqlalchemy.engine.Engine - INFO - [cached since 165.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:38:50,041 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:38:50,041 - sqlalchemy.engine.Engine - INFO - [cached since 165.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:38:50,043 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=16.82ms
2026-02-03 23:38:50,043 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:38:54,286 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:38:54,287 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:38:54,287 - sqlalchemy.engine.Engine - INFO - [cached since 169.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:38:54,309 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:38:54,309 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('AAPL',)
2026-02-03 23:38:57,084 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for AAPL: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:38:58,839 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for AAPL: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:39:00,386 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for AAPL: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:39:01,867 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for AAPL: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:39:03,093 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-03 23:39:03,094 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('AAPL',)
2026-02-03 23:39:03,098 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-03 23:39:03,098 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (270.01, 4.0581, '2026-02-03 15:38:54.311898', 'AAPL')
2026-02-03 23:39:03,103 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-03 23:39:03,106 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:03,109 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:39:03,109 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('AAPL',)
2026-02-03 23:39:03,111 - api_logger - INFO - rid=/api/portfolio/AAPL/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8846.20ms
2026-02-03 23:39:03,113 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:03,124 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:03,124 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:39:03,124 - sqlalchemy.engine.Engine - INFO - [cached since 178.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:39:03,125 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:39:03,125 - sqlalchemy.engine.Engine - INFO - [cached since 178.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:39:03,127 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.67ms
2026-02-03 23:39:03,128 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:18,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:18,280 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:39:18,280 - sqlalchemy.engine.Engine - INFO - [cached since 193.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:39:18,282 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:39:18,282 - sqlalchemy.engine.Engine - INFO - [cached since 23.97s ago] ('SIDU',)
2026-02-03 23:39:19,765 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for SIDU: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:39:21,256 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for SIDU: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:39:22,722 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for SIDU: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:39:24,480 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for SIDU: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:39:25,826 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-03 23:39:25,826 - sqlalchemy.engine.Engine - INFO - [cached since 22.73s ago] ('SIDU',)
2026-02-03 23:39:25,828 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-03 23:39:25,829 - sqlalchemy.engine.Engine - INFO - [cached since 22.73s ago] (2.58, -7.8571, '2026-02-03 15:39:18.288163', 'SIDU')
2026-02-03 23:39:25,830 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-03 23:39:25,834 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:25,835 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:39:25,835 - sqlalchemy.engine.Engine - INFO - [cached since 22.73s ago] ('SIDU',)
2026-02-03 23:39:25,837 - api_logger - INFO - rid=/api/portfolio/SIDU/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7559.64ms
2026-02-03 23:39:25,837 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:25,851 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:25,851 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:39:25,851 - sqlalchemy.engine.Engine - INFO - [cached since 201s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:39:25,853 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:39:25,853 - sqlalchemy.engine.Engine - INFO - [cached since 201s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:39:25,856 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.95ms
2026-02-03 23:39:25,857 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:36,556 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:36,556 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:39:36,556 - sqlalchemy.engine.Engine - INFO - [cached since 211.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:39:36,557 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:39:36,557 - sqlalchemy.engine.Engine - INFO - [cached since 211.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:39:36,564 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.11ms
2026-02-03 23:39:36,573 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:55,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:55,472 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:55,473 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('%S%', '%S%', 10, 0)
2026-02-03 23:39:55,477 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=17.91ms
2026-02-03 23:39:55,478 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:55,582 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:55,582 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:55,582 - sqlalchemy.engine.Engine - INFO - [cached since 0.1105s ago] ('%S N%', '%S N%', 10, 0)
2026-02-03 23:39:55,584 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.86ms
2026-02-03 23:39:55,584 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:58,229 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:58,230 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:58,230 - sqlalchemy.engine.Engine - INFO - [cached since 2.758s ago] ('%S%', '%S%', 10, 0)
2026-02-03 23:39:58,232 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.12ms
2026-02-03 23:39:58,233 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:58,703 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:58,704 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:58,704 - sqlalchemy.engine.Engine - INFO - [cached since 3.232s ago] ('%S N%', '%S N%', 10, 0)
2026-02-03 23:39:58,706 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.66ms
2026-02-03 23:39:58,707 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:58,954 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:58,955 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:58,955 - sqlalchemy.engine.Engine - INFO - [cached since 3.483s ago] ('%S N D%', '%S N D%', 10, 0)
2026-02-03 23:39:58,957 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.07ms
2026-02-03 23:39:58,958 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:59,081 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:59,082 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:59,082 - sqlalchemy.engine.Engine - INFO - [cached since 3.611s ago] ('%S N D K%', '%S N D K%', 10, 0)
2026-02-03 23:39:59,084 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.73ms
2026-02-03 23:39:59,085 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:59,376 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:59,377 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:59,377 - sqlalchemy.engine.Engine - INFO - [cached since 3.906s ago] ('%S N D K%', '%S N D K%', 10, 0)
2026-02-03 23:39:59,382 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.00ms
2026-02-03 23:39:59,384 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:39:59,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:39:59,385 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:39:59,385 - sqlalchemy.engine.Engine - INFO - [cached since 3.914s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-03 23:39:59,386 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.53ms
2026-02-03 23:39:59,387 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:00,687 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:00,688 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:40:00,688 - sqlalchemy.engine.Engine - INFO - [cached since 5.216s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-03 23:40:00,690 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.71ms
2026-02-03 23:40:00,691 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:02,221 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:02,221 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:40:02,222 - sqlalchemy.engine.Engine - INFO - [cached since 6.75s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-03 23:40:02,223 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.85ms
2026-02-03 23:40:02,224 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:03,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:03,992 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:40:03,993 - sqlalchemy.engine.Engine - INFO - [cached since 8.521s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-03 23:40:03,995 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.93ms
2026-02-03 23:40:03,996 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:04,603 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:04,604 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-03 23:40:04,605 - sqlalchemy.engine.Engine - INFO - [cached since 9.133s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-03 23:40:04,607 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.75ms
2026-02-03 23:40:04,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:13,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:13,494 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:40:13,494 - sqlalchemy.engine.Engine - INFO - [cached since 248.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:13,503 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:40:13,504 - sqlalchemy.engine.Engine - INFO - [cached since 79.2s ago] ('RKLB',)
2026-02-03 23:40:15,113 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for RKLB: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:16,631 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for RKLB: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:18,155 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for RKLB: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:19,626 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for RKLB: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:21,894 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-03 23:40:21,895 - sqlalchemy.engine.Engine - INFO - [cached since 78.81s ago] ('RKLB',)
2026-02-03 23:40:21,897 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-03 23:40:21,898 - sqlalchemy.engine.Engine - INFO - [cached since 78.8s ago] (74.15, -7.3935, '2026-02-03 15:40:13.505481', 'RKLB')
2026-02-03 23:40:21,899 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-03 23:40:21,901 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:21,902 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:40:21,902 - sqlalchemy.engine.Engine - INFO - [cached since 78.8s ago] ('RKLB',)
2026-02-03 23:40:21,904 - api_logger - INFO - rid=/api/portfolio/RKLB/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8412.14ms
2026-02-03 23:40:21,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:21,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:21,917 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:40:21,917 - sqlalchemy.engine.Engine - INFO - [cached since 257s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:21,918 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:40:21,918 - sqlalchemy.engine.Engine - INFO - [cached since 257s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:21,921 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.84ms
2026-02-03 23:40:21,922 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:25,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:25,535 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:40:25,535 - sqlalchemy.engine.Engine - INFO - [cached since 260.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:25,537 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:40:25,538 - sqlalchemy.engine.Engine - INFO - [cached since 260.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:25,540 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.72ms
2026-02-03 23:40:25,540 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:34,109 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:34,110 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:40:34,111 - sqlalchemy.engine.Engine - INFO - [cached since 269.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:34,114 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:40:34,116 - sqlalchemy.engine.Engine - INFO - [cached since 99.81s ago] ('AMD',)
2026-02-03 23:40:35,715 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for AMD: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:37,221 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for AMD: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:38,720 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for AMD: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:40,198 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for AMD: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:40:41,179 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-03 23:40:41,180 - sqlalchemy.engine.Engine - INFO - [cached since 98.09s ago] ('AMD',)
2026-02-03 23:40:41,182 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-03 23:40:41,182 - sqlalchemy.engine.Engine - INFO - [cached since 98.09s ago] (246.27, 4.0299, '2026-02-03 15:40:34.118323', 'AMD')
2026-02-03 23:40:41,183 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-03 23:40:41,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:41,186 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:40:41,186 - sqlalchemy.engine.Engine - INFO - [cached since 98.08s ago] ('AMD',)
2026-02-03 23:40:41,189 - api_logger - INFO - rid=/api/portfolio/AMD/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7081.30ms
2026-02-03 23:40:41,190 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:41,201 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:41,201 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:40:41,201 - sqlalchemy.engine.Engine - INFO - [cached since 276.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:41,203 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:40:41,203 - sqlalchemy.engine.Engine - INFO - [cached since 276.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:41,207 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.77ms
2026-02-03 23:40:41,207 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:47,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:47,824 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:40:47,824 - sqlalchemy.engine.Engine - INFO - [cached since 282.9s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:47,826 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:40:47,826 - sqlalchemy.engine.Engine - INFO - [cached since 282.9s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:47,828 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.37ms
2026-02-03 23:40:47,830 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:40:57,293 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:40:57,294 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:40:57,294 - sqlalchemy.engine.Engine - INFO - [cached since 292.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:40:57,297 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:40:57,301 - sqlalchemy.engine.Engine - INFO - [cached since 123s ago] ('FRO',)
2026-02-03 23:40:58,813 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for FRO: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:41:00,352 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for FRO: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:41:01,820 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for FRO: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:41:03,392 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for FRO: Too Many Requests. Rate limited. Try after a while.
2026-02-03 23:41:04,379 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-03 23:41:04,379 - sqlalchemy.engine.Engine - INFO - [cached since 121.3s ago] ('FRO',)
2026-02-03 23:41:04,381 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-03 23:41:04,382 - sqlalchemy.engine.Engine - INFO - [cached since 121.3s ago] (28.56, -0.07, '2026-02-03 15:40:57.323663', 'FRO')
2026-02-03 23:41:04,383 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-03 23:41:04,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:41:04,385 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:41:04,385 - sqlalchemy.engine.Engine - INFO - [cached since 121.3s ago] ('FRO',)
2026-02-03 23:41:04,387 - api_logger - INFO - rid=/api/portfolio/FRO/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7095.93ms
2026-02-03 23:41:04,388 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:41:04,397 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:41:04,398 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:41:04,398 - sqlalchemy.engine.Engine - INFO - [cached since 299.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:41:04,399 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:41:04,399 - sqlalchemy.engine.Engine - INFO - [cached since 299.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:41:04,402 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.54ms
2026-02-03 23:41:04,402 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:45:58,058 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:45:58,063 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:45:58,063 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:45:58,065 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:45:58,065 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:45:58,067 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=16.38ms
2026-02-03 23:45:58,067 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:06,126 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:06,127 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:06,127 - sqlalchemy.engine.Engine - INFO - [cached since 8.064s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:06,131 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:46:06,132 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] ('ASTS',)
2026-02-03 23:46:06,136 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:06,170 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:06,170 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:06,170 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:06,170 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:06,171 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=49.96ms
2026-02-03 23:46:06,172 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:06,179 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:06,180 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:06,180 - sqlalchemy.engine.Engine - INFO - [cached since 8.117s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:06,213 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:46:06,217 - sqlalchemy.engine.Engine - INFO - [cached since 8.152s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:06,226 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=48.06ms
2026-02-03 23:46:06,226 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:09,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:09,802 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:09,802 - sqlalchemy.engine.Engine - INFO - [cached since 11.74s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:09,804 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:46:09,804 - sqlalchemy.engine.Engine - INFO - [cached since 3.673s ago] ('ASTS',)
2026-02-03 23:46:09,805 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:09,806 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:09,806 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:09,806 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:09,806 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:09,806 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.38ms
2026-02-03 23:46:09,807 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:09,816 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:09,816 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:09,816 - sqlalchemy.engine.Engine - INFO - [cached since 11.75s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:09,817 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:46:09,817 - sqlalchemy.engine.Engine - INFO - [cached since 11.75s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:09,819 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.20ms
2026-02-03 23:46:09,819 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:11,434 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:11,434 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:11,434 - sqlalchemy.engine.Engine - INFO - [cached since 13.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:11,435 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:46:11,435 - sqlalchemy.engine.Engine - INFO - [cached since 13.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:11,436 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.00ms
2026-02-03 23:46:11,437 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:14,585 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:14,586 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:14,586 - sqlalchemy.engine.Engine - INFO - [cached since 16.52s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:14,588 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:46:14,588 - sqlalchemy.engine.Engine - INFO - [cached since 8.457s ago] ('ASTS',)
2026-02-03 23:46:14,590 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:14,590 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:14,591 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:14,591 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:14,591 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:14,592 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.85ms
2026-02-03 23:46:14,593 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:14,601 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:14,602 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:14,602 - sqlalchemy.engine.Engine - INFO - [cached since 16.54s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:14,603 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:46:14,604 - sqlalchemy.engine.Engine - INFO - [cached since 16.54s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:14,606 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.32ms
2026-02-03 23:46:14,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:42,499 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:42,500 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:42,500 - sqlalchemy.engine.Engine - INFO - [cached since 44.44s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:42,500 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:46:42,500 - sqlalchemy.engine.Engine - INFO - [cached since 44.44s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:42,501 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.07ms
2026-02-03 23:46:42,502 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:46,683 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:46,683 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:46,684 - sqlalchemy.engine.Engine - INFO - [cached since 48.62s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:46,686 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:46:46,687 - sqlalchemy.engine.Engine - INFO - [cached since 40.56s ago] ('ASTS',)
2026-02-03 23:46:46,688 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:46,688 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:46,688 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:46,688 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:46,688 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for ASTS: name 'asyncio' is not defined
2026-02-03 23:46:46,689 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.29ms
2026-02-03 23:46:46,690 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:46:46,700 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:46:46,701 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:46:46,701 - sqlalchemy.engine.Engine - INFO - [cached since 48.64s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:46,703 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:46:46,703 - sqlalchemy.engine.Engine - INFO - [cached since 48.64s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:46:46,707 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.14ms
2026-02-03 23:46:46,710 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:47:50,712 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:47:50,713 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:47:50,713 - sqlalchemy.engine.Engine - INFO - [cached since 112.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:47:50,714 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:47:50,714 - sqlalchemy.engine.Engine - INFO - [cached since 104.6s ago] ('ASTS',)
2026-02-03 23:47:50,714 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:47:50,714 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for ASTS: name 'asyncio' is not defined
2026-02-03 23:47:50,714 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:47:50,714 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for ASTS: name 'asyncio' is not defined
2026-02-03 23:47:50,714 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for ASTS: name 'asyncio' is not defined
2026-02-03 23:47:50,715 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.27ms
2026-02-03 23:47:50,715 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:47:50,721 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:47:50,721 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:47:50,721 - sqlalchemy.engine.Engine - INFO - [cached since 112.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:47:50,722 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:47:50,722 - sqlalchemy.engine.Engine - INFO - [cached since 112.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:47:50,723 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.96ms
2026-02-03 23:47:50,723 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:47:56,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:47:56,420 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:47:56,421 - sqlalchemy.engine.Engine - INFO - [cached since 118.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:47:56,422 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-03 23:47:56,423 - sqlalchemy.engine.Engine - INFO - [cached since 110.3s ago] ('FRO',)
2026-02-03 23:47:56,424 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for FRO: name 'asyncio' is not defined
2026-02-03 23:47:56,425 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for FRO: name 'asyncio' is not defined
2026-02-03 23:47:56,426 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for FRO: name 'asyncio' is not defined
2026-02-03 23:47:56,427 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for FRO: name 'asyncio' is not defined
2026-02-03 23:47:56,427 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for FRO: name 'asyncio' is not defined
2026-02-03 23:47:56,427 - api_logger - INFO - rid=/api/portfolio/FRO/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.08ms
2026-02-03 23:47:56,429 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:47:56,436 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:47:56,437 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:47:56,437 - sqlalchemy.engine.Engine - INFO - [cached since 118.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:47:56,439 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:47:56,440 - sqlalchemy.engine.Engine - INFO - [cached since 118.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:47:56,443 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.27ms
2026-02-03 23:47:56,443 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-03 23:54:55,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-03 23:54:55,141 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-03 23:54:55,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:54:55,143 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-03 23:54:55,143 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-03 23:54:55,144 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=16.20ms
2026-02-03 23:54:55,145 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:01:32,830 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:01:32,833 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:01:32,834 - sqlalchemy.engine.Engine - INFO - [cached since 397.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:01:32,837 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:01:32,837 - sqlalchemy.engine.Engine - INFO - [cached since 397.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:01:32,841 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=32.36ms
2026-02-04 00:01:32,842 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:01:33,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:01:33,277 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:01:33,277 - sqlalchemy.engine.Engine - INFO - [cached since 398.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:01:33,278 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:01:33,278 - sqlalchemy.engine.Engine - INFO - [cached since 398.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:01:33,279 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.46ms
2026-02-04 00:01:33,279 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:03:52,845 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:03:52,847 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:03:52,848 - sqlalchemy.engine.Engine - INFO - [cached since 537.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:03:52,856 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:03:52,856 - sqlalchemy.engine.Engine - INFO - [cached since 537.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:03:52,860 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=29.78ms
2026-02-04 00:03:52,861 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:03:53,862 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:03:53,863 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:03:53,863 - sqlalchemy.engine.Engine - INFO - [cached since 538.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:03:53,864 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:03:53,864 - sqlalchemy.engine.Engine - INFO - [cached since 538.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:03:53,869 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.69ms
2026-02-04 00:03:53,870 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:03:54,823 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:03:54,824 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:03:54,824 - sqlalchemy.engine.Engine - INFO - [cached since 539.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:03:54,829 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:03:54,829 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('ASTS',)
2026-02-04 00:03:54,832 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for ASTS: name 'asyncio' is not defined
2026-02-04 00:03:54,849 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for ASTS: name 'asyncio' is not defined
2026-02-04 00:03:54,849 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for ASTS: name 'asyncio' is not defined
2026-02-04 00:03:54,849 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for ASTS: name 'asyncio' is not defined
2026-02-04 00:03:54,850 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for ASTS: name 'asyncio' is not defined
2026-02-04 00:03:54,852 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:03:54,852 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] (112.4847611636335, '2026-02-03 16:03:54.831024', 'ASTS')
2026-02-04 00:03:54,853 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:03:54,854 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=34.64ms
2026-02-04 00:03:54,860 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:03:54,861 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:03:54,861 - sqlalchemy.engine.Engine - INFO - [cached since 539.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:03:54,862 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:03:54,862 - sqlalchemy.engine.Engine - INFO - [cached since 539.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:03:54,863 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.00ms
2026-02-04 00:03:54,864 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:32,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:32,104 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:32,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('%S%', '%S%', 10, 0)
2026-02-04 00:38:32,108 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=49.33ms
2026-02-04 00:38:32,109 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:32,200 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:32,201 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:32,201 - sqlalchemy.engine.Engine - INFO - [cached since 0.09697s ago] ('%S N%', '%S N%', 10, 0)
2026-02-04 00:38:32,202 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.84ms
2026-02-04 00:38:32,203 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:33,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:33,521 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:33,521 - sqlalchemy.engine.Engine - INFO - [cached since 1.417s ago] ('%S N D%', '%S N D%', 10, 0)
2026-02-04 00:38:33,523 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.10ms
2026-02-04 00:38:33,525 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:33,604 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:33,605 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:33,605 - sqlalchemy.engine.Engine - INFO - [cached since 1.501s ago] ('%S N D K%', '%S N D K%', 10, 0)
2026-02-04 00:38:33,606 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.37ms
2026-02-04 00:38:33,607 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:33,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:33,965 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:33,965 - sqlalchemy.engine.Engine - INFO - [cached since 1.861s ago] ('%S N D K%', '%S N D K%', 10, 0)
2026-02-04 00:38:33,971 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for S N D K: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:33,973 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.97ms
2026-02-04 00:38:33,975 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:33,979 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:33,980 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:33,981 - sqlalchemy.engine.Engine - INFO - [cached since 1.877s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-04 00:38:33,982 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.54ms
2026-02-04 00:38:33,983 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:34,448 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:34,448 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:34,449 - sqlalchemy.engine.Engine - INFO - [cached since 2.345s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-04 00:38:34,450 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for SNDK: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:34,450 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.40ms
2026-02-04 00:38:34,452 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:36,034 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:36,035 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:38:36,035 - sqlalchemy.engine.Engine - INFO - [cached since 3.931s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-04 00:38:36,036 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for SNDK: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:36,037 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.11ms
2026-02-04 00:38:36,037 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:44,973 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:44,977 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:44,978 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:44,981 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:38:44,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('ASTS',)
2026-02-04 00:38:44,983 - app.services.market_providers.yfinance - ERROR - yfinance get_full_data error for ASTS: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:44,983 - app.services.market_providers.yfinance - ERROR - yfinance get_quote error for ASTS: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:44,983 - app.services.market_providers.yfinance - ERROR - yfinance get_fundamental_data error for ASTS: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:44,983 - app.services.market_providers.yfinance - ERROR - yfinance get_historical_data error for ASTS: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:44,983 - app.services.market_providers.yfinance - ERROR - yfinance get_news error for ASTS: Yahoo API requires curl_cffi session not <class 'requests.sessions.Session'>. Solution: stop setting session, let YF handle.
2026-02-04 00:38:44,985 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:38:44,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (112.47293936068085, '2026-02-03 16:38:44.982937', 'ASTS')
2026-02-04 00:38:44,986 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:38:44,987 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=19.60ms
2026-02-04 00:38:44,999 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:45,000 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:45,000 - sqlalchemy.engine.Engine - INFO - [cached since 0.02289s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:45,003 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:45,003 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:45,005 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.15ms
2026-02-04 00:38:45,005 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:49,208 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:49,208 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:49,208 - sqlalchemy.engine.Engine - INFO - [cached since 4.231s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:49,209 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:49,209 - sqlalchemy.engine.Engine - INFO - [cached since 4.207s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:49,211 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.99ms
2026-02-04 00:38:49,211 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:50,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:50,330 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:50,330 - sqlalchemy.engine.Engine - INFO - [cached since 5.353s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:50,331 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:50,331 - sqlalchemy.engine.Engine - INFO - [cached since 5.328s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:50,332 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.10ms
2026-02-04 00:38:50,332 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:51,711 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:51,711 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:51,711 - sqlalchemy.engine.Engine - INFO - [cached since 6.734s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:51,712 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:51,713 - sqlalchemy.engine.Engine - INFO - [cached since 6.71s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:51,717 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.09ms
2026-02-04 00:38:51,719 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:52,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:52,433 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:52,433 - sqlalchemy.engine.Engine - INFO - [cached since 7.456s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:52,434 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:52,434 - sqlalchemy.engine.Engine - INFO - [cached since 7.431s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:52,435 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.42ms
2026-02-04 00:38:52,435 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:53,096 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:53,097 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:53,097 - sqlalchemy.engine.Engine - INFO - [cached since 8.12s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:53,098 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:53,098 - sqlalchemy.engine.Engine - INFO - [cached since 8.095s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:53,099 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.80ms
2026-02-04 00:38:53,100 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:53,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:53,849 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:53,849 - sqlalchemy.engine.Engine - INFO - [cached since 8.872s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:53,852 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:53,854 - sqlalchemy.engine.Engine - INFO - [cached since 8.851s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:53,859 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.81ms
2026-02-04 00:38:53,861 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:38:54,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:38:54,565 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:38:54,565 - sqlalchemy.engine.Engine - INFO - [cached since 9.588s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:54,567 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:38:54,568 - sqlalchemy.engine.Engine - INFO - [cached since 9.566s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:38:54,570 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.84ms
2026-02-04 00:38:54,571 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:44:58,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:44:58,816 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:44:58,816 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:44:58,818 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:44:58,818 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('ASTS',)
2026-02-04 00:44:59,953 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:44:59,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('ASTS',)
2026-02-04 00:44:59,955 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time) VALUES (?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-04 00:44:59,955 - sqlalchemy.engine.Engine - INFO - [no key 0.00013s] ('02c66b20-e713-32f3-b7fa-219efb715de4', 'ASTS', None, None, None, '1970-01-01 00:00:00.000000')
2026-02-04 00:44:59,957 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:44:59,960 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=500 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1168.85ms
2026-02-04 00:45:07,229 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:45:07,229 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:45:07,229 - sqlalchemy.engine.Engine - INFO - [cached since 8.413s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:45:07,234 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:45:07,234 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:45:07,239 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.23ms
2026-02-04 00:45:07,240 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:46:29,855 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:46:29,871 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:46:29,871 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:46:29,873 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:46:29,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('ASTS',)
2026-02-04 00:46:31,188 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:46:31,188 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('ASTS',)
2026-02-04 00:46:31,192 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, forward_pe=? WHERE stocks.ticker = ?
2026-02-04 00:46:31,192 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] (41986658304.0, -112.48041, 'ASTS')
2026-02-04 00:46:31,195 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:46:31,195 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (114.2801, 9.306643, 60.3296661923277, 105.50800476074218, 83.88880172729492, 57.32405026435852, 8.613135137573579, 9.27025714834744, -0.6571220107738611, 126.46382566158029, 105.50800476074218, 84.55218385990408, 49.355969050843576, 60.857759390658345, 26.352388371214033, 16916090.55, 0.37725684791868175, '2026-02-03 16:46:29.874649', 'ASTS')
2026-02-04 00:46:31,196 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:46:31,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:46:31,201 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:46:31,201 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ('ASTS',)
2026-02-04 00:46:31,203 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1370.53ms
2026-02-04 00:46:31,204 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:46:31,215 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:46:31,216 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:46:31,216 - sqlalchemy.engine.Engine - INFO - [cached since 1.345s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:46:31,219 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:46:31,220 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:46:31,224 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.57ms
2026-02-04 00:46:31,225 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:03,995 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:03,997 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:03,997 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('%S%', '%S%', 10, 0)
2026-02-04 00:47:04,000 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.59ms
2026-02-04 00:47:04,002 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:04,106 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:04,107 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:04,107 - sqlalchemy.engine.Engine - INFO - [cached since 0.1099s ago] ('%S N%', '%S N%', 10, 0)
2026-02-04 00:47:04,108 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.96ms
2026-02-04 00:47:04,108 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:05,144 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:05,145 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:05,145 - sqlalchemy.engine.Engine - INFO - [cached since 1.148s ago] ('%S%', '%S%', 10, 0)
2026-02-04 00:47:05,146 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.69ms
2026-02-04 00:47:05,147 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:08,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:08,741 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:08,741 - sqlalchemy.engine.Engine - INFO - [cached since 4.744s ago] ('%S N%', '%S N%', 10, 0)
2026-02-04 00:47:08,743 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.09ms
2026-02-04 00:47:08,744 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:10,069 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:10,069 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:10,069 - sqlalchemy.engine.Engine - INFO - [cached since 6.072s ago] ('%S N D%', '%S N D%', 10, 0)
2026-02-04 00:47:10,070 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1.45ms
2026-02-04 00:47:10,070 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:10,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:10,176 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:10,176 - sqlalchemy.engine.Engine - INFO - [cached since 6.179s ago] ('%S N D K%', '%S N D K%', 10, 0)
2026-02-04 00:47:10,177 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.91ms
2026-02-04 00:47:10,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:10,523 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:10,524 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:10,524 - sqlalchemy.engine.Engine - INFO - [cached since 6.527s ago] ('%S N D K%', '%S N D K%', 10, 0)
2026-02-04 00:47:10,536 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:10,537 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:10,538 - sqlalchemy.engine.Engine - INFO - [cached since 6.541s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-04 00:47:10,540 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.92ms
2026-02-04 00:47:10,541 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:11,442 - yfinance - ERROR - HTTP Error 404: {"quoteSummary":{"result":null,"error":{"code":"Not Found","description":"Quote not found for symbol: S N D K"}}}
2026-02-04 00:47:11,911 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1389.73ms
2026-02-04 00:47:11,912 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:12,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:12,262 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:12,263 - sqlalchemy.engine.Engine - INFO - [cached since 8.266s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-04 00:47:12,777 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:12,778 - sqlalchemy.engine.Engine - INFO - [cached since 41.59s ago] ('SNDK',)
2026-02-04 00:47:12,781 - sqlalchemy.engine.Engine - INFO - INSERT INTO stocks (ticker, name, sector, industry, market_cap, pe_ratio, forward_pe, eps, dividend_yield, beta, fifty_two_week_high, fifty_two_week_low, exchange, currency) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 00:47:12,781 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('SNDK', 'Sandisk Corporation', None, None, None, None, None, None, None, None, None, None, None, 'USD')
2026-02-04 00:47:12,784 - sqlalchemy.engine.Engine - INFO - INSERT INTO market_data_cache (ticker, current_price, change_percent, rsi_14, ma_20, ma_50, ma_200, macd_val, macd_signal, macd_hist, bb_upper, bb_middle, bb_lower, atr_14, k_line, d_line, j_line, volume_ma_20, volume_ratio, market_status, last_updated) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 00:47:12,786 - sqlalchemy.engine.Engine - INFO - [generated in 0.00187s] ('SNDK', 671.0, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, 'CLOSED', '2026-02-03 16:47:12.784098')
2026-02-04 00:47:12,788 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:12,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:12,791 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 00:47:12,791 - sqlalchemy.engine.Engine - INFO - [cached since 8.794s ago] ('%SNDK%', '%SNDK%', 10, 0)
2026-02-04 00:47:12,792 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=532.52ms
2026-02-04 00:47:12,793 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:13,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:13,991 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:47:13,991 - sqlalchemy.engine.Engine - INFO - [cached since 44.12s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:13,992 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 00:47:13,992 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK')
2026-02-04 00:47:13,994 - sqlalchemy.engine.Engine - INFO - INSERT INTO portfolios (id, user_id, ticker, quantity, avg_cost, target_price, stop_loss_price, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 00:47:13,994 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('57416cd4-f97b-4ac4-ab32-aaf9ad8218bd', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK', 0.0, 0.0, None, None, '2026-02-03 16:47:13.994114', '2026-02-03 16:47:13.994115')
2026-02-04 00:47:13,995 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:13,996 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:13,996 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:13,996 - sqlalchemy.engine.Engine - INFO - [cached since 44.12s ago] ('SNDK',)
2026-02-04 00:47:13,997 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:13,997 - sqlalchemy.engine.Engine - INFO - [cached since 44.12s ago] ('SNDK',)
2026-02-04 00:47:13,998 - api_logger - INFO - rid=/api/portfolio/ method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.12ms
2026-02-04 00:47:13,998 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:14,006 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:14,006 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:47:14,006 - sqlalchemy.engine.Engine - INFO - [cached since 44.14s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:14,007 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:47:14,007 - sqlalchemy.engine.Engine - INFO - [cached since 42.79s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:14,008 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:14,008 - sqlalchemy.engine.Engine - INFO - [cached since 44.13s ago] ('AAPL',)
2026-02-04 00:47:14,536 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:14,536 - sqlalchemy.engine.Engine - INFO - [cached since 43.35s ago] ('AAPL',)
2026-02-04 00:47:14,539 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, beta=? WHERE stocks.ticker = ?
2026-02-04 00:47:14,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] (3963442692096.0, 34.091026, 29.071033, 7.91, 0.39, 1.107, 'AAPL')
2026-02-04 00:47:14,541 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:14,542 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (269.6301, -0.10927115, 60.17972822114091, 257.71949768066406, 268.3685986328125, 237.10162239074708, -1.1448765292005874, -3.450756442611816, 2.3058799134112284, 270.44320872562577, 257.71949768066406, 244.99578663570233, 6.375718252999442, 84.86595012102254, 71.60374426569476, 111.39036183167809, 52636626.35, 0.4252291332497224, '2026-02-03 16:47:14.009121', 'AAPL')
2026-02-04 00:47:14,543 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:14,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:14,545 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:14,546 - sqlalchemy.engine.Engine - INFO - [cached since 43.35s ago] ('AAPL',)
2026-02-04 00:47:15,549 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:15,549 - sqlalchemy.engine.Engine - INFO - [cached since 45.68s ago] ('AMD',)
2026-02-04 00:47:16,208 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:16,209 - sqlalchemy.engine.Engine - INFO - [cached since 45.02s ago] ('AMD',)
2026-02-04 00:47:16,211 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, market_cap=?, pe_ratio=?, forward_pe=?, eps=?, beta=? WHERE stocks.ticker = ?
2026-02-04 00:47:16,212 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('Advanced Micro Devices, Inc.', 398479458304.0, 127.479164, 37.041073, 1.92, 1.949, 'AMD')
2026-02-04 00:47:16,213 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:16,213 - sqlalchemy.engine.Engine - INFO - [cached since 1.672s ago] (244.76, -0.61315215, 65.74036401802141, 233.76899948120118, 221.99859954833985, 177.3397497177124, 8.12235553199315, 7.7945297582513415, 0.3278257737418091, 271.22769401979446, 233.76899948120118, 196.3103049426079, 12.523280552455358, 43.45007930757203, 55.72878281936019, 18.892672283995722, 37189581.3, 0.44033370174027747, '2026-02-03 16:47:15.551058', 'AMD')
2026-02-04 00:47:16,215 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:16,217 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:16,218 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:16,218 - sqlalchemy.engine.Engine - INFO - [cached since 45.02s ago] ('AMD',)
2026-02-04 00:47:17,222 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:17,223 - sqlalchemy.engine.Engine - INFO - [cached since 47.35s ago] ('AMZN',)
2026-02-04 00:47:17,755 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:17,755 - sqlalchemy.engine.Engine - INFO - [cached since 46.57s ago] ('AMZN',)
2026-02-04 00:47:17,757 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, market_cap=?, pe_ratio=?, forward_pe=?, eps=?, beta=? WHERE stocks.ticker = ?
2026-02-04 00:47:17,757 - sqlalchemy.engine.Engine - INFO - [cached since 1.546s ago] ('Amazon.com, Inc.', 2535184662528.0, 33.543137, 30.238348, 7.07, 1.385, 'AMZN')
2026-02-04 00:47:17,759 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:17,759 - sqlalchemy.engine.Engine - INFO - [cached since 3.218s ago] (237.15, -2.3913453, 44.12712007685422, 240.11099853515626, 233.23379974365236, 222.41550018310548, 1.8091410200263454, 2.0052105337731723, -0.1960695137468269, 249.33577582376634, 240.11099853515626, 230.88622124654617, 6.074287414550781, 58.680863567398625, 62.809222356670645, 50.424145988854576, 40066933.65, 0.5744430856889394, '2026-02-03 16:47:17.224464', 'AMZN')
2026-02-04 00:47:17,760 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:17,762 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:17,763 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:17,763 - sqlalchemy.engine.Engine - INFO - [cached since 46.56s ago] ('AMZN',)
2026-02-04 00:47:18,767 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:18,767 - sqlalchemy.engine.Engine - INFO - [cached since 48.89s ago] ('ASTS',)
2026-02-04 00:47:19,770 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:19,771 - sqlalchemy.engine.Engine - INFO - [cached since 49.9s ago] ('BRK.B',)
2026-02-04 00:47:20,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:20,883 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:47:20,884 - sqlalchemy.engine.Engine - INFO - [cached since 51.01s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:20,886 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 00:47:20,886 - sqlalchemy.engine.Engine - INFO - [cached since 6.894s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK')
2026-02-04 00:47:20,888 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:20,889 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:20,890 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:20,890 - sqlalchemy.engine.Engine - INFO - [cached since 51.02s ago] ('SNDK',)
2026-02-04 00:47:20,891 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:20,892 - sqlalchemy.engine.Engine - INFO - [cached since 51.02s ago] ('SNDK',)
2026-02-04 00:47:20,893 - api_logger - INFO - rid=/api/portfolio/ method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.42ms
2026-02-04 00:47:20,894 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:21,176 - yfinance - ERROR - $BRK.B: possibly delisted; no price data found  (period=200d) (Yahoo error = "No data found, symbol may be delisted")
2026-02-04 00:47:22,503 - yfinance - ERROR - $BRK.B: possibly delisted; no price data found  (period=200d) (Yahoo error = "No data found, symbol may be delisted")
2026-02-04 00:47:22,506 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:22,506 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (493.4536745968354, '2026-02-03 16:47:19.772229', 'BRK.B')
2026-02-04 00:47:22,508 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:23,511 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:23,511 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:23,511 - sqlalchemy.engine.Engine - INFO - [cached since 53.64s ago] ('FRO',)
2026-02-04 00:47:24,045 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:24,045 - sqlalchemy.engine.Engine - INFO - [cached since 52.86s ago] ('FRO',)
2026-02-04 00:47:24,046 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, sector=?, industry=?, market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, beta=?, fifty_two_week_high=?, fifty_two_week_low=? WHERE stocks.ticker = ?
2026-02-04 00:47:24,046 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('Frontline Plc', 'Energy', 'Oil & Gas Midstream', 6397068800.0, 29.321428, 9.7256775, 0.98, 3.26, 0.049, 28.9499, 12.4, 'FRO')
2026-02-04 00:47:24,047 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:24,047 - sqlalchemy.engine.Engine - INFO - [cached since 9.506s ago] (28.735, 0.5775321, 72.82698446984926, 26.19325017929077, 24.150100021362306, 21.146848573684693, 1.3881045283662665, 1.131395783794467, 0.2567087445717995, 29.76756811268828, 26.19325017929077, 22.618932245893262, 0.8992783682686942, 90.76427038057203, 85.79434581549535, 100.70411951072538, 3298987.3, 0.27118807035116504, '2026-02-03 16:47:23.512685', 'FRO')
2026-02-04 00:47:24,048 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:24,048 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:24,048 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:24,049 - sqlalchemy.engine.Engine - INFO - [cached since 52.85s ago] ('FRO',)
2026-02-04 00:47:25,051 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:25,052 - sqlalchemy.engine.Engine - INFO - [cached since 55.18s ago] ('GOOGL',)
2026-02-04 00:47:25,649 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:25,649 - sqlalchemy.engine.Engine - INFO - [cached since 54.46s ago] ('GOOGL',)
2026-02-04 00:47:25,651 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, fifty_two_week_high=? WHERE stocks.ticker = ?
2026-02-04 00:47:25,651 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (4160513900544.0, 33.87574, 30.500122, 10.14, 0.24, 349.0, 'GOOGL')
2026-02-04 00:47:25,652 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:25,652 - sqlalchemy.engine.Engine - INFO - [cached since 11.11s ago] (343.5, -0.05528309, 59.05700255548695, 331.6445007324219, 320.17595947265625, 236.10667701721192, 6.991855860099292, 6.421933380497529, 0.5699224796017637, 346.15127601451616, 331.6445007324219, 317.1377254503276, 8.242852347237724, 80.89146537465115, 77.05196867694886, 88.57045877005572, 30263498.35, 0.46309474330815426, '2026-02-03 16:47:25.052638', 'GOOGL')
2026-02-04 00:47:25,653 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:25,655 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:25,655 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:25,655 - sqlalchemy.engine.Engine - INFO - [cached since 54.46s ago] ('GOOGL',)
2026-02-04 00:47:26,658 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:26,659 - sqlalchemy.engine.Engine - INFO - [cached since 56.79s ago] ('IREN',)
2026-02-04 00:47:27,178 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:27,178 - sqlalchemy.engine.Engine - INFO - [cached since 55.99s ago] ('IREN',)
2026-02-04 00:47:27,180 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, sector=?, industry=?, market_cap=?, pe_ratio=?, forward_pe=?, eps=?, beta=?, fifty_two_week_high=?, fifty_two_week_low=? WHERE stocks.ticker = ?
2026-02-04 00:47:27,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('IREN LIMITED', 'Financial Services', 'Capital Markets', 17822386176.0, 31.195402, 64.868484, 1.74, 4.281, 76.87, 5.125, 'IREN')
2026-02-04 00:47:27,182 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:27,183 - sqlalchemy.engine.Engine - INFO - [cached since 12.64s ago] (54.28, 2.2607327, 51.501043959395005, 53.00325012207031, 46.76590003967285, 32.20070003032684, 2.827027075405759, 2.9997990196071656, -0.1727719442014064, 63.10680878617488, 53.00325012207031, 42.899691457965744, 5.619714191981724, 45.827882380820775, 58.911732513757926, 19.66018211494648, 42731983.7, 0.3616044157575582, '2026-02-03 16:47:26.660069', 'IREN')
2026-02-04 00:47:27,185 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:27,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:27,189 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:27,189 - sqlalchemy.engine.Engine - INFO - [cached since 55.99s ago] ('IREN',)
2026-02-04 00:47:28,193 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:28,193 - sqlalchemy.engine.Engine - INFO - [cached since 58.32s ago] ('META',)
2026-02-04 00:47:28,727 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:28,728 - sqlalchemy.engine.Engine - INFO - [cached since 57.54s ago] ('META',)
2026-02-04 00:47:28,730 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, beta=? WHERE stocks.ticker = ?
2026-02-04 00:47:28,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('Meta Platforms, Inc.', 1767793098752.0, 29.713232, 19.711687, 23.52, 0.3, 1.284, 'META')
2026-02-04 00:47:28,732 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:28,732 - sqlalchemy.engine.Engine - INFO - [cached since 14.19s ago] (698.8552, -1.0694567, 65.42539046793911, 656.7832580566406, 652.0696850585938, 682.5047174072265, 15.067149118753264, 6.696311072312524, 8.37083804644074, 729.7580775984773, 656.7832580566406, 583.808438514804, 23.155713762555802, 74.38302202630872, 76.40582880886815, 70.33740846118988, 17920101.15, 0.2989281676013308, '2026-02-03 16:47:28.194531', 'META')
2026-02-04 00:47:28,733 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:28,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:28,736 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:28,736 - sqlalchemy.engine.Engine - INFO - [cached since 57.54s ago] ('META',)
2026-02-04 00:47:29,738 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:29,739 - sqlalchemy.engine.Engine - INFO - [cached since 59.87s ago] ('MSFT',)
2026-02-04 00:47:30,264 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:30,264 - sqlalchemy.engine.Engine - INFO - [cached since 59.08s ago] ('MSFT',)
2026-02-04 00:47:30,266 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, beta=? WHERE stocks.ticker = ?
2026-02-04 00:47:30,266 - sqlalchemy.engine.Engine - INFO - [cached since 15.73s ago] (3055163801600.0, 25.779135, 21.763416, 15.96, 0.86, 1.084, 'MSFT')
2026-02-04 00:47:30,267 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:30,267 - sqlalchemy.engine.Engine - INFO - [cached since 15.73s ago] (411.435, -2.8190467, 28.949239414581484, 459.4970001220703, 473.1956005859375, 485.23453689575194, -13.065518821593344, -8.416942460165936, -4.648576361427407, 502.25935602651623, 459.4970001220703, 416.73464421762435, 14.945713588169642, 20.024879441057344, 36.12715101843576, -12.17966371369949, 34898152.35, 0.6475456572416505, '2026-02-03 16:47:29.740132', 'MSFT')
2026-02-04 00:47:30,268 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:30,270 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:30,271 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:30,271 - sqlalchemy.engine.Engine - INFO - [cached since 59.07s ago] ('MSFT',)
2026-02-04 00:47:31,274 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:31,274 - sqlalchemy.engine.Engine - INFO - [cached since 61.4s ago] ('NVDA',)
2026-02-04 00:47:31,800 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:31,800 - sqlalchemy.engine.Engine - INFO - [cached since 60.61s ago] ('NVDA',)
2026-02-04 00:47:31,802 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, eps=? WHERE stocks.ticker = ?
2026-02-04 00:47:31,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (4387694706688.0, 44.497528, 23.514914, 4.05, 'NVDA')
2026-02-04 00:47:31,803 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:31,804 - sqlalchemy.engine.Engine - INFO - [cached since 17.26s ago] (180.2, -2.9066346, 43.73602343369437, 186.16450119018555, 183.77419921875, 168.4890449523926, 0.5222765856155718, 0.8078018265483723, -0.2855252409328005, 193.2281358135194, 186.16450119018555, 179.1008665668517, 5.469999040876116, 48.60665695661698, 63.822373594672634, 18.17522368050568, 160611694.2, 0.5406012584107341, '2026-02-03 16:47:31.275800', 'NVDA')
2026-02-04 00:47:31,804 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:31,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:31,806 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:31,806 - sqlalchemy.engine.Engine - INFO - [cached since 60.61s ago] ('NVDA',)
2026-02-04 00:47:32,810 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:32,810 - sqlalchemy.engine.Engine - INFO - [cached since 62.94s ago] ('OKLO',)
2026-02-04 00:47:33,335 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:33,335 - sqlalchemy.engine.Engine - INFO - [cached since 62.15s ago] ('OKLO',)
2026-02-04 00:47:33,338 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, sector=?, industry=?, market_cap=?, forward_pe=?, eps=?, beta=?, fifty_two_week_high=?, fifty_two_week_low=? WHERE stocks.ticker = ?
2026-02-04 00:47:33,338 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('Oklo Inc.', 'Utilities', 'Utilities - Independent Power Producers', 12146647040.0, -116.497574, -0.56, 0.774, 193.84, 17.42, 'OKLO')
2026-02-04 00:47:33,340 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:33,340 - sqlalchemy.engine.Engine - INFO - [cached since 18.8s ago] (77.74, 5.617515, 34.07407332985626, 90.81649894714356, 89.00959945678711, 81.28944983482361, -3.061013868453273, -1.4799251011370906, -1.5810887673161822, 107.27455183738975, 90.81649894714356, 74.35844605689736, 7.614706856863839, 16.794054717767608, 20.23378371648571, 9.914596720331403, 13583559.15, 0.3405648658731684, '2026-02-03 16:47:32.811476', 'OKLO')
2026-02-04 00:47:33,341 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:33,342 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:33,343 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:33,343 - sqlalchemy.engine.Engine - INFO - [cached since 62.14s ago] ('OKLO',)
2026-02-04 00:47:34,345 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:34,347 - sqlalchemy.engine.Engine - INFO - [cached since 64.47s ago] ('PG',)
2026-02-04 00:47:34,874 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:34,874 - sqlalchemy.engine.Engine - INFO - [cached since 63.69s ago] ('PG',)
2026-02-04 00:47:34,876 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, beta=? WHERE stocks.ticker = ?
2026-02-04 00:47:34,876 - sqlalchemy.engine.Engine - INFO - [cached since 6.146s ago] ('Procter & Gamble Company (The)', 364250005504.0, 23.059172, 21.299885, 6.76, 2.76, 0.38, 'PG')
2026-02-04 00:47:34,878 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:34,878 - sqlalchemy.engine.Engine - INFO - [cached since 20.34s ago] (155.88, 1.7493525, 76.63711846597697, 146.07154006958007, 144.58728759765626, 151.78491554260253, 2.6284525100239193, 1.5954081074856985, 1.0330444025382208, 155.93765514793645, 146.07154006958007, 136.20542499122368, 2.622872670239072, 89.54475860070481, 83.12649755919314, 102.38128068372814, 11785175.45, 0.3749039646244724, '2026-02-03 16:47:34.350639', 'PG')
2026-02-04 00:47:34,878 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:34,880 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:34,881 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:34,881 - sqlalchemy.engine.Engine - INFO - [cached since 63.68s ago] ('PG',)
2026-02-04 00:47:35,885 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:35,885 - sqlalchemy.engine.Engine - INFO - [cached since 66.01s ago] ('RKLB',)
2026-02-04 00:47:36,421 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:36,422 - sqlalchemy.engine.Engine - INFO - [cached since 65.23s ago] ('RKLB',)
2026-02-04 00:47:36,424 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, sector=?, industry=?, market_cap=?, forward_pe=?, eps=?, beta=?, fifty_two_week_high=?, fifty_two_week_low=? WHERE stocks.ticker = ?
2026-02-04 00:47:36,424 - sqlalchemy.engine.Engine - INFO - [cached since 3.086s ago] ('Rocket Lab Corporation', 'Industrials', 'Aerospace & Defense', 42088845312.0, -505.09613, -0.38, 2.182, 99.58, 14.71, 'RKLB')
2026-02-04 00:47:36,425 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:36,426 - sqlalchemy.engine.Engine - INFO - [cached since 21.88s ago] (78.795, 6.264324, 43.163252835746974, 85.99925117492675, 68.88300048828125, 48.684250068664554, 2.477683622518228, 4.897886404626953, -2.420202782108725, 95.95891535460893, 85.99925117492675, 76.03958699524458, 7.557927812848773, 19.965362489755538, 26.424703675293244, 7.046680118680129, 24718940.45, 0.3489271321093376, '2026-02-03 16:47:35.887190', 'RKLB')
2026-02-04 00:47:36,426 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:36,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:36,429 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:36,429 - sqlalchemy.engine.Engine - INFO - [cached since 65.23s ago] ('RKLB',)
2026-02-04 00:47:37,433 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:37,433 - sqlalchemy.engine.Engine - INFO - [cached since 67.56s ago] ('SIDU',)
2026-02-04 00:47:38,097 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:38,097 - sqlalchemy.engine.Engine - INFO - [cached since 66.91s ago] ('SIDU',)
2026-02-04 00:47:38,099 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, sector=?, industry=?, market_cap=?, forward_pe=?, eps=?, beta=?, fifty_two_week_high=?, fifty_two_week_low=? WHERE stocks.ticker = ?
2026-02-04 00:47:38,100 - sqlalchemy.engine.Engine - INFO - [cached since 4.762s ago] ('Sidus Space, Inc.', 'Industrials', 'Aerospace & Defense', 184925184.0, -11.583333, -1.26, -1.652, 5.39, 0.628, 'SIDU')
2026-02-04 00:47:38,101 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:38,101 - sqlalchemy.engine.Engine - INFO - [cached since 23.56s ago] (2.78, 7.75194, 46.51162907920032, 3.5959999918937684, 2.286519993543625, 1.5920899984240533, 0.10596884447874633, 0.3223845852584146, -0.2164157407796683, 4.833984835193682, 3.5959999918937684, 2.3580151485938545, 0.5749999965940203, 13.13608385301726, 21.936881318836438, -4.465511078621098, 39043219.1, 0.280063536052026, '2026-02-03 16:47:37.435788', 'SIDU')
2026-02-04 00:47:38,102 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:38,104 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:38,104 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:38,105 - sqlalchemy.engine.Engine - INFO - [cached since 66.9s ago] ('SIDU',)
2026-02-04 00:47:39,107 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:39,107 - sqlalchemy.engine.Engine - INFO - [cached since 69.23s ago] ('SNDK',)
2026-02-04 00:47:40,109 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:40,109 - sqlalchemy.engine.Engine - INFO - [cached since 70.24s ago] ('TSLA',)
2026-02-04 00:47:40,629 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:40,629 - sqlalchemy.engine.Engine - INFO - [cached since 69.44s ago] ('TSLA',)
2026-02-04 00:47:40,631 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET name=?, market_cap=?, pe_ratio=?, forward_pe=?, eps=?, beta=? WHERE stocks.ticker = ?
2026-02-04 00:47:40,631 - sqlalchemy.engine.Engine - INFO - [cached since 24.42s ago] ('Tesla, Inc.', 1598348460032.0, 387.22726, 146.61188, 1.1, 1.887, 'TSLA')
2026-02-04 00:47:40,633 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:40,633 - sqlalchemy.engine.Engine - INFO - [cached since 26.09s ago] (425.94, 0.958693, 41.03904921676616, 434.90050048828124, 444.42780151367185, 378.98320030212403, -6.4386477368746, -5.1458772761844465, -1.2927704606901536, 454.41588931039774, 434.90050048828124, 415.38511166616473, 14.397142682756696, 30.524014326453916, 35.723071996787695, 20.125898985786364, 60243173.35, 0.412139095922974, '2026-02-03 16:47:40.110326', 'TSLA')
2026-02-04 00:47:40,633 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:40,635 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:40,636 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:40,636 - sqlalchemy.engine.Engine - INFO - [cached since 69.44s ago] ('TSLA',)
2026-02-04 00:47:40,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:40,906 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:47:40,906 - sqlalchemy.engine.Engine - INFO - [cached since 71.04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:40,908 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:47:40,909 - sqlalchemy.engine.Engine - INFO - [cached since 69.69s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:40,910 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:40,911 - sqlalchemy.engine.Engine - INFO - [cached since 71.04s ago] ('AAPL',)
2026-02-04 00:47:41,639 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:41,640 - sqlalchemy.engine.Engine - INFO - [cached since 71.77s ago] ('WMT',)
2026-02-04 00:47:41,918 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:41,918 - sqlalchemy.engine.Engine - INFO - [cached since 72.05s ago] ('AMD',)
2026-02-04 00:47:42,163 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:42,163 - sqlalchemy.engine.Engine - INFO - [cached since 70.98s ago] ('WMT',)
2026-02-04 00:47:42,166 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, beta=?, fifty_two_week_high=? WHERE stocks.ticker = ?
2026-02-04 00:47:42,166 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] (1012871004160.0, 44.26481, 42.775707, 2.87, 0.76, 0.671, 127.1461, 'WMT')
2026-02-04 00:47:42,168 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:42,168 - sqlalchemy.engine.Engine - INFO - [cached since 27.63s ago] (127.04, 2.4020662, 70.16907672837291, 118.21800003051757, 114.63250625610351, 103.08232521057128, 2.3311763272273254, 1.776437011757599, 0.5547393154697264, 124.97043287528531, 118.21800003051757, 111.46556718574983, 2.6047205243791853, 72.88794532051772, 55.75450754988007, 107.15482086179303, 45826903.9, 0.22079340166814107, '2026-02-03 16:47:41.641850', 'WMT')
2026-02-04 00:47:42,170 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:42,172 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:42,172 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:42,172 - sqlalchemy.engine.Engine - INFO - [cached since 70.97s ago] ('WMT',)
2026-02-04 00:47:42,920 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:42,921 - sqlalchemy.engine.Engine - INFO - [cached since 73.05s ago] ('AMZN',)
2026-02-04 00:47:43,175 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:47:43,176 - sqlalchemy.engine.Engine - INFO - [cached since 71.96s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:43,179 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=29174.22ms
2026-02-04 00:47:43,180 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:43,924 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:43,925 - sqlalchemy.engine.Engine - INFO - [cached since 74.05s ago] ('ASTS',)
2026-02-04 00:47:44,286 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:44,286 - sqlalchemy.engine.Engine - INFO - [cached since 73.1s ago] ('ASTS',)
2026-02-04 00:47:44,289 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, forward_pe=? WHERE stocks.ticker = ?
2026-02-04 00:47:44,289 - sqlalchemy.engine.Engine - INFO - [cached since 73.1s ago] (41984786432.0, -112.475395, 'ASTS')
2026-02-04 00:47:44,290 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:44,290 - sqlalchemy.engine.Engine - INFO - [cached since 73.1s ago] (114.275, 9.301768, 60.32772879285059, 105.50774993896485, 83.88869979858399, 57.324024782180786, 8.612728584310574, 9.27017583769484, -0.6574472533842659, 126.46312182953655, 105.50774993896485, 84.55237804839315, 49.34958733907168, 60.85563215340105, 26.337497710412947, 16916963.75, 0.3782697116673788, '2026-02-03 16:47:43.926437', 'ASTS')
2026-02-04 00:47:44,291 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:44,293 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:44,293 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:44,294 - sqlalchemy.engine.Engine - INFO - [cached since 73.09s ago] ('ASTS',)
2026-02-04 00:47:45,296 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:45,296 - sqlalchemy.engine.Engine - INFO - [cached since 75.42s ago] ('BRK.B',)
2026-02-04 00:47:46,298 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:46,299 - sqlalchemy.engine.Engine - INFO - [cached since 76.43s ago] ('FRO',)
2026-02-04 00:47:47,303 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:47,303 - sqlalchemy.engine.Engine - INFO - [cached since 77.43s ago] ('GOOGL',)
2026-02-04 00:47:48,306 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:48,306 - sqlalchemy.engine.Engine - INFO - [cached since 78.43s ago] ('IREN',)
2026-02-04 00:47:49,309 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:49,310 - sqlalchemy.engine.Engine - INFO - [cached since 79.44s ago] ('META',)
2026-02-04 00:47:50,313 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:50,314 - sqlalchemy.engine.Engine - INFO - [cached since 80.44s ago] ('MSFT',)
2026-02-04 00:47:51,317 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:51,318 - sqlalchemy.engine.Engine - INFO - [cached since 81.44s ago] ('NVDA',)
2026-02-04 00:47:51,897 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:51,897 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:47:51,897 - sqlalchemy.engine.Engine - INFO - [cached since 82.03s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:51,898 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:47:51,898 - sqlalchemy.engine.Engine - INFO - [cached since 80.68s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:51,905 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.97ms
2026-02-04 00:47:51,907 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:47:52,321 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:52,322 - sqlalchemy.engine.Engine - INFO - [cached since 82.45s ago] ('OKLO',)
2026-02-04 00:47:53,325 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:53,325 - sqlalchemy.engine.Engine - INFO - [cached since 83.45s ago] ('PG',)
2026-02-04 00:47:54,328 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:54,328 - sqlalchemy.engine.Engine - INFO - [cached since 84.46s ago] ('RKLB',)
2026-02-04 00:47:55,332 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:55,333 - sqlalchemy.engine.Engine - INFO - [cached since 85.46s ago] ('SIDU',)
2026-02-04 00:47:56,337 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:56,338 - sqlalchemy.engine.Engine - INFO - [cached since 86.46s ago] ('SNDK',)
2026-02-04 00:47:57,350 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:57,354 - sqlalchemy.engine.Engine - INFO - [cached since 87.48s ago] ('TSLA',)
2026-02-04 00:47:58,358 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:58,358 - sqlalchemy.engine.Engine - INFO - [cached since 88.48s ago] ('WMT',)
2026-02-04 00:47:58,717 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:47:58,718 - sqlalchemy.engine.Engine - INFO - [cached since 87.53s ago] ('WMT',)
2026-02-04 00:47:58,720 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, eps=?, dividend_yield=?, beta=?, fifty_two_week_high=? WHERE stocks.ticker = ?
2026-02-04 00:47:58,720 - sqlalchemy.engine.Engine - INFO - [cached since 16.55s ago] (1013468954624.0, 44.290943, 42.80096, 2.87, 0.76, 0.671, 127.1461, 'WMT')
2026-02-04 00:47:58,721 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:47:58,721 - sqlalchemy.engine.Engine - INFO - [cached since 44.18s ago] (127.115, 2.4625185, 70.3035659331411, 118.22174987792968, 114.63400619506837, 103.0827001953125, 2.3371589897651717, 1.777633544265168, 0.5595254455000036, 124.99486233804308, 118.22174987792968, 111.44863741781629, 2.6047205243791853, 73.10223273203695, 55.825936687053144, 107.65482482200457, 45827183.0, 0.2209138624121845, '2026-02-03 16:47:58.359631', 'WMT')
2026-02-04 00:47:58,722 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:47:58,723 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:47:58,723 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:47:58,723 - sqlalchemy.engine.Engine - INFO - [cached since 87.52s ago] ('WMT',)
2026-02-04 00:47:59,725 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:47:59,726 - sqlalchemy.engine.Engine - INFO - [cached since 88.51s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:47:59,729 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=18825.63ms
2026-02-04 00:47:59,730 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:49:37,075 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:49:37,078 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:49:37,078 - sqlalchemy.engine.Engine - INFO - [cached since 187.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:49:37,081 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:49:37,081 - sqlalchemy.engine.Engine - INFO - [cached since 187.2s ago] ('SNDK',)
2026-02-04 00:49:37,571 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 00:49:37,571 - sqlalchemy.engine.Engine - INFO - [cached since 186.4s ago] ('SNDK',)
2026-02-04 00:49:37,576 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET sector=?, industry=?, market_cap=?, forward_pe=?, eps=?, fifty_two_week_high=?, fifty_two_week_low=? WHERE stocks.ticker = ?
2026-02-04 00:49:37,576 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('Technology', 'Computer Hardware', 98929098752.0, 9.097949, -7.45, 725.0, 27.885, 'SNDK')
2026-02-04 00:49:37,578 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, market_status=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 00:49:37,578 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (670.4001, 0.7759308, 90.09917882473128, 463.3810012817383, 321.1844006347656, 141.5870253944397, 88.18015322451242, 70.26549768038541, 17.914655544127015, 658.5255134027632, 463.3810012817383, 268.2364891607134, 54.16193062918527, 83.37000699022366, 84.4542948342731, 81.20143130212477, 19038267.1, 0.9269825823590845, <MarketStatus.OPEN: 'OPEN'>, '2026-02-03 16:49:37.081700', 'SNDK')
2026-02-04 00:49:37,579 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 00:49:37,580 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:49:37,580 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 00:49:37,580 - sqlalchemy.engine.Engine - INFO - [cached since 186.4s ago] ('SNDK',)
2026-02-04 00:49:37,581 - api_logger - INFO - rid=/api/portfolio/SNDK/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=513.20ms
2026-02-04 00:49:37,582 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 00:49:37,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 00:49:37,596 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 00:49:37,596 - sqlalchemy.engine.Engine - INFO - [cached since 187.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:49:37,597 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 00:49:37,597 - sqlalchemy.engine.Engine - INFO - [cached since 186.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 00:49:37,600 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.81ms
2026-02-04 00:49:37,600 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 10:12:32,455 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:32,461 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:12:32,462 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:32,466 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 10:12:32,467 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:32,476 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=63.78ms
2026-02-04 10:12:32,477 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 10:12:42,384 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:42,385 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:12:42,385 - sqlalchemy.engine.Engine - INFO - [cached since 9.924s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:42,388 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 10:12:42,389 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'IREN')
2026-02-04 10:12:42,399 - sqlalchemy.engine.Engine - INFO - DELETE FROM portfolios WHERE portfolios.id = ?
2026-02-04 10:12:42,399 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('ef119cfa-5148-4cb2-9a04-8945a30f0156',)
2026-02-04 10:12:42,401 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 10:12:42,408 - api_logger - INFO - rid=/api/portfolio/IREN method=DELETE status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=27.61ms
2026-02-04 10:12:42,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:42,419 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:12:42,419 - sqlalchemy.engine.Engine - INFO - [cached since 9.958s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:42,421 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 10:12:42,421 - sqlalchemy.engine.Engine - INFO - [cached since 9.954s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:42,423 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.37ms
2026-02-04 10:12:42,424 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 10:12:45,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:45,566 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:12:45,566 - sqlalchemy.engine.Engine - INFO - [cached since 13.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:45,568 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 10:12:45,568 - sqlalchemy.engine.Engine - INFO - [cached since 3.18s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'BRK.B')
2026-02-04 10:12:45,570 - sqlalchemy.engine.Engine - INFO - DELETE FROM portfolios WHERE portfolios.id = ?
2026-02-04 10:12:45,570 - sqlalchemy.engine.Engine - INFO - [cached since 3.171s ago] ('0517085c-bfb6-4e32-a14c-7daeadc61545',)
2026-02-04 10:12:45,571 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 10:12:45,573 - api_logger - INFO - rid=/api/portfolio/BRK.B method=DELETE status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.22ms
2026-02-04 10:12:45,582 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:45,582 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:12:45,582 - sqlalchemy.engine.Engine - INFO - [cached since 13.12s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:45,585 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 10:12:45,585 - sqlalchemy.engine.Engine - INFO - [cached since 13.12s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:45,588 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.89ms
2026-02-04 10:12:45,588 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 10:12:58,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:58,028 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:12:58,028 - sqlalchemy.engine.Engine - INFO - [cached since 25.57s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:58,031 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 10:12:58,031 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('AMD',)
2026-02-04 10:12:59,320 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 10:12:59,320 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('AMD',)
2026-02-04 10:12:59,324 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=? WHERE stocks.ticker = ?
2026-02-04 10:12:59,324 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] (394165157888.0, 126.09896, 36.64003, 'AMD')
2026-02-04 10:12:59,327 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 10:12:59,327 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] (242.11, -1.6892, 63.51316475060508, 233.63649978637696, 221.94559967041016, 177.32649974823, 7.9109600074873185, 7.752250653350175, 0.1587093541371436, 270.94996493981415, 233.63649978637696, 196.32303463293977, 12.859452383858818, 40.72458836374426, 54.82028583808427, 12.533193415064247, 38430194.6, 1.0676472608858452, '2026-02-04 02:12:58.032853', 'AMD')
2026-02-04 10:12:59,329 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 10:12:59,331 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:59,334 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 10:12:59,334 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('AMD',)
2026-02-04 10:12:59,335 - api_logger - INFO - rid=/api/portfolio/AMD/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1310.85ms
2026-02-04 10:12:59,336 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 10:12:59,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:12:59,345 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:12:59,345 - sqlalchemy.engine.Engine - INFO - [cached since 26.88s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:59,347 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 10:12:59,347 - sqlalchemy.engine.Engine - INFO - [cached since 26.88s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:12:59,350 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.99ms
2026-02-04 10:12:59,350 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 10:13:09,496 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:13:09,496 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:13:09,496 - sqlalchemy.engine.Engine - INFO - [cached since 37.04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:13:09,497 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 10:13:09,497 - sqlalchemy.engine.Engine - INFO - [cached since 11.47s ago] ('AMD',)
2026-02-04 10:13:10,070 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 10:13:10,070 - sqlalchemy.engine.Engine - INFO - [cached since 10.75s ago] ('AMD',)
2026-02-04 10:13:10,074 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 10:13:10,074 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('2026-02-04 02:13:09.498006', 'AMD')
2026-02-04 10:13:10,076 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 10:13:10,079 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:13:10,079 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 10:13:10,079 - sqlalchemy.engine.Engine - INFO - [cached since 10.75s ago] ('AMD',)
2026-02-04 10:13:10,081 - api_logger - INFO - rid=/api/portfolio/AMD/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=585.22ms
2026-02-04 10:13:10,082 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 10:13:10,090 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 10:13:10,091 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 10:13:10,091 - sqlalchemy.engine.Engine - INFO - [cached since 37.63s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:13:10,092 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 10:13:10,093 - sqlalchemy.engine.Engine - INFO - [cached since 37.63s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 10:13:10,095 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.45ms
2026-02-04 10:13:10,095 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:09,343 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:09,356 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 13:24:09,356 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('%S%', '%S%', 10, 0)
2026-02-04 13:24:09,360 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=41.54ms
2026-02-04 13:24:09,361 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:09,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:09,400 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 13:24:09,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.04455s ago] ('%S L%', '%S L%', 10, 0)
2026-02-04 13:24:09,401 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1.52ms
2026-02-04 13:24:09,401 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:09,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:09,599 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 13:24:09,599 - sqlalchemy.engine.Engine - INFO - [cached since 0.2436s ago] ('%S L%', '%S L%', 10, 0)
2026-02-04 13:24:09,601 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.74ms
2026-02-04 13:24:09,602 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:09,803 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:09,803 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 13:24:09,804 - sqlalchemy.engine.Engine - INFO - [cached since 0.4478s ago] ('%S L%', '%S L%', 10, 0)
2026-02-04 13:24:09,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:09,823 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 13:24:09,824 - sqlalchemy.engine.Engine - INFO - [cached since 0.4679s ago] ('%SLV%', '%SLV%', 10, 0)
2026-02-04 13:24:09,827 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.07ms
2026-02-04 13:24:09,827 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:11,191 - yfinance - ERROR - HTTP Error 404: {"quoteSummary":{"result":null,"error":{"code":"Not Found","description":"Quote not found for symbol: S L"}}}
2026-02-04 13:24:11,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:11,528 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 13:24:11,529 - sqlalchemy.engine.Engine - INFO - [cached since 2.173s ago] ('%SLV%', '%SLV%', 10, 0)
2026-02-04 13:24:11,552 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1751.42ms
2026-02-04 13:24:11,553 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:12,333 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 13:24:12,333 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('SLV',)
2026-02-04 13:24:12,339 - sqlalchemy.engine.Engine - INFO - INSERT INTO stocks (ticker, name, sector, industry, market_cap, pe_ratio, forward_pe, eps, dividend_yield, beta, fifty_two_week_high, fifty_two_week_low, exchange, currency) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 13:24:12,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('SLV', 'iShares Silver Trust', None, None, None, None, None, None, None, None, None, None, None, 'USD')
2026-02-04 13:24:12,343 - sqlalchemy.engine.Engine - INFO - INSERT INTO market_data_cache (ticker, current_price, change_percent, rsi_14, ma_20, ma_50, ma_200, macd_val, macd_signal, macd_hist, bb_upper, bb_middle, bb_lower, atr_14, k_line, d_line, j_line, volume_ma_20, volume_ratio, market_status, last_updated) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 13:24:12,343 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('SLV', 76.96, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, 'CLOSED', '2026-02-04 05:24:12.343262')
2026-02-04 13:24:12,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 13:24:12,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:12,346 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-04 13:24:12,346 - sqlalchemy.engine.Engine - INFO - [cached since 2.99s ago] ('%SLV%', '%SLV%', 10, 0)
2026-02-04 13:24:12,347 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=820.09ms
2026-02-04 13:24:12,348 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:33,591 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:33,593 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:33,593 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:33,595 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 13:24:33,596 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SLV')
2026-02-04 13:24:33,599 - sqlalchemy.engine.Engine - INFO - INSERT INTO portfolios (id, user_id, ticker, quantity, avg_cost, target_price, stop_loss_price, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 13:24:33,599 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('50b62451-dc6f-4020-bbf2-6aff75fbaea6', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'SLV', 0.0, 0.0, None, None, '2026-02-04 05:24:33.599404', '2026-02-04 05:24:33.599414')
2026-02-04 13:24:33,601 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 13:24:33,603 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:33,604 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:33,605 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('SLV',)
2026-02-04 13:24:33,607 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:33,607 - sqlalchemy.engine.Engine - INFO - [cached since 0.003069s ago] ('SLV',)
2026-02-04 13:24:33,608 - api_logger - INFO - rid=/api/portfolio/ method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=20.16ms
2026-02-04 13:24:33,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:33,616 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:33,616 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:33,616 - sqlalchemy.engine.Engine - INFO - [cached since 0.02351s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:33,618 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 13:24:33,618 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:33,621 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.46ms
2026-02-04 13:24:33,621 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:39,354 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:39,354 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:39,354 - sqlalchemy.engine.Engine - INFO - [cached since 5.762s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:39,356 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:39,356 - sqlalchemy.engine.Engine - INFO - [cached since 5.752s ago] ('TSLA',)
2026-02-04 13:24:40,176 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 13:24:40,176 - sqlalchemy.engine.Engine - INFO - [cached since 27.84s ago] ('TSLA',)
2026-02-04 13:24:40,179 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=? WHERE stocks.ticker = ?
2026-02-04 13:24:40,180 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] (1583376105472.0, 383.59998, 145.23851, 'TSLA')
2026-02-04 13:24:40,182 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 13:24:40,182 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (421.96, 0.0130344, 38.985851060458, 434.7009994506836, 444.34800109863284, 378.9632501983643, -6.756939990591604, -5.2095357269278475, -1.5474042636637568, 454.6777697731721, 434.7009994506836, 414.7242291281951, 14.829999651227679, 27.57741318929539, 34.740871617734854, 13.250496332416475, 61851570.0, 0.9175595704361263, '2026-02-04 05:24:39.358625', 'TSLA')
2026-02-04 13:24:40,183 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 13:24:40,186 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:40,189 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:40,189 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('TSLA',)
2026-02-04 13:24:40,190 - api_logger - INFO - rid=/api/portfolio/TSLA/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=840.44ms
2026-02-04 13:24:40,191 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:40,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:40,199 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:40,199 - sqlalchemy.engine.Engine - INFO - [cached since 6.607s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:40,200 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 13:24:40,200 - sqlalchemy.engine.Engine - INFO - [cached since 6.582s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:40,205 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.95ms
2026-02-04 13:24:40,206 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:44,414 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:44,415 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:44,415 - sqlalchemy.engine.Engine - INFO - [cached since 10.82s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:44,416 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:44,417 - sqlalchemy.engine.Engine - INFO - [cached since 10.81s ago] ('SLV',)
2026-02-04 13:24:44,830 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 13:24:44,830 - sqlalchemy.engine.Engine - INFO - [cached since 32.5s ago] ('SLV',)
2026-02-04 13:24:44,832 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, fifty_two_week_high=?, fifty_two_week_low=? WHERE stocks.ticker = ?
2026-02-04 13:24:44,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] (26277990400.0, 109.83, 26.57, 'SLV')
2026-02-04 13:24:44,834 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, market_status=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 13:24:44,834 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (6.23964, 48.901099238164726, 83.84099922180175, 67.92299964904785, 44.32224988937378, 5.215703345708121, 7.541513027805435, -2.325809682097314, 106.75389489960835, 83.84099922180175, 60.92810354399515, 8.957856859479632, 37.54425616139929, 58.22902025375872, -3.8252720233195703, 175141705.0, 0.9947567885101952, <MarketStatus.OPEN: 'OPEN'>, '2026-02-04 05:24:44.418199', 'SLV')
2026-02-04 13:24:44,834 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 13:24:44,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:44,837 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:44,837 - sqlalchemy.engine.Engine - INFO - [cached since 4.648s ago] ('SLV',)
2026-02-04 13:24:44,838 - api_logger - INFO - rid=/api/portfolio/SLV/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=425.41ms
2026-02-04 13:24:44,839 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:44,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:44,846 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:44,846 - sqlalchemy.engine.Engine - INFO - [cached since 11.25s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:44,847 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 13:24:44,847 - sqlalchemy.engine.Engine - INFO - [cached since 11.23s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:44,849 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.13ms
2026-02-04 13:24:44,850 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:47,244 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:47,245 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:47,245 - sqlalchemy.engine.Engine - INFO - [cached since 13.65s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:47,247 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:47,248 - sqlalchemy.engine.Engine - INFO - [cached since 13.64s ago] ('SLV',)
2026-02-04 13:24:47,605 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 13:24:47,605 - sqlalchemy.engine.Engine - INFO - [cached since 35.27s ago] ('SLV',)
2026-02-04 13:24:47,608 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 13:24:47,608 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('2026-02-04 05:24:47.249241', 'SLV')
2026-02-04 13:24:47,609 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 13:24:47,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:47,612 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 13:24:47,612 - sqlalchemy.engine.Engine - INFO - [cached since 7.424s ago] ('SLV',)
2026-02-04 13:24:47,614 - api_logger - INFO - rid=/api/portfolio/SLV/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=372.12ms
2026-02-04 13:24:47,615 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 13:24:47,623 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 13:24:47,624 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 13:24:47,624 - sqlalchemy.engine.Engine - INFO - [cached since 14.03s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:47,625 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 13:24:47,625 - sqlalchemy.engine.Engine - INFO - [cached since 14.01s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 13:24:47,628 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.09ms
2026-02-04 13:24:47,630 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:11:44,093 - api_logger - INFO - rid=/health method=GET status_code=200 user_id=anonymous time=0.84ms
2026-02-04 15:13:14,760 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:14,767 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-04 15:13:14,768 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('test@qq.com',)
2026-02-04 15:13:14,975 - api_logger - INFO - rid=/api/auth/login method=POST status_code=200 user_id=anonymous time=219.97ms
2026-02-04 15:13:14,975 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:13:15,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:15,103 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:13:15,103 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:15,105 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:13:15,106 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:15,108 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.27ms
2026-02-04 15:13:15,109 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:13:15,112 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:15,112 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:13:15,112 - sqlalchemy.engine.Engine - INFO - [cached since 0.009409s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:15,113 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:13:15,113 - sqlalchemy.engine.Engine - INFO - [cached since 0.007594s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:15,115 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.39ms
2026-02-04 15:13:15,116 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:13:33,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:33,842 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:13:33,842 - sqlalchemy.engine.Engine - INFO - [cached since 18.74s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:33,845 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 15:13:33,845 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('RKLB',)
2026-02-04 15:13:35,052 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 15:13:35,052 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('RKLB',)
2026-02-04 15:13:35,054 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, forward_pe=? WHERE stocks.ticker = ?
2026-02-04 15:13:35,054 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] (43410882560.0, -520.9615, 'RKLB')
2026-02-04 15:13:35,056 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 15:13:35,056 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (81.27, 9.60215, 45.53105071319626, 86.12300109863281, 68.93250045776367, 48.69662506103516, 2.675119398231587, 4.937373559769624, -2.2622541615380376, 95.7621114681288, 86.12300109863281, 76.48389072913683, 7.691499437604632, 23.975860402560407, 27.761536312894865, 16.404508581891484, 25240300.0, 0.7506963070961914, '2026-02-04 07:13:33.846991', 'RKLB')
2026-02-04 15:13:35,057 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 15:13:35,059 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:35,060 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 15:13:35,060 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('RKLB',)
2026-02-04 15:13:35,061 - api_logger - INFO - rid=/api/portfolio/RKLB/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1222.61ms
2026-02-04 15:13:35,062 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:13:35,069 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:35,069 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:13:35,069 - sqlalchemy.engine.Engine - INFO - [cached since 19.97s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:35,070 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:13:35,070 - sqlalchemy.engine.Engine - INFO - [cached since 19.96s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:35,072 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.62ms
2026-02-04 15:13:35,073 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:13:39,729 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:39,729 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:13:39,729 - sqlalchemy.engine.Engine - INFO - [cached since 24.63s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:39,731 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 15:13:39,731 - sqlalchemy.engine.Engine - INFO - [cached since 5.886s ago] ('PG',)
2026-02-04 15:13:40,417 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 15:13:40,418 - sqlalchemy.engine.Engine - INFO - [cached since 5.367s ago] ('PG',)
2026-02-04 15:13:40,421 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, dividend_yield=? WHERE stocks.ticker = ?
2026-02-04 15:13:40,422 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] (362941448192.0, 22.976332, 21.223364, 2.72, 'PG')
2026-02-04 15:13:40,423 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 15:13:40,423 - sqlalchemy.engine.Engine - INFO - [cached since 5.367s ago] (155.32, 1.39043, 76.0731406350309, 146.04354019165038, 144.57608764648438, 151.7821150970459, 2.5837803418685326, 1.586473676083925, 0.9973066657846075, 155.79496180694696, 146.04354019165038, 136.2921185763538, 2.6546578177697637, 86.3001733728906, 82.04496914992173, 94.81058181882835, 12185330.0, 1.0192337835741831, '2026-02-04 07:13:39.732265', 'PG')
2026-02-04 15:13:40,424 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 15:13:40,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:40,427 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 15:13:40,427 - sqlalchemy.engine.Engine - INFO - [cached since 5.367s ago] ('PG',)
2026-02-04 15:13:40,429 - api_logger - INFO - rid=/api/portfolio/PG/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=700.87ms
2026-02-04 15:13:40,430 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:13:40,440 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:13:40,440 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:13:40,440 - sqlalchemy.engine.Engine - INFO - [cached since 25.34s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:40,441 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:13:40,442 - sqlalchemy.engine.Engine - INFO - [cached since 25.34s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:13:40,444 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.94ms
2026-02-04 15:13:40,445 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:24:58,387 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:24:58,387 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:24:58,387 - sqlalchemy.engine.Engine - INFO - [cached since 703.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:24:58,388 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:24:58,416 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:24:58,416 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:24:58,416 - sqlalchemy.engine.Engine - INFO - [cached since 703.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:24:58,417 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:25:08,623 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:25:08,623 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:25:08,623 - sqlalchemy.engine.Engine - INFO - [cached since 713.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:25:08,624 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:30:51,032 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:30:51,035 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:30:51,035 - sqlalchemy.engine.Engine - INFO - [cached since 1056s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:30:51,039 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:51:19,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:19,766 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:19,766 - sqlalchemy.engine.Engine - INFO - [cached since 2285s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:19,769 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:51:19,770 - sqlalchemy.engine.Engine - INFO - [cached since 2285s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:19,774 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.71ms
2026-02-04 15:51:19,774 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:51:19,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:19,776 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:19,776 - sqlalchemy.engine.Engine - INFO - [cached since 2285s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:19,777 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:51:19,777 - sqlalchemy.engine.Engine - INFO - [cached since 2285s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:19,778 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.78ms
2026-02-04 15:51:19,779 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:51:22,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:22,083 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:22,083 - sqlalchemy.engine.Engine - INFO - [cached since 2287s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:22,083 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:51:22,086 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:22,086 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:22,086 - sqlalchemy.engine.Engine - INFO - [cached since 2287s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:22,086 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:51:26,238 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:26,239 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:26,239 - sqlalchemy.engine.Engine - INFO - [cached since 2291s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:26,239 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 15:51:26,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:26,241 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:26,241 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:26,241 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:51:50,077 - api_logger - INFO - rid=/docs method=HEAD status_code=200 user_id=anonymous time=0.33ms
2026-02-04 15:51:57,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:57,428 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:57,428 - sqlalchemy.engine.Engine - INFO - [cached since 2322s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:57,436 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 15:51:57,437 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:51:57,438 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:51:57,438 - sqlalchemy.engine.Engine - INFO - [cached since 31.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:51:57,442 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:52:00,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:52:00,210 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:52:00,210 - sqlalchemy.engine.Engine - INFO - [cached since 2325s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:00,211 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 15:52:00,211 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:52:00,211 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:52:00,211 - sqlalchemy.engine.Engine - INFO - [cached since 33.97s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:00,212 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:52:16,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:52:16,854 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:52:16,854 - sqlalchemy.engine.Engine - INFO - [cached since 2342s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:16,857 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 15:52:16,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:52:16,858 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:52:16,858 - sqlalchemy.engine.Engine - INFO - [cached since 50.62s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:16,858 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:52:19,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:52:19,937 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:52:19,937 - sqlalchemy.engine.Engine - INFO - [cached since 2345s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:19,938 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:52:19,939 - sqlalchemy.engine.Engine - INFO - [cached since 2345s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:19,942 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.66ms
2026-02-04 15:52:19,943 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:52:19,945 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:52:19,945 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.preferred_data_source, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:52:19,945 - sqlalchemy.engine.Engine - INFO - [cached since 2345s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:19,947 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 15:52:19,948 - sqlalchemy.engine.Engine - INFO - [cached since 2345s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:52:19,951 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.07ms
2026-02-04 15:52:19,952 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:53:35,986 - api_logger - INFO - rid=/api/user/me method=GET status_code=401 user_id=anonymous time=1.95ms
2026-02-04 15:55:31,239 - api_logger - INFO - rid=/api/user/me method=GET status_code=401 user_id=anonymous time=1.24ms
2026-02-04 15:56:11,381 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:56:11,390 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:56:11,390 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:56:11,391 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=31.25ms
2026-02-04 15:56:11,391 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:56:11,394 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:56:11,395 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:56:11,396 - sqlalchemy.engine.Engine - INFO - [cached since 0.005964s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:56:11,401 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.90ms
2026-02-04 15:56:11,405 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:56:12,654 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:56:12,654 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:56:12,654 - sqlalchemy.engine.Engine - INFO - [cached since 1.264s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:56:12,655 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.10ms
2026-02-04 15:56:12,655 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:56:27,641 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:56:27,642 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:56:27,642 - sqlalchemy.engine.Engine - INFO - [cached since 16.25s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:56:27,646 - sqlalchemy.engine.Engine - INFO - UPDATE users SET preferred_ai_model=? WHERE users.id = ?
2026-02-04 15:56:27,646 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('qwen-3-vl-thinking', '9fe069c3-5985-4d2a-8814-91898152fc4a')
2026-02-04 15:56:27,649 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 15:56:27,651 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:56:27,653 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:56:27,653 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:56:27,654 - api_logger - INFO - rid=/api/user/settings method=PUT status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=17.56ms
2026-02-04 15:56:27,655 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 15:56:27,669 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 15:56:27,669 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 15:56:27,669 - sqlalchemy.engine.Engine - INFO - [cached since 16.28s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 15:56:27,670 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.56ms
2026-02-04 15:56:27,670 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:30:02,677 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:30:02,678 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:30:02,678 - sqlalchemy.engine.Engine - INFO - [cached since 2600s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:30:02,685 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 17:30:02,685 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:30:02,692 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=32.05ms
2026-02-04 17:30:02,692 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:30:02,695 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:30:02,696 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:30:02,696 - sqlalchemy.engine.Engine - INFO - [cached since 2600s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:30:02,697 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 17:30:02,697 - sqlalchemy.engine.Engine - INFO - [cached since 0.01207s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:30:02,699 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.05ms
2026-02-04 17:30:02,699 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:30:04,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:30:04,599 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:30:04,599 - sqlalchemy.engine.Engine - INFO - [cached since 2602s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:30:04,601 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:30:04,601 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] ('AAPL',)
2026-02-04 17:30:05,816 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 17:30:05,816 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('AAPL',)
2026-02-04 17:30:05,819 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, pe_ratio=?, forward_pe=?, eps=? WHERE stocks.ticker = ?
2026-02-04 17:30:05,820 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] (3960797134848.0, 34.111393, 29.032974, 7.9, 'AAPL')
2026-02-04 17:30:05,822 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 17:30:05,822 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] (269.48, -0.175946, 59.92467971633815, 257.710498046875, 268.36499877929685, 237.1007225036621, -1.1592349190868845, -3.453628120329124, 2.2943932012422397, 270.39885390520396, 257.710498046875, 245.022142188546, 6.397148132324219, 84.30394396914471, 71.41640888173549, 110.07901414396315, 54739250.0, 1.1753832944368072, '2026-02-04 09:30:04.602326', 'AAPL')
2026-02-04 17:30:05,823 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:30:05,825 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:30:05,826 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:30:05,826 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('AAPL',)
2026-02-04 17:30:05,828 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-04 17:30:05,828 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('AAPL', 5, 0)
2026-02-04 17:30:05,830 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 17:30:05,830 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL')
2026-02-04 17:30:05,832 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:30:05,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:30:21,592 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 17:30:21,601 - sqlalchemy.engine.Engine - INFO - INSERT INTO analysis_reports (id, user_id, ticker, input_context_snapshot, ai_response_markdown, sentiment_score, model_used, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 17:30:21,601 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('ed8e0c09-7082-4054-9d2b-6ee01b21677b', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', '{"market_data": {"current_price": 269.48, "change_percent": -0.175946, "rsi_14": 59.92467971633815, "ma_20": 257.710498046875, "ma_50": 268.364998779 ... (224 characters truncated) ... rket_status": "OPEN"}, "portfolio_data": {"avg_cost": 200.0, "quantity": 100.0, "unrealized_pl": 6948.000000000002, "pl_percent": 34.74000000000001}}', '{\n    "technical_analysis": "269.48270.3988RSI 59.92MACDKDJK84.3050 ... (231 characters truncated) ... 20034.74%694830%3027070%255RSI70250"\n}', None, 'qwen-3-vl-thinking', '2026-02-04 09:30:21.601442')
2026-02-04 17:30:21,605 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:30:21,608 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:30:21,610 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.id = ?
2026-02-04 17:30:21,610 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('ed8e0c09-7082-4054-9d2b-6ee01b21677b',)
2026-02-04 17:30:21,611 - api_logger - INFO - rid=/api/analysis/AAPL method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=17018.96ms
2026-02-04 17:30:21,612 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:31:32,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:31:32,115 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:31:32,115 - sqlalchemy.engine.Engine - INFO - [cached since 2690s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:31:32,119 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 17:31:32,119 - sqlalchemy.engine.Engine - INFO - [cached since 86.29s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK')
2026-02-04 17:31:32,124 - sqlalchemy.engine.Engine - INFO - UPDATE portfolios SET quantity=?, avg_cost=?, updated_at=? WHERE portfolios.id = ?
2026-02-04 17:31:32,125 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (5.0, 480.0, '2026-02-04 09:31:32.124543', '57416cd4-f97b-4ac4-ab32-aaf9ad8218bd')
2026-02-04 17:31:32,127 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:31:32,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:31:32,129 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:31:32,129 - sqlalchemy.engine.Engine - INFO - [cached since 87.53s ago] ('SNDK',)
2026-02-04 17:31:32,130 - api_logger - INFO - rid=/api/portfolio/ method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=21.10ms
2026-02-04 17:31:32,131 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:31:32,139 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:31:32,140 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:31:32,140 - sqlalchemy.engine.Engine - INFO - [cached since 2690s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:31:32,140 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 17:31:32,141 - sqlalchemy.engine.Engine - INFO - [cached since 89.46s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:31:32,142 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.48ms
2026-02-04 17:31:32,143 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:31:40,108 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:31:40,109 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:31:40,109 - sqlalchemy.engine.Engine - INFO - [cached since 2698s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:31:40,112 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:31:40,112 - sqlalchemy.engine.Engine - INFO - [cached since 95.51s ago] ('SNDK',)
2026-02-04 17:31:41,230 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 17:31:41,231 - sqlalchemy.engine.Engine - INFO - [cached since 95.42s ago] ('SNDK',)
2026-02-04 17:31:41,235 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, forward_pe=?, eps=? WHERE stocks.ticker = ?
2026-02-04 17:31:41,235 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] (102634496000.0, 9.438714, -7.44, 'SNDK')
2026-02-04 17:31:41,238 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 17:31:41,238 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] (695.51, 4.55024, 90.76217109862455, 464.6364974975586, 321.68659912109376, 141.71257501602173, 90.18322411015168, 70.66611185751326, 19.517112252638427, 665.6245871458533, 464.6364974975586, 263.6484078492639, 86.46232396547296, 85.48506715935619, 88.41683757770653, 19729255.0, 1.5715646637442722, '2026-02-04 09:31:40.113146', 'SNDK')
2026-02-04 17:31:41,239 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:31:41,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:31:41,241 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:31:41,241 - sqlalchemy.engine.Engine - INFO - [cached since 95.42s ago] ('SNDK',)
2026-02-04 17:31:41,242 - api_logger - INFO - rid=/api/portfolio/SNDK/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1139.92ms
2026-02-04 17:31:41,242 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:31:41,253 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:31:41,253 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:31:41,253 - sqlalchemy.engine.Engine - INFO - [cached since 2699s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:31:41,255 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 17:31:41,255 - sqlalchemy.engine.Engine - INFO - [cached since 98.57s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:31:41,257 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.36ms
2026-02-04 17:31:41,258 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:31:45,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:31:45,807 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:31:45,807 - sqlalchemy.engine.Engine - INFO - [cached since 2703s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:31:45,809 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:31:45,810 - sqlalchemy.engine.Engine - INFO - [cached since 101.2s ago] ('SNDK',)
2026-02-04 17:31:45,811 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-04 17:31:45,812 - sqlalchemy.engine.Engine - INFO - [cached since 99.98s ago] ('SNDK', 5, 0)
2026-02-04 17:31:45,814 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 17:31:45,814 - sqlalchemy.engine.Engine - INFO - [cached since 99.98s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK')
2026-02-04 17:31:45,815 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:31:45,815 - sqlalchemy.engine.Engine - INFO - [cached since 99.98s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:32:01,257 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 17:32:01,263 - sqlalchemy.engine.Engine - INFO - INSERT INTO analysis_reports (id, user_id, ticker, input_context_snapshot, ai_response_markdown, sentiment_score, model_used, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 17:32:01,263 - sqlalchemy.engine.Engine - INFO - [cached since 99.66s ago] ('78a43e35-e76e-4e9e-8e4f-da9c264c23a0', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK', '{"market_data": {"current_price": 695.51, "change_percent": 4.55024, "rsi_14": 90.76217109862455, "ma_20": 464.6364974975586, "ma_50": 321.6865991210 ... (210 characters truncated) ... 2918527, "market_status": "OPEN"}, "portfolio_data": {"avg_cost": 480.0, "quantity": 5.0, "unrealized_pl": 1077.55, "pl_percent": 44.89791666666667}}', '{\n    "technical_analysis": "$695.51665.62RSI90.76MACD19.52KDJK86.46ATR54.16 ... (242 characters truncated) ... 60%$670$48041%$670RSI60"\n}', None, 'qwen-3-vl-thinking', '2026-02-04 09:32:01.263542')
2026-02-04 17:32:01,266 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:32:01,269 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:32:01,269 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.id = ?
2026-02-04 17:32:01,270 - sqlalchemy.engine.Engine - INFO - [cached since 99.66s ago] ('78a43e35-e76e-4e9e-8e4f-da9c264c23a0',)
2026-02-04 17:32:01,275 - api_logger - INFO - rid=/api/analysis/SNDK method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=15470.42ms
2026-02-04 17:32:01,276 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:33:46,876 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:33:46,877 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:33:46,877 - sqlalchemy.engine.Engine - INFO - [cached since 2824s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:33:46,879 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 17:33:46,879 - sqlalchemy.engine.Engine - INFO - [cached since 224.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:33:46,881 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=21.41ms
2026-02-04 17:33:46,882 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:36:37,241 - api_logger - INFO - rid=/api/analysis/AAPL method=GET status_code=401 user_id=anonymous time=3.69ms
2026-02-04 17:37:10,100 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:10,110 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:10,110 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:10,110 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:10,110 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:10,110 - sqlalchemy.engine.Engine - INFO - [cached since 0.0006019s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:10,112 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:10,112 - sqlalchemy.engine.Engine - INFO - [generated in 0.00008s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:10,113 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 17:37:10,113 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:10,114 - api_logger - INFO - rid=/api/analysis/SNDK method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=16.37ms
2026-02-04 17:37:10,114 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:10,116 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=42.09ms
2026-02-04 17:37:10,117 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:36,586 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:36,587 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:36,587 - sqlalchemy.engine.Engine - INFO - [cached since 26.48s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:36,589 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:36,589 - sqlalchemy.engine.Engine - INFO - [cached since 26.48s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:36,590 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:36,590 - api_logger - INFO - rid=/api/analysis/FRO method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.30ms
2026-02-04 17:37:36,615 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:36,615 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:36,615 - sqlalchemy.engine.Engine - INFO - [cached since 26.51s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:36,616 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:36,616 - sqlalchemy.engine.Engine - INFO - [cached since 26.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'SNDK', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:36,616 - api_logger - INFO - rid=/api/analysis/SNDK method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.19ms
2026-02-04 17:37:36,617 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:36,681 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:36,681 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:36,681 - sqlalchemy.engine.Engine - INFO - [cached since 26.57s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:36,682 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:36,682 - sqlalchemy.engine.Engine - INFO - [cached since 26.57s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:36,683 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:36,683 - api_logger - INFO - rid=/api/analysis/FRO method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.49ms
2026-02-04 17:37:37,475 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:37,475 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:37,475 - sqlalchemy.engine.Engine - INFO - [cached since 27.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:37,477 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:37,477 - sqlalchemy.engine.Engine - INFO - [cached since 27.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'ASTS', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:37,478 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:37,478 - api_logger - INFO - rid=/api/analysis/ASTS method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.87ms
2026-02-04 17:37:37,483 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:37,483 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:37,483 - sqlalchemy.engine.Engine - INFO - [cached since 27.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:37,484 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:37,484 - sqlalchemy.engine.Engine - INFO - [cached since 27.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:37,485 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:37,485 - api_logger - INFO - rid=/api/analysis/FRO method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.24ms
2026-02-04 17:37:37,510 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:37,510 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:37,510 - sqlalchemy.engine.Engine - INFO - [cached since 27.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:37,511 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:37,512 - sqlalchemy.engine.Engine - INFO - [cached since 27.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'ASTS', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:37,512 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:37,513 - api_logger - INFO - rid=/api/analysis/ASTS method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.72ms
2026-02-04 17:37:45,025 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:45,026 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:45,026 - sqlalchemy.engine.Engine - INFO - [cached since 34.92s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:45,028 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:37:45,029 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('ASTS',)
2026-02-04 17:37:46,284 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 17:37:46,284 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('ASTS',)
2026-02-04 17:37:46,291 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=?, forward_pe=?, eps=? WHERE stocks.ticker = ?
2026-02-04 17:37:46,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] (42530377728.0, -113.937004, -1.13, 'ASTS')
2026-02-04 17:37:46,294 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, change_percent=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 17:37:46,294 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] (115.76, 10.7221, 60.88435533519565, 105.58199996948242, 83.91839981079102, 57.33144978523254, 8.731190171461122, 9.29386815512495, -0.5626779836638267, 126.67821996504324, 105.58199996948242, 84.48577997392161, 12.764786311558314, 51.209092043721185, 61.47546705495088, 30.676342021261803, 17378490.0, 0.8966083934795256, '2026-02-04 09:37:45.029810', 'ASTS')
2026-02-04 17:37:46,295 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:37:46,297 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:46,299 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:37:46,299 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('ASTS',)
2026-02-04 17:37:46,301 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:46,301 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('ASTS', 5, 0)
2026-02-04 17:37:46,302 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-04 17:37:46,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'ASTS')
2026-02-04 17:37:46,304 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-04 17:37:46,304 - sqlalchemy.engine.Engine - INFO - [cached since 36.19s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'ASTS', 'qwen-3-vl-thinking', 1, 0)
2026-02-04 17:37:47,966 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:47,966 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:47,966 - sqlalchemy.engine.Engine - INFO - [cached since 37.86s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:47,968 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:37:47,969 - sqlalchemy.engine.Engine - INFO - [cached since 2.94s ago] ('ASTS',)
2026-02-04 17:37:48,462 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-04 17:37:48,463 - sqlalchemy.engine.Engine - INFO - [cached since 2.179s ago] ('ASTS',)
2026-02-04 17:37:48,465 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET last_updated=? WHERE market_data_cache.ticker = ?
2026-02-04 17:37:48,465 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('2026-02-04 09:37:47.971208', 'ASTS')
2026-02-04 17:37:48,466 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:37:48,469 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:48,471 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-04 17:37:48,471 - sqlalchemy.engine.Engine - INFO - [cached since 2.172s ago] ('ASTS',)
2026-02-04 17:37:48,472 - api_logger - INFO - rid=/api/portfolio/ASTS/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=509.21ms
2026-02-04 17:37:48,473 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:37:48,481 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:37:48,481 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-04 17:37:48,481 - sqlalchemy.engine.Engine - INFO - [cached since 38.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:48,482 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-04 17:37:48,482 - sqlalchemy.engine.Engine - INFO - [cached since 38.37s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-04 17:37:48,485 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.24ms
2026-02-04 17:37:48,486 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-04 17:38:01,833 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-04 17:38:01,843 - sqlalchemy.engine.Engine - INFO - INSERT INTO analysis_reports (id, user_id, ticker, input_context_snapshot, ai_response_markdown, sentiment_score, model_used, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
2026-02-04 17:38:01,843 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ('3b009eaa-04b7-4da5-902f-bc3b275298f0', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'ASTS', '{"market_data": {"current_price": 115.76, "change_percent": 10.7221, "rsi_14": 60.88435533519565, "ma_20": 105.58199996948242, "ma_50": 83.9183998107 ... (191 characters truncated) ...  "atr_14": 12.764786311558314, "market_status": "OPEN"}, "portfolio_data": {"avg_cost": 0.0, "quantity": 0.0, "unrealized_pl": 0.0, "pl_percent": 0}}', '{\n    "technical_analysis": "115.76126.681.5%RSI 60.8870MACD ... (312 characters truncated) ... 115.76112.801.5%MACD"\n}', None, 'qwen-3-vl-thinking', '2026-02-04 09:38:01.842827')
2026-02-04 17:38:01,845 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-04 17:38:01,847 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-04 17:38:01,848 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.id = ?
2026-02-04 17:38:01,848 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('3b009eaa-04b7-4da5-902f-bc3b275298f0',)
2026-02-04 17:38:01,851 - api_logger - INFO - rid=/api/analysis/ASTS method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=16832.47ms
2026-02-04 17:38:01,851 - sqlalchemy.engine.Engine - INFO - ROLLBACK
