{"openapi": "3.1.0", "info": {"title": "AI Smart Investment Advisor", "version": "0.1.0"}, "paths": {"/api/auth/login": {"post": {"tags": ["auth"], "summary": "Login Access Token", "description": "\u7528\u6237\u767b\u5f55\u63a5\u53e3 (\u83b7\u53d6 Access Token)\n1. \u9a8c\u8bc1\u90ae\u7bb1\u548c\u5bc6\u7801\n2. \u751f\u6210 JWT Token", "operationId": "login_access_token_api_auth_login_post", "requestBody": {"content": {"application/x-www-form-urlencoded": {"schema": {"$ref": "#/components/schemas/Body_login_access_token_api_auth_login_post"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Token"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/auth/register": {"post": {"tags": ["auth"], "summary": "Register User", "description": "\u7528\u6237\u6ce8\u518c\u63a5\u53e3\n1. \u68c0\u67e5\u90ae\u7bb1\u662f\u5426\u5df2\u5b58\u5728\n2. \u521b\u5efa\u65b0\u7528\u6237\u5e76\u52a0\u5bc6\u5bc6\u7801\n3. \u81ea\u52a8\u767b\u5f55 (\u8fd4\u56de Token)", "operationId": "register_user_api_auth_register_post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserCreate"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Token"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/portfolio/search": {"get": {"tags": ["portfolio"], "summary": "Search Stocks", "operationId": "search_stocks_api_portfolio_search_get", "parameters": [{"name": "query", "in": "query", "required": false, "schema": {"type": "string", "default": "", "title": "Query"}}, {"name": "remote", "in": "query", "required": false, "schema": {"type": "boolean", "default": false, "title": "Remote"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/SearchResult"}, "title": "Response Search Stocks Api Portfolio Search Get"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/portfolio/": {"get": {"tags": ["portfolio"], "summary": "Get Portfolio", "operationId": "get_portfolio_api_portfolio__get", "security": [{"OAuth2PasswordBearer": []}], "parameters": [{"name": "refresh", "in": "query", "required": false, "schema": {"type": "boolean", "default": false, "title": "Refresh"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/PortfolioItem"}, "title": "Response Get Portfolio Api Portfolio  Get"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "post": {"tags": ["portfolio"], "summary": "Add Portfolio Item", "operationId": "add_portfolio_item_api_portfolio__post", "security": [{"OAuth2PasswordBearer": []}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/PortfolioCreate"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/portfolio/{ticker}": {"delete": {"tags": ["portfolio"], "summary": "Delete Portfolio Item", "operationId": "delete_portfolio_item_api_portfolio__ticker__delete", "security": [{"OAuth2PasswordBearer": []}], "parameters": [{"name": "ticker", "in": "path", "required": true, "schema": {"type": "string", "title": "Ticker"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/portfolio/{ticker}/refresh": {"post": {"tags": ["portfolio"], "summary": "Refresh Stock Data", "description": "\u9488\u5bf9\u5355\u4e2a\u80a1\u7968\u8fdb\u884c\u5b9e\u65f6\u6570\u636e\u5237\u65b0", "operationId": "refresh_stock_data_api_portfolio__ticker__refresh_post", "security": [{"OAuth2PasswordBearer": []}], "parameters": [{"name": "ticker", "in": "path", "required": true, "schema": {"type": "string", "title": "Ticker"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/analysis/{ticker}": {"post": {"tags": ["analysis"], "summary": "Analyze Stock", "description": "\u80a1\u7968\u5206\u6790\u63a5\u53e3 (\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91)\n1. \u68c0\u67e5\u7528\u6237\u6743\u9650/SaaS\u9650\u5236 (\u514d\u8d39\u7528\u6237\u6bcf\u65e5\u9650\u989d)\n2. \u83b7\u53d6\u5b9e\u65f6\u884c\u60c5\u6570\u636e (\u4ef7\u683c\u3001\u6280\u672f\u6307\u6807)\n3. \u83b7\u53d6\u76f8\u5173\u65b0\u95fb (\u4e0a\u4e0b\u6587)\n4. \u83b7\u53d6\u7528\u6237\u6301\u4ed3\u4fe1\u606f (\u6210\u672c\u3001\u76c8\u4e8f)\n5. \u8c03\u7528 AI \u6a21\u578b\u751f\u6210\u6295\u8d44\u5efa\u8bae", "operationId": "analyze_stock_api_analysis__ticker__post", "security": [{"OAuth2PasswordBearer": []}], "parameters": [{"name": "ticker", "in": "path", "required": true, "schema": {"type": "string", "title": "Ticker"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/user/me": {"get": {"tags": ["user"], "summary": "Read Users Me", "operationId": "read_users_me_api_user_me_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserProfile"}}}}}, "security": [{"OAuth2PasswordBearer": []}]}}, "/api/user/settings": {"put": {"tags": ["user"], "summary": "Update User Settings", "operationId": "update_user_settings_api_user_settings_put", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserSettingsUpdate"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserProfile"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"OAuth2PasswordBearer": []}]}}, "/health": {"get": {"summary": "Health Check", "operationId": "health_check_health_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}, "/": {"get": {"summary": "Root", "operationId": "root__get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}}, "components": {"schemas": {"AnalysisResponse": {"properties": {"ticker": {"type": "string", "title": "Ticker"}, "analysis": {"type": "string", "title": "Analysis"}, "sentiment": {"type": "string", "title": "Sentiment", "default": "NEUTRAL"}}, "type": "object", "required": ["ticker", "analysis"], "title": "AnalysisResponse"}, "Body_login_access_token_api_auth_login_post": {"properties": {"grant_type": {"anyOf": [{"type": "string", "pattern": "^password$"}, {"type": "null"}], "title": "Grant Type"}, "username": {"type": "string", "title": "Username"}, "password": {"type": "string", "format": "password", "title": "Password"}, "scope": {"type": "string", "title": "Scope", "default": ""}, "client_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Client Id"}, "client_secret": {"anyOf": [{"type": "string"}, {"type": "null"}], "format": "password", "title": "Client Secret"}}, "type": "object", "required": ["username", "password"], "title": "Body_login_access_token_api_auth_login_post"}, "HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "PortfolioCreate": {"properties": {"ticker": {"type": "string", "title": "Ticker"}, "quantity": {"type": "number", "title": "Quantity"}, "avg_cost": {"type": "number", "title": "Avg Cost"}}, "type": "object", "required": ["ticker", "quantity", "avg_cost"], "title": "PortfolioCreate"}, "PortfolioItem": {"properties": {"ticker": {"type": "string", "title": "Ticker"}, "quantity": {"type": "number", "title": "Quantity"}, "avg_cost": {"type": "number", "title": "Avg Cost"}, "current_price": {"type": "number", "title": "Current Price", "default": 0.0}, "market_value": {"type": "number", "title": "Market Value", "default": 0.0}, "unrealized_pl": {"type": "number", "title": "Unrealized Pl", "default": 0.0}, "pl_percent": {"type": "number", "title": "Pl Percent", "default": 0.0}, "last_updated": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Last Updated"}, "sector": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Sector"}, "industry": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Industry"}, "market_cap": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Market Cap"}, "pe_ratio": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Pe Ratio"}, "forward_pe": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Forward Pe"}, "eps": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Eps"}, "dividend_yield": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Dividend Yield"}, "beta": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Beta"}, "fifty_two_week_high": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Fifty Two Week High"}, "fifty_two_week_low": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Fifty Two Week Low"}, "rsi_14": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Rsi 14"}, "ma_20": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Ma 20"}, "ma_50": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Ma 50"}, "ma_200": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Ma 200"}, "macd_val": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Macd Val"}, "macd_signal": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Macd Signal"}, "macd_hist": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Macd Hist"}, "bb_upper": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Bb Upper"}, "bb_middle": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Bb Middle"}, "bb_lower": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Bb Lower"}, "atr_14": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Atr 14"}, "k_line": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "K Line"}, "d_line": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "D Line"}, "j_line": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "J Line"}, "volume_ma_20": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Volume Ma 20"}, "volume_ratio": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Volume Ratio"}, "change_percent": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Change Percent", "default": 0.0}}, "type": "object", "required": ["ticker", "quantity", "avg_cost"], "title": "PortfolioItem"}, "SearchResult": {"properties": {"ticker": {"type": "string", "title": "Ticker"}, "name": {"type": "string", "title": "Name"}}, "type": "object", "required": ["ticker", "name"], "title": "SearchResult"}, "Token": {"properties": {"access_token": {"type": "string", "title": "Access Token"}, "token_type": {"type": "string", "title": "Token Type"}}, "type": "object", "required": ["access_token", "token_type"], "title": "Token"}, "UserCreate": {"properties": {"email": {"type": "string", "format": "email", "title": "Email"}, "password": {"type": "string", "title": "Password"}}, "type": "object", "required": ["email", "password"], "title": "UserCreate"}, "UserProfile": {"properties": {"id": {"type": "string", "title": "Id"}, "email": {"type": "string", "title": "Email"}, "membership_tier": {"type": "string", "title": "Membership Tier"}, "has_gemini_key": {"type": "boolean", "title": "Has Gemini Key"}, "has_deepseek_key": {"type": "boolean", "title": "Has Deepseek Key"}, "preferred_data_source": {"type": "string", "title": "Preferred Data Source"}}, "type": "object", "required": ["id", "email", "membership_tier", "has_gemini_key", "has_deepseek_key", "preferred_data_source"], "title": "UserProfile"}, "UserSettingsUpdate": {"properties": {"api_key_gemini": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Api Key Gemini"}, "api_key_deepseek": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Api Key Deepseek"}, "preferred_data_source": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Preferred Data Source"}}, "type": "object", "title": "UserSettingsUpdate"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}, "securitySchemes": {"OAuth2PasswordBearer": {"type": "oauth2", "flows": {"password": {"scopes": {}, "tokenUrl": "/api/auth/login"}}}}}}
