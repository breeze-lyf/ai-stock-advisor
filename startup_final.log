ğŸš€ Starting AI Smart Investment Advisor...
ğŸ“ˆ Starting Backend (FastAPI) on port 8000...
ğŸ”„ Starting Auto Refresh Script...
ğŸ’» Starting Frontend (Next.js) on port 3000...
INFO:     Will watch for changes in these directories: ['/Users/breeze/Dev/ai-stock-advisor/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [70723] using StatReload
âœ… Services are running!
   - Frontend: http://localhost:3000
   - Backend:  http://localhost:8000/docs
Press CTRL+C to stop.

> frontend@0.1.0 dev
> next dev

2026-02-15 19:50:13,855 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
INFO:     Started server process [70727]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
â–² Next.js 16.1.2 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://192.168.10.139:3000

âœ“ Starting...
âœ“ Ready in 467ms
 GET /?ticker=AAPL 200 in 452ms (compile: 319ms, render: 132ms)
2026-02-15 19:50:19,421 - api_logger - INFO - rid=/api/analysis/AAPL method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=39.10ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:52407 - "GET /api/analysis/AAPL HTTP/1.1" 200 OK
2026-02-15 19:50:19,424 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=36.57ms
INFO:     127.0.0.1:52408 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-15 19:50:19,427 - api_logger - INFO - rid=/api/portfolio/AAPL/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=36.39ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:52410 - "GET /api/portfolio/AAPL/news HTTP/1.1" 200 OK
2026-02-15 19:50:19,428 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.25ms
INFO:     127.0.0.1:52408 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-15 19:50:21,140 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1662.86ms
INFO:     127.0.0.1:52408 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
 GET /sw.js 404 in 70ms (compile: 43ms, render: 27ms)
 GET /settings 200 in 143ms (compile: 128ms, render: 15ms)
INFO:     127.0.0.1:56917 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:56918 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
2026-02-15 20:52:43,713 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.24ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:56918 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-15 20:52:43,716 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.41ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:56917 - "GET /api/user/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:56943 - "OPTIONS /api/user/settings HTTP/1.1" 200 OK
2026-02-15 20:52:47,496 - api_logger - INFO - rid=/api/user/settings method=PUT status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.54ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:56943 - "PUT /api/user/settings HTTP/1.1" 200 OK
2026-02-15 20:52:47,500 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1.14ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:56943 - "GET /api/user/me HTTP/1.1" 200 OK
 GET / 200 in 34ms (compile: 15ms, render: 20ms)
INFO:     127.0.0.1:59967 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:59968 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-15 21:15:33,123 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.38ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59967 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-15 21:15:33,130 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.60ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59968 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 9ms (compile: 2ms, render: 7ms)
INFO:     127.0.0.1:59968 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59967 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59972 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59973 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:59974 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-15 21:15:33,265 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.72ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59972 - "GET /api/user/me HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 17ms (compile: 6ms, render: 11ms)
2026-02-15 21:15:33,269 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.28ms
INFO:     127.0.0.1:59976 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-15 21:15:33,273 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=37.06ms
INFO:     127.0.0.1:59967 - "GET /api/analysis/002050 HTTP/1.1" 404 Not Found
2026-02-15 21:15:33,277 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.03ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59967 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-15 21:15:33,343 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=108.86ms
INFO:     127.0.0.1:59968 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:15:33,420 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=75.91ms
INFO:     127.0.0.1:59967 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=AMAT 200 in 23ms (compile: 4ms, render: 19ms)
INFO:     127.0.0.1:59967 - "OPTIONS /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59968 - "OPTIONS /api/analysis/AMAT HTTP/1.1" 200 OK
INFO:     127.0.0.1:59976 - "OPTIONS /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:60000 - "OPTIONS /api/portfolio/AMAT/news HTTP/1.1" 200 OK
2026-02-15 21:15:35,158 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=32.18ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59967 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-15 21:15:35,163 - api_logger - INFO - rid=/api/analysis/AMAT method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=36.39ms
INFO:     127.0.0.1:59976 - "GET /api/analysis/AMAT HTTP/1.1" 404 Not Found
2026-02-15 21:15:35,164 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=29.14ms
INFO:     127.0.0.1:59999 - "GET /api/analysis/002050 HTTP/1.1" 404 Not Found
2026-02-15 21:15:35,166 - api_logger - INFO - rid=/api/portfolio/AMAT/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.80ms
INFO:     127.0.0.1:60000 - "GET /api/portfolio/AMAT/news HTTP/1.1" 200 OK
2026-02-15 21:15:35,177 - api_logger - INFO - rid=/api/portfolio/AMAT/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.97ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59999 - "GET /api/portfolio/AMAT/news HTTP/1.1" 200 OK
2026-02-15 21:15:35,181 - api_logger - INFO - rid=/api/analysis/AMAT method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.10ms
INFO:     127.0.0.1:60000 - "GET /api/analysis/AMAT HTTP/1.1" 404 Not Found
2026-02-15 21:15:35,222 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=99.07ms
INFO:     127.0.0.1:59972 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:15:35,280 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=56.79ms
INFO:     127.0.0.1:60000 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:15:35,850 - api_logger - INFO - rid=/api/stocks/AMAT/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=723.52ms
INFO:     127.0.0.1:59968 - "GET /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59968 - "OPTIONS /api/portfolio/AMAT/refresh HTTP/1.1" 200 OK
2026-02-15 21:15:36,578 - api_logger - INFO - rid=/api/stocks/AMAT/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=726.60ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:60000 - "GET /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:15:36,824 - api_logger - INFO - rid=/api/stocks/AMAT/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=243.33ms
INFO:     127.0.0.1:59972 - "GET /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:15:37,067 - api_logger - INFO - rid=/api/stocks/AMAT/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=241.14ms
INFO:     127.0.0.1:60033 - "GET /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:15:37,735 - api_logger - INFO - rid=/api/portfolio/AMAT/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1651.92ms
INFO:     127.0.0.1:59968 - "POST /api/portfolio/AMAT/refresh HTTP/1.1" 200 OK
2026-02-15 21:15:37,746 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.75ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59968 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:59968 - "OPTIONS /api/analysis/AMAT?force=true HTTP/1.1" 200 OK
2026-02-15 21:15:41,234 - app.api.v1.endpoints.analysis - INFO - Preparing AI analysis for AMAT. Market Data keys present: ['current_price', 'change_percent', 'rsi_14', 'ma_20', 'ma_50', 'ma_200', 'macd_val', 'macd_hist', 'macd_hist_slope', 'bb_upper', 'bb_middle', 'bb_lower', 'k_line', 'd_line', 'j_line', 'atr_14', 'adx_14', 'resistance_1', 'resistance_2', 'support_1', 'support_2', 'market_status']
2026-02-15 21:15:41,241 - app.services.ai_service - INFO - --- AI ANALYSIS PROMPT FOR AMAT ---

        ä½ æ˜¯ä¸€ä½èµ„æ·±ç¾è‚¡æŠ•èµ„é¡¾é—®å’Œé‡åŒ–ç­–ç•¥ä¸“å®¶ã€‚è¯·åŸºäºä»¥ä¸‹å¤šç»´æ•°æ®ä¸ºä»£ç  [AMAT] æä¾›ä¸¥è°¨çš„è¯Šæ–­ã€‚
        
        **1. åŸºç¡€é¢æ¦‚è§ˆ (Fundamental Context)**:
        - è¡Œä¸š/æ¿å—: Technology / Semiconductor Equipment & Materials
        - å¸‚å€¼: 281699680256.0
        - PE (TTM): 36.36 | Forward PE: 25.88
        - 52å‘¨æ³¢åŠ¨èŒƒå›´: [123.74, 376.32]
        - Beta: 1.68
        
        **2. ç”¨æˆ·æŒä»“èƒŒæ™¯ (Portfolio Context)**:
        - å½“å‰æˆæœ¬ä»·: $0.0
        - æŒä»“æ•°é‡: 0.0
        - æœªå®ç°ç›ˆäº: $0.0 (0%)
        
        **3. å®æ—¶æŠ€æœ¯é¢æ•°æ® (Technical Data)**:
        - å½“å‰ä»·æ ¼: $354.91
        - ä»Šæ—¥æ¶¨è·Œ: 8.08%
        - RSI (14): 61.0 | KDJ (K): 72.87 / (D): 66.37 / (J): 85.85
        - MACD: 11.98 (æŸ±çŠ¶å›¾: 0.39, æ–œç‡: 1.58)
        - å¸ƒæ—å¸¦ (BB): ä¸Šè½¨: 351.07 | å‡çº¿: 325.91 | ä¸‹è½¨: 300.75
        - MA å‡çº¿: [20: 325.91, 50: 294.43, 200: 216.6]
        - è¶‹åŠ¿å¼ºåº¦ (ADX): None | ATR: 19.86
        - æ¢è½´å‚è€ƒ (Pivots): é˜»åŠ›ä½ R1: 345.85 / R2: 351.82 | æ”¯æ’‘ä½ S1: 296.8 / S2: 324.92
        
        **4. æœ€æ–°æ¶ˆæ¯é¢ (Recent News)**:
        [{'title': 'Samsung HBM4 Breakthrough And Applied Materials Alliance Test Valuation Story', 'publisher': 'Simply Wall St.', 'time': '2026-02-15T10:08:21'}, {'title': 'Applied Materials Clears US Probe As Samsung EPIC Partnership Refocuses Growth', 'publisher': 'Simply Wall St.', 'time': '2026-02-15T09:10:55'}, {'title': 'These â€˜saferâ€™ chip stocks have boomed this year. Is it too late to buy in?', 'publisher': 'MarketWatch', 'time': '2026-02-14T14:30:00'}, {'title': 'Applied Materials price target raised to $440 from $390 at Needham', 'publisher': 'TipRanks', 'time': '2026-02-14T14:06:29'}, {'title': 'Morning Movers: Tri Pointe surges after deal to be acquired', 'publisher': 'TipRanks', 'time': '2026-02-14T14:01:23'}]
        
        **ä»»åŠ¡ (Core Task)**:
        è¯·æ‰§è¡Œâ€œé€»è¾‘ä¸¥å¯†â€çš„æŠ•èµ„è¯Šæ–­ã€‚
        
        **é‡è¦å‡†åˆ™ (Strict Rules)**:
        - **æ•°æ®é©±åŠ¨**: æ‰€æœ‰çš„æ­¢æŸä½ã€åŠ ä»“ä½å’Œç›®æ ‡ä»·**å¿…é¡»åŸºäºä¸Šè¿°æä¾›çš„æŠ€æœ¯æŒ‡æ ‡æˆ–åŸºç¡€é¢æ•°å€¼**ã€‚ä¾‹å¦‚ï¼Œâ€œæ­¢æŸè®¾åœ¨ MA50 (294.43) é™„è¿‘â€æˆ–â€œå‚è€ƒå¸ƒæ—çº¿ä¸‹è½¨ (300.75)â€ã€‚
        - **ä¸€è‡´æ€§å‡†åˆ™ [CRITICAL]**: `immediate_action` å¿…é¡»ä¸ä½ å®šä¹‰çš„ `entry_price` åŒºé—´ä¸¥æ ¼é€»è¾‘ä¸€è‡´ã€‚
            * å¦‚æœ [å½“å‰ä»·æ ¼] > `entry_price_high`ï¼Œç»å¯¹ä¸èƒ½å»ºè®®â€œå³æ—¶ä¹°å…¥â€æˆ–â€œç›´æ¥å»ºä»“â€ï¼Œè€Œåº”å»ºè®®â€œæŒç­¹è§‚æœ›â€æˆ–â€œç­‰å¾…å›è°ƒâ€ã€‚
            * å¦‚æœ [å½“å‰ä»·æ ¼] å¤„äº [`entry_price_low`, `entry_price_high`] ä¹‹é—´ï¼Œæ–¹å¯å»ºè®®â€œåˆ†æ‰¹ä¹°å…¥â€æˆ–â€œå³åˆ»è¿›åœºâ€ã€‚
            * å¦‚æœ [å½“å‰ä»·æ ¼] > `target_price`ï¼Œå»ºè®®åº”ä¾§é‡â€œåˆ†æ‰¹æ­¢ç›ˆâ€æˆ–â€œè­¦æƒ•è¿‡çƒ­â€ã€‚
        - **ä¸¥ç¦ä¹±é€ **: ä¸è¦å‡­ç©ºç¼–é€  99.42 ä¹‹ç±»æ²¡æœ‰ä»»ä½•å‚è€ƒæ„ä¹‰çš„æ•°å­—ã€‚æ‰€æœ‰çš„ä»·æ ¼é”šç‚¹å¿…é¡»åœ¨æ•°æ®ä¸­æœ‰è¿¹å¯å¾ªã€‚
        - **æŒä»“é€»è¾‘**: å¦‚æœç”¨æˆ·å½“å‰æŒä»“ä¸º 0ï¼Œå»ºè®®åº”ä¾§é‡äºå»ºä»“ç‚¹ä½ï¼›å¦‚æœå·²æœ‰æŒä»“ä¸”æµ®ç›ˆ/æµ®äºè¾ƒå¤§ï¼Œåº”ç»™å‡ºæ­¢ç›ˆ/åŠ ç æˆ–å‡ä»“ç­–ç•¥ã€‚
        
        **è¿”å›æ ¼å¼è¦æ±‚**:
        - ä½¿ç”¨ç®€æ´ã€ä¸“ä¸šçš„ä¸­æ–‡ã€‚
        - **å¿…é¡»åœ¨ `technical_analysis` ä¸­æ˜ç¡®å¼•ç”¨ä»¥ä¸‹æ•°å€¼**: å½“å‰ä»·æ ¼ã€RSIã€MACDã€MA50/200 æˆ–å¸ƒæ—å¸¦ä½ç‚¹ã€‚
        - **ä¸¥è°¨ç²¾åº¦**: AI å»ºè®®ä¸­çš„æ‰€æœ‰ä»·æ ¼æ•°å€¼ã€æŒ‡æ ‡æ•°å€¼å¿…é¡»**å››èˆäº”å…¥ä¿ç•™ 2 ä½å°æ•°ç‚¹**ï¼ˆä¾‹å¦‚ï¼š88.54 è€Œä¸æ˜¯ 88.544834ï¼‰ã€‚
        - å¿…é¡»è¿”å›ä¸¥æ ¼çš„ JSON æ ¼å¼ã€‚
        
        ç»“æœç»“æ„:
        {
            "sentiment_score": 0-100 (é‡åŒ–è¯„åˆ†ï¼š0=æåº¦çœ‹ç©º, 50=ä¸­æ€§, 100=æåº¦çœ‹å¤š), 
            "summary_status": "4-6å­—å®šè°ƒ",
            "immediate_action": "é’ˆå¯¹å½“ä¸‹çš„å†³ç­–å»ºè®® (ä¾‹å¦‚ï¼šé€¢ä½ä¹°å…¥/è¶‹åŠ¿åšå¤š/æŒä»“è§‚æœ›/åˆ†æ‰¹å‡æŒ)",
            "entry_price_low": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸‹é™ (Float, ä¾‹å¦‚ï¼š50.50)ã€‚å¿…é¡»åŸºäºæŠ€æœ¯æ”¯æ’‘ä½ï¼ˆå¦‚å¸ƒæ—ä¸‹è½¨ã€MA50ã€å…³é”®æ”¯æ’‘ä½ç­‰ï¼‰ã€‚ä¸¥ç¦ç›´æ¥ä½¿ç”¨å½“å‰å®æ—¶ä»·æ ¼ã€‚",
            "entry_price_high": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸Šé™ (Float, ä¾‹å¦‚ï¼š52.00)ã€‚å¿…é¡»åŸºäºæŠ€æœ¯å‚è€ƒä½ï¼ˆå¦‚å¸ƒæ—ä¸­è½¨ã€MA20ã€å…³é”®é˜»åŠ›ä½ç­‰ï¼‰ã€‚**ä¸¥ç¦ç­‰äºå½“å‰å®æ—¶ä»·æ ¼**â€”â€”å»ºä»“åŒºé—´åº”åæ˜ æŠ€æœ¯é¢ä¸Šçš„ç†æƒ³ä»‹å…¥èŒƒå›´ï¼Œè€Œä¸æ˜¯'ç°åœ¨å°±èƒ½ä¹°åˆ°çš„ä»·æ ¼'ã€‚",
            "target_price": "é¢„æœŸçš„æ­¢ç›ˆä½ (Float)ã€‚å¿…é¡»åŸºäºæŠ€æœ¯é˜»åŠ›ä½æˆ–å¸ƒæ—ä¸Šè½¨ç­‰ã€‚",
            "stop_loss_price": "[CRITICAL] é¢„æœŸçš„æ­¢æŸä½ (Float)ã€‚å¿…é¡»ä¸¥æ ¼ä½äº entry_price_low (é€šå¸¸å»ºè®®ä½ 2%-5% æˆ–è®¾åœ¨æ›´ä½ä¸€å±‚çš„å…³é”®æ”¯æ’‘ä½)ï¼Œä¸¥ç¦ä¸å»ºä»“ä¸‹é™é‡å ã€‚",
            "risk_level": "é£é™©ç­‰çº§ï¼šä½/ä¸­/é«˜",
            "investment_horizon": "å»ºè®®æŒä»“æœŸé™",
            "confidence_level": 0-100 (AI ä¿¡å¿ƒæŒ‡æ•°),
            "technical_analysis": "æ ¸å¿ƒæŠ€æœ¯ä½è§£è¯»ï¼ˆå¿…é¡»åˆ†æ RSI, MACD, MA50 ç­‰æ•°å€¼ï¼‰",
            "fundamental_news": "åŸºç¡€é¢/æ¶ˆæ¯é¢æ·±åº¦è§£è¯»",
            "action_advice": "[CRITICAL] ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ Markdown æ ¼å¼ç”Ÿæˆè¯¦ç»†çš„æ“ä½œå»ºè®®ï¼Œå¹¶å¯¹å…³é”®æ•°å€¼ï¼ˆä»·æ ¼ã€ä»“ä½ã€æ­¢æŸä½ï¼‰ä½¿ç”¨ **åŠ ç²—**ï¼š
            
### 1. å»ºè®®æ“ä½œä¸äº¤æ˜“ç»¼è¿° (Suggested Action & Executive Summary)
- **å»ºè®®æ“ä½œ**: **[å³æ—¶è¡ŒåŠ¨å»ºè®®]**
- **è¡Œæƒ…ç»¼è¿°**: å½“å‰è‚¡ä»· **$ä»·æ ¼** å¤„äº **[é˜¶æ®µå®šä¹‰]**ã€‚æ•´ä½“ç ”åˆ¤ä¸º **[ç­–ç•¥å®šè°ƒ]**ã€‚

### 2. ç»“æ„åŒ–æ“ä½œè®¡åˆ’ (Action Plan)
* **é¦–æ‰¹å»ºä»“ (Position 1):** **$å»ºä»“ä½1** (äº¤æ˜“è§¦å‘æ¡ä»¶ Triggerï¼Œå»ºè®®ä»“ä½ **Position Size**)
* **æ¬¡æ‰¹åŠ ç  (Position 2):** **$å»ºä»“ä½2** (è§¦å‘æ¡ä»¶åŠä»“ä½)
* **æ­¢æŸæ–¹æ¡ˆ (Stop Loss):** **$æ­¢æŸä»·** (å¤±æ•ˆæ¡ä»¶ Invalidationï¼šæ˜ç¡®è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹è¯¥ç­–ç•¥å¤±æ•ˆ)
* **æ­¢ç›ˆç›®æ ‡ (Target):** **ç¬¬ä¸€ç›®æ ‡ $ä»·æ ¼**ï¼Œ**ç¬¬äºŒç›®æ ‡ $ä»·æ ¼**ã€‚

### 3. å¤šç»´é€»è¾‘æ”¯æ’‘ (Rationale)
* **æŠ€æœ¯é¢:** (æ ¸å¿ƒæŠ€æœ¯æŒ‡æ ‡ä¿¡å·)
* **åŸºæœ¬é¢/æƒ…ç»ªé¢:** (æ”¯æ’‘ç ”åˆ¤çš„éæŠ€æœ¯å› ç´ )
"
        }
        
--------------------------------------
2026-02-15 21:15:41,245 - app.services.ai_service - INFO - Calling SiliconFlow with Model ID: Pro/deepseek-ai/DeepSeek-R1 (Key: deepseek-r1)
2026-02-15 21:15:52,825 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-15 21:15:52,829 - app.api.v1.endpoints.analysis - INFO - AI Response for AMAT: {
    "sentiment_score": 78,
    "summary_status": "å¼ºåŠ¿çªç ´ï¼Œå›è°ƒå¸ƒå±€",
    "immediate_action": "ç­‰å¾…å›è°ƒåˆ†æ‰¹ä¹°å…¥",
    "entry_price_low": 325.91,
    "entry_price_high": 340.00,
    "target_price": 376.32,
    "stop_loss_price": 300.75,
    "risk_level": "ä¸­",
    "investment_horizon": "6-12ä¸ªæœˆ",
    "confidence_level": 85,
    "technical_analysis": "å½“å‰ä»·æ ¼ $354.91 çªç ´å¸ƒæ—å¸¦ä¸Šè½¨ $351.07 å¹¶ç«™ä¸Šæ‰€æœ‰å…³é”®å‡çº¿ï¼ˆMA20: $325.91ï¼ŒMA50: $294.43ï¼ŒMA200: $216.60ï¼‰ï¼Œæ˜¾ç¤ºå¼ºåŠ¿è¶‹åŠ¿ã€‚ä½† RSI 61.0 æ¥è¿‘è¶…ä¹°åŒºï¼ŒKDJ ä¸­ J å€¼ 85.85 å·²è¶…ä¹°ï¼ŒMACD æŸ±çŠ¶å›¾æ–œç‡ 1.58 æ˜¾ç¤ºåŠ¨èƒ½å‡å¼±ï¼ŒçŸ­æœŸéœ€è­¦æƒ•å›è°ƒé£é™©ã€‚",
    "fundamental_news": "å…¬å¸è¿‘æœŸè· Needham ç›®æ ‡ä»·ä¸Šè°ƒè‡³ $440ï¼ˆ+24%ç©ºé—´ï¼‰ï¼Œå¹¶ä¸ä¸‰æ˜Ÿè¾¾æˆ HBM4 æŠ€æœ¯åˆä½œï¼Œå åŠ ç¾å›½ç›‘ç®¡è°ƒæŸ¥ç»“æŸåˆ©å¥½ã€‚è¡Œä¸šå— AI èŠ¯ç‰‡éœ€æ±‚é©±åŠ¨ï¼ŒForward PE 25.88 ä½äº TTM PE 36.36ï¼Œåæ˜ ç›ˆåˆ©å¢é•¿é¢„æœŸã€‚ä½† Beta 1.68 æ˜¾ç¤ºæ³¢åŠ¨é«˜äºå¤§ç›˜ã€‚",
    "action_advice": "### 1. å»ºè®®æ“ä½œä¸äº¤æ˜“ç»¼è¿° (Suggested Action & Executive Summary)\n- **å»ºè®®æ“ä½œ**: **ç­‰å¾…å›è°ƒåˆ†æ‰¹ä¹°å…¥**\n- **è¡Œæƒ…ç»¼è¿°**: å½“å‰è‚¡ä»· **$354.91** å¤„äº **å†å²é«˜ä½çªç ´é˜¶æ®µ**ã€‚æ•´ä½“ç ”åˆ¤ä¸º **æŠ€æœ¯è¶…ä¹°ä½†åŸºæœ¬é¢å¼ºåŠ²ï¼Œéœ€å›è°ƒä»‹å…¥**ã€‚\n\n### 2. ç»“æ„åŒ–æ“ä½œè®¡åˆ’ (Action Plan)\n* **é¦–æ‰¹å»ºä»“ (Position 1):** **$340.00** (è‹¥å›è°ƒè‡³ MA20 æ”¯æ’‘ä½ï¼Œå»ºè®®ä»“ä½ **40%**)\n* **æ¬¡æ‰¹åŠ ç  (Position 2):** **$325.91** (è‹¥æµ‹è¯• MA50 å¼ºæ”¯æ’‘ï¼Œå»ºè®®ä»“ä½ **30%**)\n* **æ­¢æŸæ–¹æ¡ˆ (Stop Loss):** **$300.75** (å¸ƒæ—å¸¦ä¸‹è½¨ï¼Œè‹¥æ”¶ç›˜ä»·è¿ç»­ä¸¤æ—¥è·Œç ´åˆ™ç­–ç•¥å¤±æ•ˆ)\n* **æ­¢ç›ˆç›®æ ‡ (Target):** **ç¬¬ä¸€ç›®æ ‡ $376.32**ï¼ˆ52å‘¨é«˜ç‚¹ï¼‰ï¼Œ**ç¬¬äºŒç›®æ ‡ $440.00**ï¼ˆNeedhamç›®æ ‡ä»·ï¼‰ã€‚\n\n### 3. å¤šç»´é€»è¾‘æ”¯æ’‘ (Rationale)\n* **æŠ€æœ¯é¢:** \n  - çªç ´å¸ƒæ—å¸¦ä¸Šè½¨åéœ€å›è¸©ç¡®è®¤æ”¯æ’‘ï¼ŒMA20 $325.91 ä¸å¸ƒæ—å¸¦ä¸­è½¨é‡åˆå½¢æˆå…³é”®é˜²çº¿\n  - MACD æ­£æŸ±ç¼©é‡ä½†æ•´ä½“å¤šå¤´æ’åˆ—æœªç ´åï¼ŒMA50/200 é‡‘å‰æä¾›é•¿æœŸæ”¯æ’‘\n* **åŸºæœ¬é¢/æƒ…ç»ªé¢:** \n  - åŠå¯¼ä½“è®¾å¤‡è¡Œä¸šå— HBM/AI èŠ¯ç‰‡æ‰©äº§é©±åŠ¨ï¼Œå…¬å¸æŠ€æœ¯åˆä½œåˆ©å¥½è½åœ°\n  - æœºæ„ç›®æ ‡ä»· $440 éšå« 24% ä¸Šè¡Œç©ºé—´ï¼ŒForward PE 25.88 ä½äºè¡Œä¸šå‡å€¼"
}
2026-02-15 21:15:52,842 - app.api.v1.endpoints.analysis - INFO - âœ… Synced AI RRR (0.4) to MarketDataCache for AMAT (Strategy Locked)
2026-02-15 21:15:52,843 - api_logger - INFO - rid=/api/analysis/AMAT method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12318.15ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59968 - "POST /api/analysis/AMAT?force=true HTTP/1.1" 200 OK
2026-02-15 21:15:52,853 - api_logger - INFO - rid=/api/portfolio/AMAT/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.20ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:59968 - "GET /api/portfolio/AMAT/news HTTP/1.1" 200 OK
 GET /?ticker=AMD 200 in 42ms (compile: 16ms, render: 26ms)
INFO:     127.0.0.1:60588 - "OPTIONS /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:60590 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:60592 - "OPTIONS /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:60597 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-15 21:20:32,231 - api_logger - INFO - rid=/api/analysis/AMAT method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=21.71ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:60595 - "GET /api/analysis/AMAT HTTP/1.1" 200 OK
2026-02-15 21:20:32,233 - api_logger - INFO - rid=/api/portfolio/AMAT/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.45ms
INFO:     127.0.0.1:60588 - "GET /api/portfolio/AMAT/news HTTP/1.1" 200 OK
2026-02-15 21:20:32,234 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.76ms
INFO:     127.0.0.1:60597 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-15 21:20:32,235 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.98ms
INFO:     127.0.0.1:60592 - "GET /api/analysis/AMD HTTP/1.1" 404 Not Found
2026-02-15 21:20:32,241 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.34ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:60597 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-15 21:20:32,242 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.17ms
INFO:     127.0.0.1:60592 - "GET /api/analysis/AMD HTTP/1.1" 404 Not Found
2026-02-15 21:20:32,574 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=348.93ms
INFO:     127.0.0.1:60590 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:20:32,713 - api_logger - INFO - rid=/api/stocks/AMAT/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=505.54ms
INFO:     127.0.0.1:60594 - "GET /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:20:33,043 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=467.86ms
INFO:     127.0.0.1:60592 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:20:33,070 - api_logger - INFO - rid=/api/stocks/AMAT/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=355.51ms
INFO:     127.0.0.1:60590 - "GET /api/stocks/AMAT/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:20:33,164 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=119.09ms
INFO:     127.0.0.1:60594 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:20:33,445 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=279.61ms
INFO:     127.0.0.1:60590 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:60590 - "OPTIONS /api/analysis/AMD?force=true HTTP/1.1" 200 OK
2026-02-15 21:20:37,612 - app.api.v1.endpoints.analysis - INFO - Preparing AI analysis for AMD. Market Data keys present: ['current_price', 'change_percent', 'rsi_14', 'ma_20', 'ma_50', 'ma_200', 'macd_val', 'macd_hist', 'macd_hist_slope', 'bb_upper', 'bb_middle', 'bb_lower', 'k_line', 'd_line', 'j_line', 'atr_14', 'adx_14', 'resistance_1', 'resistance_2', 'support_1', 'support_2', 'market_status']
2026-02-15 21:20:37,613 - app.services.ai_service - INFO - --- AI ANALYSIS PROMPT FOR AMD ---

        ä½ æ˜¯ä¸€ä½èµ„æ·±ç¾è‚¡æŠ•èµ„é¡¾é—®å’Œé‡åŒ–ç­–ç•¥ä¸“å®¶ã€‚è¯·åŸºäºä»¥ä¸‹å¤šç»´æ•°æ®ä¸ºä»£ç  [AMD] æä¾›ä¸¥è°¨çš„è¯Šæ–­ã€‚
        
        **1. åŸºç¡€é¢æ¦‚è§ˆ (Fundamental Context)**:
        - è¡Œä¸š/æ¿å—: Technology / Semiconductors
        - å¸‚å€¼: 338016796672.0
        - PE (TTM): 79.43 | Forward PE: 19.46
        - 52å‘¨æ³¢åŠ¨èŒƒå›´: [76.48, 267.08]
        - Beta: 1.95
        
        **2. ç”¨æˆ·æŒä»“èƒŒæ™¯ (Portfolio Context)**:
        - å½“å‰æˆæœ¬ä»·: $205.15
        - æŒä»“æ•°é‡: 4.0
        - æœªå®ç°ç›ˆäº: $8.67999999999995 (1.0577626127223922%)
        
        **3. å®æ—¶æŠ€æœ¯é¢æ•°æ® (Technical Data)**:
        - å½“å‰ä»·æ ¼: $207.32
        - ä»Šæ—¥æ¶¨è·Œ: 0.67%
        - RSI (14): 30.99 | KDJ (K): 28.29 / (D): 29.23 / (J): 26.41
        - MACD: -5.04 (æŸ±çŠ¶å›¾: -3.78, æ–œç‡: 0.34)
        - å¸ƒæ—å¸¦ (BB): ä¸Šè½¨: 273.99 | å‡çº¿: 230.89 | ä¸‹è½¨: 187.8
        - MA å‡çº¿: [20: 230.89, 50: 221.14, 200: 181.95]
        - è¶‹åŠ¿å¼ºåº¦ (ADX): None | ATR: 14.66
        - æ¢è½´å‚è€ƒ (Pivots): é˜»åŠ›ä½ R1: 214.55 / R2: 223.17 | æ”¯æ’‘ä½ S1: 201.23 / S2: 196.53
        
        **4. æœ€æ–°æ¶ˆæ¯é¢ (Recent News)**:
        [{'title': 'Oracle dividend growth signals new era for cloud titan', 'publisher': 'TheStreet', 'time': '2026-02-15T02:03:00'}, {'title': 'Is AMD Stock a Buy, Sell, or Hold in 2026?', 'publisher': 'Motley Fool', 'time': '2026-02-14T20:50:00'}, {'title': 'Three Problems Explain Why Intel Stock Dropped 7.5% This Week', 'publisher': '24/7 Wall St.', 'time': '2026-02-14T20:30:22'}, {'title': 'Nvidiaâ€™s Week: UBS Raises Target, Hyperscaler Spending Holds, AMD Stumbles', 'publisher': '24/7 Wall St.', 'time': '2026-02-14T12:50:49'}, {'title': 'Why Riot Platforms (RIOT) Is Up 5.3% After Landing AMD as Anchor Tenant in Taxâ€‘Backed Texas Expansion', 'publisher': 'Simply Wall St.', 'time': '2026-02-14T07:10:36'}]
        
        **ä»»åŠ¡ (Core Task)**:
        è¯·æ‰§è¡Œâ€œé€»è¾‘ä¸¥å¯†â€çš„æŠ•èµ„è¯Šæ–­ã€‚
        
        **é‡è¦å‡†åˆ™ (Strict Rules)**:
        - **æ•°æ®é©±åŠ¨**: æ‰€æœ‰çš„æ­¢æŸä½ã€åŠ ä»“ä½å’Œç›®æ ‡ä»·**å¿…é¡»åŸºäºä¸Šè¿°æä¾›çš„æŠ€æœ¯æŒ‡æ ‡æˆ–åŸºç¡€é¢æ•°å€¼**ã€‚ä¾‹å¦‚ï¼Œâ€œæ­¢æŸè®¾åœ¨ MA50 (221.14) é™„è¿‘â€æˆ–â€œå‚è€ƒå¸ƒæ—çº¿ä¸‹è½¨ (187.8)â€ã€‚
        - **ä¸€è‡´æ€§å‡†åˆ™ [CRITICAL]**: `immediate_action` å¿…é¡»ä¸ä½ å®šä¹‰çš„ `entry_price` åŒºé—´ä¸¥æ ¼é€»è¾‘ä¸€è‡´ã€‚
            * å¦‚æœ [å½“å‰ä»·æ ¼] > `entry_price_high`ï¼Œç»å¯¹ä¸èƒ½å»ºè®®â€œå³æ—¶ä¹°å…¥â€æˆ–â€œç›´æ¥å»ºä»“â€ï¼Œè€Œåº”å»ºè®®â€œæŒç­¹è§‚æœ›â€æˆ–â€œç­‰å¾…å›è°ƒâ€ã€‚
            * å¦‚æœ [å½“å‰ä»·æ ¼] å¤„äº [`entry_price_low`, `entry_price_high`] ä¹‹é—´ï¼Œæ–¹å¯å»ºè®®â€œåˆ†æ‰¹ä¹°å…¥â€æˆ–â€œå³åˆ»è¿›åœºâ€ã€‚
            * å¦‚æœ [å½“å‰ä»·æ ¼] > `target_price`ï¼Œå»ºè®®åº”ä¾§é‡â€œåˆ†æ‰¹æ­¢ç›ˆâ€æˆ–â€œè­¦æƒ•è¿‡çƒ­â€ã€‚
        - **ä¸¥ç¦ä¹±é€ **: ä¸è¦å‡­ç©ºç¼–é€  99.42 ä¹‹ç±»æ²¡æœ‰ä»»ä½•å‚è€ƒæ„ä¹‰çš„æ•°å­—ã€‚æ‰€æœ‰çš„ä»·æ ¼é”šç‚¹å¿…é¡»åœ¨æ•°æ®ä¸­æœ‰è¿¹å¯å¾ªã€‚
        - **æŒä»“é€»è¾‘**: å¦‚æœç”¨æˆ·å½“å‰æŒä»“ä¸º 0ï¼Œå»ºè®®åº”ä¾§é‡äºå»ºä»“ç‚¹ä½ï¼›å¦‚æœå·²æœ‰æŒä»“ä¸”æµ®ç›ˆ/æµ®äºè¾ƒå¤§ï¼Œåº”ç»™å‡ºæ­¢ç›ˆ/åŠ ç æˆ–å‡ä»“ç­–ç•¥ã€‚
        
        **è¿”å›æ ¼å¼è¦æ±‚**:
        - ä½¿ç”¨ç®€æ´ã€ä¸“ä¸šçš„ä¸­æ–‡ã€‚
        - **å¿…é¡»åœ¨ `technical_analysis` ä¸­æ˜ç¡®å¼•ç”¨ä»¥ä¸‹æ•°å€¼**: å½“å‰ä»·æ ¼ã€RSIã€MACDã€MA50/200 æˆ–å¸ƒæ—å¸¦ä½ç‚¹ã€‚
        - **ä¸¥è°¨ç²¾åº¦**: AI å»ºè®®ä¸­çš„æ‰€æœ‰ä»·æ ¼æ•°å€¼ã€æŒ‡æ ‡æ•°å€¼å¿…é¡»**å››èˆäº”å…¥ä¿ç•™ 2 ä½å°æ•°ç‚¹**ï¼ˆä¾‹å¦‚ï¼š88.54 è€Œä¸æ˜¯ 88.544834ï¼‰ã€‚
        - å¿…é¡»è¿”å›ä¸¥æ ¼çš„ JSON æ ¼å¼ã€‚
        
        ç»“æœç»“æ„:
        {
            "sentiment_score": 0-100 (é‡åŒ–è¯„åˆ†ï¼š0=æåº¦çœ‹ç©º, 50=ä¸­æ€§, 100=æåº¦çœ‹å¤š), 
            "summary_status": "4-6å­—å®šè°ƒ",
            "immediate_action": "é’ˆå¯¹å½“ä¸‹çš„å†³ç­–å»ºè®® (ä¾‹å¦‚ï¼šé€¢ä½ä¹°å…¥/è¶‹åŠ¿åšå¤š/æŒä»“è§‚æœ›/åˆ†æ‰¹å‡æŒ)",
            "entry_price_low": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸‹é™ (Float, ä¾‹å¦‚ï¼š50.50)ã€‚å¿…é¡»åŸºäºæŠ€æœ¯æ”¯æ’‘ä½ï¼ˆå¦‚å¸ƒæ—ä¸‹è½¨ã€MA50ã€å…³é”®æ”¯æ’‘ä½ç­‰ï¼‰ã€‚ä¸¥ç¦ç›´æ¥ä½¿ç”¨å½“å‰å®æ—¶ä»·æ ¼ã€‚",
            "entry_price_high": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸Šé™ (Float, ä¾‹å¦‚ï¼š52.00)ã€‚å¿…é¡»åŸºäºæŠ€æœ¯å‚è€ƒä½ï¼ˆå¦‚å¸ƒæ—ä¸­è½¨ã€MA20ã€å…³é”®é˜»åŠ›ä½ç­‰ï¼‰ã€‚**ä¸¥ç¦ç­‰äºå½“å‰å®æ—¶ä»·æ ¼**â€”â€”å»ºä»“åŒºé—´åº”åæ˜ æŠ€æœ¯é¢ä¸Šçš„ç†æƒ³ä»‹å…¥èŒƒå›´ï¼Œè€Œä¸æ˜¯'ç°åœ¨å°±èƒ½ä¹°åˆ°çš„ä»·æ ¼'ã€‚",
            "target_price": "é¢„æœŸçš„æ­¢ç›ˆä½ (Float)ã€‚å¿…é¡»åŸºäºæŠ€æœ¯é˜»åŠ›ä½æˆ–å¸ƒæ—ä¸Šè½¨ç­‰ã€‚",
            "stop_loss_price": "[CRITICAL] é¢„æœŸçš„æ­¢æŸä½ (Float)ã€‚å¿…é¡»ä¸¥æ ¼ä½äº entry_price_low (é€šå¸¸å»ºè®®ä½ 2%-5% æˆ–è®¾åœ¨æ›´ä½ä¸€å±‚çš„å…³é”®æ”¯æ’‘ä½)ï¼Œä¸¥ç¦ä¸å»ºä»“ä¸‹é™é‡å ã€‚",
            "risk_level": "é£é™©ç­‰çº§ï¼šä½/ä¸­/é«˜",
            "investment_horizon": "å»ºè®®æŒä»“æœŸé™",
            "confidence_level": 0-100 (AI ä¿¡å¿ƒæŒ‡æ•°),
            "technical_analysis": "æ ¸å¿ƒæŠ€æœ¯ä½è§£è¯»ï¼ˆå¿…é¡»åˆ†æ RSI, MACD, MA50 ç­‰æ•°å€¼ï¼‰",
            "fundamental_news": "åŸºç¡€é¢/æ¶ˆæ¯é¢æ·±åº¦è§£è¯»",
            "action_advice": "[CRITICAL] ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ Markdown æ ¼å¼ç”Ÿæˆè¯¦ç»†çš„æ“ä½œå»ºè®®ï¼Œå¹¶å¯¹å…³é”®æ•°å€¼ï¼ˆä»·æ ¼ã€ä»“ä½ã€æ­¢æŸä½ï¼‰ä½¿ç”¨ **åŠ ç²—**ï¼š
            
### 1. å»ºè®®æ“ä½œä¸äº¤æ˜“ç»¼è¿° (Suggested Action & Executive Summary)
- **å»ºè®®æ“ä½œ**: **[å³æ—¶è¡ŒåŠ¨å»ºè®®]**
- **è¡Œæƒ…ç»¼è¿°**: å½“å‰è‚¡ä»· **$ä»·æ ¼** å¤„äº **[é˜¶æ®µå®šä¹‰]**ã€‚æ•´ä½“ç ”åˆ¤ä¸º **[ç­–ç•¥å®šè°ƒ]**ã€‚

### 2. ç»“æ„åŒ–æ“ä½œè®¡åˆ’ (Action Plan)
* **é¦–æ‰¹å»ºä»“ (Position 1):** **$å»ºä»“ä½1** (äº¤æ˜“è§¦å‘æ¡ä»¶ Triggerï¼Œå»ºè®®ä»“ä½ **Position Size**)
* **æ¬¡æ‰¹åŠ ç  (Position 2):** **$å»ºä»“ä½2** (è§¦å‘æ¡ä»¶åŠä»“ä½)
* **æ­¢æŸæ–¹æ¡ˆ (Stop Loss):** **$æ­¢æŸä»·** (å¤±æ•ˆæ¡ä»¶ Invalidationï¼šæ˜ç¡®è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹è¯¥ç­–ç•¥å¤±æ•ˆ)
* **æ­¢ç›ˆç›®æ ‡ (Target):** **ç¬¬ä¸€ç›®æ ‡ $ä»·æ ¼**ï¼Œ**ç¬¬äºŒç›®æ ‡ $ä»·æ ¼**ã€‚

### 3. å¤šç»´é€»è¾‘æ”¯æ’‘ (Rationale)
* **æŠ€æœ¯é¢:** (æ ¸å¿ƒæŠ€æœ¯æŒ‡æ ‡ä¿¡å·)
* **åŸºæœ¬é¢/æƒ…ç»ªé¢:** (æ”¯æ’‘ç ”åˆ¤çš„éæŠ€æœ¯å› ç´ )
"
        }
        
--------------------------------------
2026-02-15 21:20:37,613 - app.services.ai_service - INFO - Calling SiliconFlow with Model ID: Pro/deepseek-ai/DeepSeek-R1 (Key: deepseek-r1)
2026-02-15 21:20:55,400 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-15 21:20:55,406 - app.api.v1.endpoints.analysis - INFO - AI Response for AMD: {
    "sentiment_score": 65,
    "summary_status": "ä¸­æ€§åå¤š",
    "immediate_action": "æŒä»“è§‚æœ›",
    "entry_price_low": 196.53,
    "entry_price_high": 201.23,
    "target_price": 230.89,
    "stop_loss_price": 187.80,
    "risk_level": "ä¸­",
    "investment_horizon": "3-6ä¸ªæœˆ",
    "confidence_level": 75,
    "technical_analysis": "å½“å‰ä»·æ ¼ $207.32 å¤„äºå¸ƒæ—å¸¦ä¸‹è½¨ï¼ˆ$187.80ï¼‰ä¸ä¸­è½¨ï¼ˆ$230.89ï¼‰ä¹‹é—´ã€‚RSIï¼ˆ14ï¼‰ä¸º 30.99ï¼Œæ¥è¿‘è¶…å–åŒºåŸŸï¼›MACD æŸ±çŠ¶å›¾ä¸º -3.78ï¼Œä½†æ–œç‡ä¸ºæ­£ï¼ˆ0.34ï¼‰ï¼Œæ˜¾ç¤ºä¸‹è·ŒåŠ¨èƒ½å‡å¼±ã€‚è‚¡ä»·ä½äº MA50ï¼ˆ$221.14ï¼‰ä¸‹æ–¹ï¼Œä½†é«˜äº MA200ï¼ˆ$181.95ï¼‰ï¼Œä¸­æœŸè¶‹åŠ¿æ‰¿å‹ä½†é•¿æœŸä»åå¤šã€‚KDJ ä¸‰çº¿å‡ä½äº 30ï¼ˆJ å€¼ 26.41ï¼‰ï¼Œæš—ç¤ºçŸ­æœŸè¶…å–ã€‚",
    "fundamental_news": "AMD è¿‘æœŸè·é€‰ä¸º Riot Platforms å¾·å·æ•°æ®ä¸­å¿ƒæ‰©å»ºçš„é”šå®šç§Ÿæˆ·ï¼Œæˆ–åˆ©å¥½æ•°æ®ä¸­å¿ƒä¸šåŠ¡ã€‚ä½†è¡Œä¸šæ¶ˆæ¯æ˜¾ç¤º AMD åœ¨ AI èŠ¯ç‰‡é¢†åŸŸè½åäºè‹±ä¼Ÿè¾¾ï¼ˆNvidiaï¼‰ï¼Œä¸”è‹±ç‰¹å°”ï¼ˆIntelï¼‰å› é—®é¢˜é¢‘å‡ºè‚¡ä»·ä¸‹è·Œï¼Œå¯èƒ½ä¸º AMD å¸¦æ¥å¸‚åœºä»½é¢æœºä¼šã€‚Forward PE 19.46 æ˜¾è‘—ä½äº TTM PE 79.43ï¼Œåæ˜ ç›ˆåˆ©å¢é•¿é¢„æœŸå¼ºåŠ²ã€‚",
    "action_advice": "### 1. å»ºè®®æ“ä½œä¸äº¤æ˜“ç»¼è¿° (Suggested Action & Executive Summary)\n- **å»ºè®®æ“ä½œ**: **æŒä»“è§‚æœ›**\n- **è¡Œæƒ…ç»¼è¿°**: å½“å‰è‚¡ä»· **$207.32** å¤„äº **çŸ­æœŸè¶…å–ä¿®å¤é˜¶æ®µ**ã€‚æ•´ä½“ç ”åˆ¤ä¸º **ä¸­æ€§åå¤šï¼Œç­‰å¾…æŠ€æœ¯ç¡®è®¤**ã€‚\n\n### 2. ç»“æ„åŒ–æ“ä½œè®¡åˆ’ (Action Plan)\n* **é¦–æ‰¹å»ºä»“ (Position 1):** **$201.23** (è‹¥å›è°ƒè‡³æ”¯æ’‘ä½ S1ï¼Œå»ºè®®ä»“ä½ **2.0 è‚¡**)\n* **æ¬¡æ‰¹åŠ ç  (Position 2):** **$196.53** (è‹¥è§¦åŠæ”¯æ’‘ä½ S2ï¼Œå»ºè®®ä»“ä½ **2.0 è‚¡**)\n* **æ­¢æŸæ–¹æ¡ˆ (Stop Loss):** **$187.80** (å¤±æ•ˆæ¡ä»¶ï¼šè‹¥æ”¶ç›˜ä»·è¿ç»­ä¸¤æ—¥ä½äºå¸ƒæ—å¸¦ä¸‹è½¨ï¼Œåˆ™æŠ€æœ¯æ”¯æ’‘å¤±æ•ˆ)\n* **æ­¢ç›ˆç›®æ ‡ (Target):** **ç¬¬ä¸€ç›®æ ‡ $221.14**ï¼ˆMA50 é˜»åŠ›ï¼‰ï¼Œ**ç¬¬äºŒç›®æ ‡ $230.89**ï¼ˆå¸ƒæ—ä¸­è½¨ï¼‰ã€‚\n\n### 3. å¤šç»´é€»è¾‘æ”¯æ’‘ (Rationale)\n* **æŠ€æœ¯é¢:** RSI è¶…å–ï¼ˆ30.99ï¼‰ä¸ KDJ ä½ä½é‡‘å‰æ½œåŠ›å½¢æˆçŸ­æœŸåå¼¹ä¿¡å·ï¼›MACD è´Ÿå€¼ä½†æ–œç‡è½¬æ­£é¢„ç¤ºä¸‹è·ŒåŠ¨èƒ½è¡°å‡ï¼›å¸ƒæ—å¸¦ä¸‹è½¨ï¼ˆ$187.80ï¼‰æä¾›å¼ºæ”¯æ’‘ã€‚\n* **åŸºæœ¬é¢/æƒ…ç»ªé¢:** Forward PE 19.46 åæ˜ å¸‚åœºè®¤å¯ç›ˆåˆ©å¢é•¿æ½œåŠ›ï¼›æ•°æ®ä¸­å¿ƒåˆä½œåˆ©å¥½ä¸šåŠ¡æ‹“å±•ï¼›åŠå¯¼ä½“è¡Œä¸šç«äº‰æ ¼å±€å˜åŒ–ï¼ˆè‹±ç‰¹å°”ç–²è½¯ï¼‰æˆ–å¸¦æ¥ä»½é¢æå‡æœºä¼šã€‚"
}
2026-02-15 21:20:55,417 - app.api.v1.endpoints.analysis - INFO - âœ… Synced AI RRR (1.21) to MarketDataCache for AMD (Strategy Locked)
2026-02-15 21:20:55,418 - api_logger - INFO - rid=/api/analysis/AMD method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=18785.66ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:60590 - "POST /api/analysis/AMD?force=true HTTP/1.1" 200 OK
2026-02-15 21:20:55,431 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.89ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:60590 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'app/services/ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [70727]
2026-02-15 21:25:19,478 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
INFO:     Started server process [72019]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/services/ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [72019]
2026-02-15 21:25:21,101 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
INFO:     Started server process [72021]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/services/ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [72021]
2026-02-15 21:32:46,091 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
INFO:     Started server process [72108]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/services/ai_service.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [72108]
2026-02-15 21:33:33,458 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
Process SpawnProcess-5:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 320, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1398, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1371, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1342, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 938, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 759, in exec_module
  File "<frozen importlib._bootstrap>", line 491, in _call_with_frames_removed
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/main.py", line 114, in <module>
    from app.api.v1.api import api_router
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import auth, portfolio, analysis, user, stock
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/endpoints/analysis.py", line 6, in <module>
    from app.services.ai_service import AIService
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/services/ai_service.py", line 135
    @staticmethod
IndentationError: unexpected indent
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/analysis.py'. Reloading...
2026-02-15 21:34:29,815 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
Process SpawnProcess-6:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 320, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1398, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1371, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1342, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 938, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 759, in exec_module
  File "<frozen importlib._bootstrap>", line 491, in _call_with_frames_removed
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/main.py", line 114, in <module>
    from app.api.v1.api import api_router
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import auth, portfolio, analysis, user, stock
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/endpoints/analysis.py", line 6, in <module>
    from app.services.ai_service import AIService
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/services/ai_service.py", line 135
    @staticmethod
IndentationError: unexpected indent
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/analysis.py'. Reloading...
2026-02-15 21:39:00,862 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
Process SpawnProcess-7:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 320, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1398, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1371, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1342, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 938, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 759, in exec_module
  File "<frozen importlib._bootstrap>", line 491, in _call_with_frames_removed
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/main.py", line 114, in <module>
    from app.api.v1.api import api_router
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import auth, portfolio, analysis, user, stock
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/endpoints/analysis.py", line 6, in <module>
    from app.services.ai_service import AIService
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/services/ai_service.py", line 135
    @staticmethod
IndentationError: unexpected indent
WARNING:  StatReload detected changes in 'app/services/ai_service.py'. Reloading...
2026-02-15 21:39:55,325 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
Process SpawnProcess-8:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 320, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1398, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1371, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1342, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 938, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 759, in exec_module
  File "<frozen importlib._bootstrap>", line 491, in _call_with_frames_removed
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/main.py", line 114, in <module>
    from app.api.v1.api import api_router
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import auth, portfolio, analysis, user, stock
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/endpoints/analysis.py", line 6, in <module>
    from app.services.ai_service import AIService
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/services/ai_service.py", line 135
    @staticmethod
IndentationError: unexpected indent
 GET /?ticker=AMD 200 in 53ms (compile: 13ms, render: 40ms)
 GET /?ticker=AMD 200 in 46ms (compile: 4ms, render: 42ms)
 GET /?ticker=AMD 200 in 44ms (compile: 6ms, render: 37ms)
 GET /?ticker=AMD 200 in 20ms (compile: 1040Âµs, render: 19ms)
 GET /?ticker=AMD 200 in 24ms (compile: 2ms, render: 22ms)
 GET /?ticker=AMD 200 in 21ms (compile: 1727Âµs, render: 19ms)
 GET /?ticker=AMD 200 in 23ms (compile: 1867Âµs, render: 21ms)
 GET /?ticker=AMD 200 in 14ms (compile: 1221Âµs, render: 13ms)
WARNING:  StatReload detected changes in 'app/services/ai_service.py'. Reloading...
2026-02-15 21:43:41,437 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
Process SpawnProcess-9:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 320, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1398, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1371, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1342, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 938, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 759, in exec_module
  File "<frozen importlib._bootstrap>", line 491, in _call_with_frames_removed
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/main.py", line 114, in <module>
    from app.api.v1.api import api_router
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/api.py", line 2, in <module>
    from app.api.v1.endpoints import auth, portfolio, analysis, user, stock
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/api/v1/endpoints/analysis.py", line 6, in <module>
    from app.services.ai_service import AIService
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/services/ai_service.py", line 135
    @staticmethod
IndentationError: unexpected indent
WARNING:  StatReload detected changes in 'app/services/ai_service.py'. Reloading...
2026-02-15 21:44:31,379 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
INFO:     Started server process [72653]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:63314 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63315 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63316 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63321 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63322 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63323 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63314 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63315 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63316 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63321 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63322 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63323 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63314 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63315 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63316 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63321 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63322 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63323 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63314 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63315 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63316 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63321 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:63322 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:63323 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-15 21:44:31,542 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=27.46ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:63323 - "GET /api/analysis/AMD HTTP/1.1" 200 OK
2026-02-15 21:44:31,547 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.26ms
INFO:     127.0.0.1:63322 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-15 21:44:31,548 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.85ms
INFO:     127.0.0.1:63321 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
INFO:     127.0.0.1:63321 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
2026-02-15 21:44:31,554 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=0.95ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:63321 - "GET /api/user/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:63321 - "OPTIONS /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:44:32,538 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=864.79ms
INFO:     127.0.0.1:63321 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
 GET /sw.js 404 in 43ms (compile: 14ms, render: 29ms)
 GET /?ticker=AMD 200 in 85ms (compile: 13ms, render: 72ms)
2026-02-15 21:49:54,974 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.15ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64426 - "GET /api/analysis/AMD HTTP/1.1" 200 OK
2026-02-15 21:49:54,976 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.67ms
INFO:     127.0.0.1:64429 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-15 21:49:54,978 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.79ms
INFO:     127.0.0.1:64428 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-15 21:49:54,981 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1.01ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64428 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-15 21:49:55,422 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=353.45ms
INFO:     127.0.0.1:64428 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
 GET /sw.js 404 in 35ms (compile: 6ms, render: 29ms)
 GET /?ticker=SLV 200 in 19ms (compile: 4ms, render: 15ms)
INFO:     127.0.0.1:64437 - "OPTIONS /api/stocks/SLV/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:64439 - "OPTIONS /api/analysis/SLV HTTP/1.1" 200 OK
INFO:     127.0.0.1:64441 - "OPTIONS /api/stocks/SLV/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:64446 - "OPTIONS /api/portfolio/SLV/news HTTP/1.1" 200 OK
2026-02-15 21:50:03,553 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=20.80ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64437 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-15 21:50:03,554 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=26.30ms
INFO:     127.0.0.1:64444 - "GET /api/analysis/AMD HTTP/1.1" 200 OK
2026-02-15 21:50:03,556 - api_logger - INFO - rid=/api/analysis/SLV method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=23.37ms
INFO:     127.0.0.1:64441 - "GET /api/analysis/SLV HTTP/1.1" 404 Not Found
2026-02-15 21:50:03,559 - api_logger - INFO - rid=/api/portfolio/SLV/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=22.02ms
INFO:     127.0.0.1:64446 - "GET /api/portfolio/SLV/news HTTP/1.1" 200 OK
2026-02-15 21:50:03,579 - api_logger - INFO - rid=/api/portfolio/SLV/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.34ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64441 - "GET /api/portfolio/SLV/news HTTP/1.1" 200 OK
2026-02-15 21:50:03,580 - api_logger - INFO - rid=/api/analysis/SLV method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.67ms
INFO:     127.0.0.1:64446 - "GET /api/analysis/SLV HTTP/1.1" 404 Not Found
2026-02-15 21:50:03,834 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=307.18ms
INFO:     127.0.0.1:64443 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:50:03,879 - api_logger - INFO - rid=/api/stocks/SLV/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=346.10ms
INFO:     127.0.0.1:64439 - "GET /api/stocks/SLV/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:50:03,950 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=115.23ms
INFO:     127.0.0.1:64446 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:50:03,993 - api_logger - INFO - rid=/api/stocks/SLV/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=113.40ms
INFO:     127.0.0.1:64443 - "GET /api/stocks/SLV/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:50:04,213 - api_logger - INFO - rid=/api/stocks/SLV/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=217.97ms
INFO:     127.0.0.1:64446 - "GET /api/stocks/SLV/history?period=1y HTTP/1.1" 200 OK
2026-02-15 21:50:04,341 - api_logger - INFO - rid=/api/stocks/SLV/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=126.22ms
INFO:     127.0.0.1:64443 - "GET /api/stocks/SLV/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:64459 - "OPTIONS /api/analysis/SLV?force=true HTTP/1.1" 200 OK
2026-02-15 21:50:11,201 - app.api.v1.endpoints.analysis - INFO - Preparing AI analysis for SLV. Market Data keys present: ['current_price', 'change_percent', 'rsi_14', 'ma_20', 'ma_50', 'ma_200', 'macd_val', 'macd_hist', 'macd_hist_slope', 'bb_upper', 'bb_middle', 'bb_lower', 'k_line', 'd_line', 'j_line', 'atr_14', 'adx_14', 'resistance_1', 'resistance_2', 'support_1', 'support_2', 'market_status']
2026-02-15 21:50:11,202 - api_logger - ERROR - Middleware caught unhandled error: UnboundLocalError: cannot access local variable 'datetime' where it is not associated with a value
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64459 - "POST /api/analysis/SLV?force=true HTTP/1.1" 500 Internal Server Error
2026-02-15 21:50:12,884 - app.api.v1.endpoints.analysis - INFO - Preparing AI analysis for SLV. Market Data keys present: ['current_price', 'change_percent', 'rsi_14', 'ma_20', 'ma_50', 'ma_200', 'macd_val', 'macd_hist', 'macd_hist_slope', 'bb_upper', 'bb_middle', 'bb_lower', 'k_line', 'd_line', 'j_line', 'atr_14', 'adx_14', 'resistance_1', 'resistance_2', 'support_1', 'support_2', 'market_status']
2026-02-15 21:50:12,886 - api_logger - ERROR - Middleware caught unhandled error: UnboundLocalError: cannot access local variable 'datetime' where it is not associated with a value
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64465 - "POST /api/analysis/SLV?force=true HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [72653]
2026-02-15 21:50:14,713 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
2026-02-15 21:50:14,812 - app.api.v1.endpoints.analysis - INFO - PHASE: Analysis router module importing...
INFO:     Started server process [74367]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-02-15 21:50:16,252 - app.api.v1.endpoints.analysis - INFO - Preparing AI analysis for SLV. Market Data keys present: ['current_price', 'change_percent', 'rsi_14', 'ma_20', 'ma_50', 'ma_200', 'macd_val', 'macd_hist', 'macd_hist_slope', 'bb_upper', 'bb_middle', 'bb_lower', 'k_line', 'd_line', 'j_line', 'atr_14', 'adx_14', 'resistance_1', 'resistance_2', 'support_1', 'support_2', 'market_status']
2026-02-15 21:50:16,254 - api_logger - ERROR - Middleware caught unhandled error: UnboundLocalError: cannot access local variable 'datetime' where it is not associated with a value
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64475 - "POST /api/analysis/SLV?force=true HTTP/1.1" 500 Internal Server Error
2026-02-15 21:50:18,278 - api_logger - INFO - rid=/api/analysis/SLV method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.48ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64492 - "GET /api/analysis/SLV HTTP/1.1" 404 Not Found
2026-02-15 21:50:22,298 - api_logger - INFO - rid=/api/analysis/SLV method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.65ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64495 - "GET /api/analysis/SLV HTTP/1.1" 404 Not Found
2026-02-15 21:50:28,309 - api_logger - INFO - rid=/api/analysis/SLV method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.55ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64505 - "GET /api/analysis/SLV HTTP/1.1" 404 Not Found
2026-02-15 21:50:36,321 - api_logger - INFO - rid=/api/analysis/SLV method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.38ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64509 - "GET /api/analysis/SLV HTTP/1.1" 404 Not Found
2026-02-15 21:50:46,340 - api_logger - INFO - rid=/api/analysis/SLV method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.78ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1771242407, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
INFO:     127.0.0.1:64517 - "GET /api/analysis/SLV HTTP/1.1" 404 Not Found
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/stock.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [74367]
2026-02-15 21:51:23,290 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
2026-02-15 21:51:23,384 - app.api.v1.endpoints.analysis - INFO - PHASE: Analysis router module importing...
2026-02-15 21:51:23,388 - app.api.v1.endpoints.stock - INFO - PHASE: Stock router module importing...
INFO:     Started server process [74655]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [74655]
2026-02-15 21:52:23,212 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
2026-02-15 21:52:23,312 - app.api.v1.endpoints.analysis - INFO - PHASE: Analysis router module importing...
2026-02-15 21:52:23,316 - app.api.v1.endpoints.stock - INFO - PHASE: Stock router module importing...
2026-02-15 21:52:23,323 - api_logger - INFO - PHASE: API Router imported successfully.
INFO:     Started server process [74935]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-02-15 21:54:34,679 - api_logger - INFO - rid=/api/health method=GET status_code=404 user_id=anonymous time=0.68ms
INFO:     127.0.0.1:51984 - "GET /api/health HTTP/1.1" 404 Not Found
2026-02-15 21:54:57,226 - api_logger - INFO - rid=/health method=GET status_code=200 user_id=anonymous time=1.58ms
INFO:     127.0.0.1:53033 - "GET /health HTTP/1.1" 200 OK
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/analysis.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [74935]
2026-02-15 21:55:22,661 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
2026-02-15 21:55:22,764 - app.api.v1.endpoints.stock - INFO - PHASE: Stock router module importing...
2026-02-15 21:55:22,772 - api_logger - INFO - PHASE: API Router imported successfully.
INFO:     Started server process [75774]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/api/v1/endpoints/stock.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75774]
2026-02-15 21:55:34,197 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
2026-02-15 21:55:34,304 - api_logger - INFO - PHASE: API Router imported successfully.
INFO:     Started server process [75778]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75778]
2026-02-15 21:55:46,238 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
INFO:     Started server process [75787]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [75787]
INFO:     Stopping reloader process [70723]
