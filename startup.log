ðŸš€ Starting AI Smart Investment Advisor...
ðŸ“ˆ Starting Backend (FastAPI) on port 8000...
ðŸ’» Starting Frontend (Next.js) on port 3000...
INFO:     Will watch for changes in these directories: ['/Users/breeze/Dev/ai-stock-advisor/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [65340] using StatReload
âœ… Services are running!
   - Frontend: http://localhost:3000
   - Backend:  http://localhost:8000/docs
Press CTRL+C to stop.

> frontend@0.1.0 dev
> next dev

2026-02-09 15:53:57,975 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
â–² Next.js 16.1.2 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://10.10.10.247:3000

âœ“ Starting...
INFO:     Started server process [65343]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
âœ“ Ready in 448ms
 GET /register 200 in 450ms (compile: 341ms, render: 109ms)
 GET /login 200 in 356ms (compile: 324ms, render: 32ms)
2026-02-09 15:54:00,171 - api_logger - INFO - rid=/api/health method=HEAD status_code=404 user_id=anonymous time=0.54ms
INFO:     127.0.0.1:58047 - "HEAD /api/health HTTP/1.1" 404 Not Found
 HEAD / 200 in 77ms (compile: 13ms, render: 64ms)
 GET /sw.js 404 in 71ms (compile: 46ms, render: 25ms)
2026-02-09 15:54:14,558 - api_logger - INFO - rid=/health method=GET status_code=200 user_id=anonymous time=0.51ms
INFO:     127.0.0.1:58074 - "GET /health HTTP/1.1" 200 OK
2026-02-09 15:54:14,590 - api_logger - INFO - rid=/ method=GET status_code=200 user_id=anonymous time=0.30ms
INFO:     127.0.0.1:58075 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:58109 - "OPTIONS /api/auth/register HTTP/1.1" 200 OK
2026-02-09 15:54:26,336 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:54:26,336 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:54:26,348 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 15:54:26,348 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 15:54:26,348 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('test_new_final@example.com',)
2026-02-09 15:54:26,348 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('test_new_final@example.com',)
2026-02-09 15:54:26,629 INFO sqlalchemy.engine.Engine INSERT INTO users (id, email, hashed_password, is_active, membership_tier, api_key_gemini, api_key_deepseek, api_key_siliconflow, preferred_data_source, preferred_ai_model, created_at, last_login) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 15:54:26,629 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (id, email, hashed_password, is_active, membership_tier, api_key_gemini, api_key_deepseek, api_key_siliconflow, preferred_data_source, preferred_ai_model, created_at, last_login) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 15:54:26,630 INFO sqlalchemy.engine.Engine [generated in 0.00060s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', 'test_new_final@example.com', '$2b$12$Ai3lDuIb7AwgQ0spJ.bZY.xVMVazjrQmy77yBw3NL4DoDa3qmd1mS', 1, 'FREE', None, None, None, 'ALPHA_VANTAGE', 'gemini-1.5-flash', '2026-02-09 07:54:26.629852', None)
2026-02-09 15:54:26,630 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', 'test_new_final@example.com', '$2b$12$Ai3lDuIb7AwgQ0spJ.bZY.xVMVazjrQmy77yBw3NL4DoDa3qmd1mS', 1, 'FREE', None, None, None, 'ALPHA_VANTAGE', 'gemini-1.5-flash', '2026-02-09 07:54:26.629852', None)
2026-02-09 15:54:26,632 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 15:54:26,632 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 15:54:26,633 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:54:26,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:54:26,634 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:54:26,634 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:54:26,634 INFO sqlalchemy.engine.Engine [generated in 0.00007s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,634 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,641 - api_logger - INFO - rid=/api/auth/register method=POST status_code=200 user_id=anonymous time=356.31ms
INFO:     127.0.0.1:58109 - "POST /api/auth/register HTTP/1.1" 200 OK
2026-02-09 15:54:26,643 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:54:26,643 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET / 200 in 23ms (compile: 4ms, render: 19ms)
INFO:     127.0.0.1:58109 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 15:54:26,783 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:54:26,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:54:26,786 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:54:26,786 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:54:26,786 INFO sqlalchemy.engine.Engine [generated in 0.00078s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,786 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,789 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:54:26,789 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:54:26,789 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,789 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,791 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=15.07ms
INFO:     127.0.0.1:58109 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 15:54:26,792 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:54:26,792 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 15:54:26,793 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:54:26,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:54:26,793 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:54:26,793 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:54:26,793 INFO sqlalchemy.engine.Engine [cached since 0.008225s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,793 - sqlalchemy.engine.Engine - INFO - [cached since 0.008225s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,794 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:54:26,794 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:54:26,794 INFO sqlalchemy.engine.Engine [cached since 0.004632s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,794 - sqlalchemy.engine.Engine - INFO - [cached since 0.004632s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 15:54:26,794 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=2.05ms
INFO:     127.0.0.1:58109 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 15:54:26,795 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:54:26,795 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:36,583 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:36,583 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:36,584 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 15:56:36,584 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 15:56:36,584 INFO sqlalchemy.engine.Engine [cached since 130.2s ago] ('test@qq.com',)
2026-02-09 15:56:36,584 - sqlalchemy.engine.Engine - INFO - [cached since 130.2s ago] ('test@qq.com',)
2026-02-09 15:56:36,789 - api_logger - INFO - rid=/api/auth/login method=POST status_code=200 user_id=anonymous time=214.37ms
INFO:     127.0.0.1:58327 - "POST /api/auth/login HTTP/1.1" 200 OK
2026-02-09 15:56:36,790 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:36,790 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET / 200 in 13ms (compile: 4ms, render: 9ms)
INFO:     127.0.0.1:58327 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:36,899 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:36,899 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:36,899 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,899 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,899 INFO sqlalchemy.engine.Engine [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,899 - sqlalchemy.engine.Engine - INFO - [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,901 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:56:36,901 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:56:36,901 INFO sqlalchemy.engine.Engine [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,901 - sqlalchemy.engine.Engine - INFO - [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,905 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.63ms
INFO:     127.0.0.1:58334 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 15:56:36,906 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:36,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:36,911 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:36,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:36,911 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,911 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,911 INFO sqlalchemy.engine.Engine [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,911 - sqlalchemy.engine.Engine - INFO - [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,912 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:56:36,912 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 15:56:36,913 INFO sqlalchemy.engine.Engine [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,913 - sqlalchemy.engine.Engine - INFO - [cached since 130.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,916 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.79ms
INFO:     127.0.0.1:58327 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 15:56:36,917 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:36,917 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET /?ticker=002050 200 in 13ms (compile: 3ms, render: 9ms)
INFO:     127.0.0.1:58327 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58335 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:58336 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:36,964 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:36,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:36,966 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,966 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,966 INFO sqlalchemy.engine.Engine [cached since 130.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,966 - sqlalchemy.engine.Engine - INFO - [cached since 130.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:36,968 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:36,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:36,969 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,969 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:36,969 INFO sqlalchemy.engine.Engine [cached since 130.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:36,969 - sqlalchemy.engine.Engine - INFO - [cached since 130.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
 GET /?ticker=002050 200 in 14ms (compile: 5ms, render: 9ms)
2026-02-09 15:56:36,974 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:36,974 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:36,974 INFO sqlalchemy.engine.Engine [generated in 0.00073s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:36,974 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:36,976 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:36,976 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:36,976 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('002050', 20, 0)
2026-02-09 15:56:36,976 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('002050', 20, 0)
2026-02-09 15:56:36,977 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=16.84ms
INFO:     127.0.0.1:58327 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 15:56:36,978 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:36,978 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:36,979 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.30ms
INFO:     127.0.0.1:58336 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 15:56:36,980 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:36,980 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:37,575 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=614.90ms
INFO:     127.0.0.1:58334 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:37,877 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=297.52ms
INFO:     127.0.0.1:58336 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002970 200 in 17ms (compile: 5ms, render: 13ms)
INFO:     127.0.0.1:58336 - "OPTIONS /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:58334 - "OPTIONS /api/analysis/002970 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58327 - "OPTIONS /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:58335 - "OPTIONS /api/portfolio/002970/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:38,796 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:38,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:38,796 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,796 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,797 INFO sqlalchemy.engine.Engine [cached since 132s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,797 - sqlalchemy.engine.Engine - INFO - [cached since 132s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:38,797 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:38,797 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:38,797 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,797 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,797 INFO sqlalchemy.engine.Engine [cached since 132s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,797 - sqlalchemy.engine.Engine - INFO - [cached since 132s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,800 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,800 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,800 INFO sqlalchemy.engine.Engine [cached since 1.826s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002970', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:38,800 - sqlalchemy.engine.Engine - INFO - [cached since 1.826s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002970', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:38,800 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,800 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,801 INFO sqlalchemy.engine.Engine [cached since 1.825s ago] ('002970', 20, 0)
2026-02-09 15:56:38,801 - sqlalchemy.engine.Engine - INFO - [cached since 1.825s ago] ('002970', 20, 0)
2026-02-09 15:56:38,803 - api_logger - INFO - rid=/api/portfolio/002970/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.85ms
INFO:     127.0.0.1:58335 - "GET /api/portfolio/002970/news HTTP/1.1" 200 OK
2026-02-09 15:56:38,804 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:38,804 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:38,805 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:38,805 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:38,805 - api_logger - INFO - rid=/api/analysis/002970 method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.07ms
INFO:     127.0.0.1:58327 - "GET /api/analysis/002970 HTTP/1.1" 404 Not Found
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:38,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:38,859 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:38,861 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,861 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,861 INFO sqlalchemy.engine.Engine [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,861 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:38,862 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:38,862 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:38,862 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,862 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,862 INFO sqlalchemy.engine.Engine [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,862 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,863 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,863 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,863 INFO sqlalchemy.engine.Engine [cached since 1.887s ago] ('002050', 20, 0)
2026-02-09 15:56:38,863 - sqlalchemy.engine.Engine - INFO - [cached since 1.887s ago] ('002050', 20, 0)
2026-02-09 15:56:38,863 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,863 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,863 INFO sqlalchemy.engine.Engine [cached since 1.889s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:38,863 - sqlalchemy.engine.Engine - INFO - [cached since 1.889s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:38,864 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.03ms
INFO:     127.0.0.1:58335 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 15:56:38,865 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:38,865 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:38,865 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.00ms
INFO:     127.0.0.1:58336 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 15:56:38,866 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:38,866 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:38,915 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:38,915 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:38,915 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,915 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,915 INFO sqlalchemy.engine.Engine [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,915 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:38,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:38,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:38,916 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,916 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:38,916 INFO sqlalchemy.engine.Engine [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,916 - sqlalchemy.engine.Engine - INFO - [cached since 132.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:38,917 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,917 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,918 INFO sqlalchemy.engine.Engine [cached since 1.944s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002970', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:38,918 - sqlalchemy.engine.Engine - INFO - [cached since 1.944s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002970', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:38,918 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,918 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:38,919 INFO sqlalchemy.engine.Engine [cached since 1.943s ago] ('002970', 20, 0)
2026-02-09 15:56:38,919 - sqlalchemy.engine.Engine - INFO - [cached since 1.943s ago] ('002970', 20, 0)
2026-02-09 15:56:38,920 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:38,920 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:38,921 - api_logger - INFO - rid=/api/portfolio/002970/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.49ms
INFO:     127.0.0.1:58335 - "GET /api/portfolio/002970/news HTTP/1.1" 200 OK
2026-02-09 15:56:38,921 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:38,921 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:38,921 - api_logger - INFO - rid=/api/analysis/002970 method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.20ms
INFO:     127.0.0.1:58336 - "GET /api/analysis/002970 HTTP/1.1" 404 Not Found
2026-02-09 15:56:39,144 - api_logger - INFO - rid=/api/stocks/002970/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=351.04ms
INFO:     127.0.0.1:58334 - "GET /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:39,168 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=313.92ms
INFO:     127.0.0.1:58327 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:39,436 - api_logger - INFO - rid=/api/stocks/002970/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=283.01ms
INFO:     127.0.0.1:58384 - "GET /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:39,448 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=279.90ms
INFO:     127.0.0.1:58334 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:39,680 - api_logger - INFO - rid=/api/stocks/002970/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=240.15ms
INFO:     127.0.0.1:58327 - "GET /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:39,920 - api_logger - INFO - rid=/api/stocks/002970/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=238.33ms
INFO:     127.0.0.1:58334 - "GET /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 15ms (compile: 4ms, render: 11ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:40,431 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:40,431 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:40,432 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,432 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,432 INFO sqlalchemy.engine.Engine [cached since 133.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,432 - sqlalchemy.engine.Engine - INFO - [cached since 133.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:40,433 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:40,433 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:40,434 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,434 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,435 INFO sqlalchemy.engine.Engine [cached since 133.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,435 - sqlalchemy.engine.Engine - INFO - [cached since 133.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,437 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,437 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,437 INFO sqlalchemy.engine.Engine [cached since 3.461s ago] ('002050', 20, 0)
2026-02-09 15:56:40,437 - sqlalchemy.engine.Engine - INFO - [cached since 3.461s ago] ('002050', 20, 0)
2026-02-09 15:56:40,437 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,437 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,437 INFO sqlalchemy.engine.Engine [cached since 3.463s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:40,437 - sqlalchemy.engine.Engine - INFO - [cached since 3.463s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:40,439 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.06ms
INFO:     127.0.0.1:58327 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 15:56:40,440 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:40,440 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:40,441 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.22ms
INFO:     127.0.0.1:58384 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 15:56:40,442 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:40,442 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:40,498 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:40,498 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:40,498 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,498 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,499 INFO sqlalchemy.engine.Engine [cached since 133.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,499 - sqlalchemy.engine.Engine - INFO - [cached since 133.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:40,500 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:40,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:40,501 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,501 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,501 INFO sqlalchemy.engine.Engine [cached since 133.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,501 - sqlalchemy.engine.Engine - INFO - [cached since 133.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,503 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,503 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,504 INFO sqlalchemy.engine.Engine [cached since 3.53s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002970', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:40,504 - sqlalchemy.engine.Engine - INFO - [cached since 3.53s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002970', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:40,505 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,505 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,505 INFO sqlalchemy.engine.Engine [cached since 3.529s ago] ('002970', 20, 0)
2026-02-09 15:56:40,505 - sqlalchemy.engine.Engine - INFO - [cached since 3.529s ago] ('002970', 20, 0)
2026-02-09 15:56:40,506 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:40,506 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:40,509 - api_logger - INFO - rid=/api/analysis/002970 method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.12ms
INFO:     127.0.0.1:58327 - "GET /api/analysis/002970 HTTP/1.1" 404 Not Found
2026-02-09 15:56:40,509 - api_logger - INFO - rid=/api/portfolio/002970/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.07ms
INFO:     127.0.0.1:58439 - "GET /api/portfolio/002970/news HTTP/1.1" 200 OK
2026-02-09 15:56:40,510 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:40,510 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:40,547 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:40,547 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:40,547 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,547 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,547 INFO sqlalchemy.engine.Engine [cached since 133.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,547 - sqlalchemy.engine.Engine - INFO - [cached since 133.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 15:56:40,551 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 15:56:40,551 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 15:56:40,551 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,551 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 15:56:40,552 INFO sqlalchemy.engine.Engine [cached since 133.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,552 - sqlalchemy.engine.Engine - INFO - [cached since 133.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 15:56:40,553 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,553 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,553 INFO sqlalchemy.engine.Engine [cached since 3.58s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:40,553 - sqlalchemy.engine.Engine - INFO - [cached since 3.58s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 15:56:40,556 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,556 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 15:56:40,556 INFO sqlalchemy.engine.Engine [cached since 3.58s ago] ('002050', 20, 0)
2026-02-09 15:56:40,556 - sqlalchemy.engine.Engine - INFO - [cached since 3.58s ago] ('002050', 20, 0)
2026-02-09 15:56:40,558 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.63ms
INFO:     127.0.0.1:58439 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 15:56:40,559 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:40,559 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:40,560 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.66ms
INFO:     127.0.0.1:58327 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 15:56:40,560 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 15:56:40,560 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 15:56:40,704 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=275.27ms
INFO:     127.0.0.1:58334 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:40,730 - api_logger - INFO - rid=/api/stocks/002970/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=232.65ms
INFO:     127.0.0.1:58384 - "GET /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:41,001 - api_logger - INFO - rid=/api/stocks/002970/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=269.38ms
INFO:     127.0.0.1:58334 - "GET /api/stocks/002970/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:41,012 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=307.61ms
INFO:     127.0.0.1:58327 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:41,266 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=252.28ms
INFO:     127.0.0.1:58334 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 15:56:41,688 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=421.32ms
INFO:     127.0.0.1:58327 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
âœ“ Compiled in 542ms
INFO:     127.0.0.1:59005 - "OPTIONS /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59006 - "OPTIONS /api/analysis/AAPL HTTP/1.1" 200 OK
INFO:     127.0.0.1:59007 - "OPTIONS /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59008 - "OPTIONS /api/portfolio/AAPL/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:46,965 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:46,965 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:46,968 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:46,968 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:46,969 INFO sqlalchemy.engine.Engine [cached since 440.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:46,969 - sqlalchemy.engine.Engine - INFO - [cached since 440.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:46,970 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:46,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:46,971 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:46,971 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:46,971 INFO sqlalchemy.engine.Engine [cached since 440.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:46,971 - sqlalchemy.engine.Engine - INFO - [cached since 440.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:46,978 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:46,978 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:46,979 INFO sqlalchemy.engine.Engine [cached since 310s ago] ('AAPL', 20, 0)
2026-02-09 16:01:46,979 - sqlalchemy.engine.Engine - INFO - [cached since 310s ago] ('AAPL', 20, 0)
2026-02-09 16:01:46,982 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:46,982 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:46,985 INFO sqlalchemy.engine.Engine [cached since 310s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:46,985 - sqlalchemy.engine.Engine - INFO - [cached since 310s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', 'qwen-3-vl-thinking', 1, 0)
 GET /?ticker=AAPL 200 in 107ms (compile: 68ms, render: 39ms)
2026-02-09 16:01:47,001 - api_logger - INFO - rid=/api/analysis/AAPL method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=40.76ms
INFO:     127.0.0.1:59006 - "GET /api/analysis/AAPL HTTP/1.1" 200 OK
2026-02-09 16:01:47,003 - api_logger - INFO - rid=/api/portfolio/AAPL/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=42.74ms
INFO:     127.0.0.1:59008 - "GET /api/portfolio/AAPL/news HTTP/1.1" 200 OK
2026-02-09 16:01:47,004 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:47,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:47,008 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:47,008 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:47,013 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:47,013 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:47,028 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,028 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,028 INFO sqlalchemy.engine.Engine [cached since 440.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:47,028 - sqlalchemy.engine.Engine - INFO - [cached since 440.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:47,042 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:47,042 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:47,043 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,043 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,043 INFO sqlalchemy.engine.Engine [cached since 440.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:47,043 - sqlalchemy.engine.Engine - INFO - [cached since 440.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:47,045 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,045 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,045 INFO sqlalchemy.engine.Engine [cached since 310.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:47,045 - sqlalchemy.engine.Engine - INFO - [cached since 310.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:47,047 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,047 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,047 INFO sqlalchemy.engine.Engine [cached since 310.1s ago] ('002050', 20, 0)
2026-02-09 16:01:47,047 - sqlalchemy.engine.Engine - INFO - [cached since 310.1s ago] ('002050', 20, 0)
2026-02-09 16:01:47,048 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=35.86ms
INFO:     127.0.0.1:59006 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:01:47,049 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:47,049 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:47,051 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=38.91ms
INFO:     127.0.0.1:59005 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:01:47,052 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:47,052 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:47,113 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:47,113 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:47,113 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,113 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,113 INFO sqlalchemy.engine.Engine [cached since 440.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:47,113 - sqlalchemy.engine.Engine - INFO - [cached since 440.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:47,114 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:47,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:47,114 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,114 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:47,114 INFO sqlalchemy.engine.Engine [cached since 440.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:47,114 - sqlalchemy.engine.Engine - INFO - [cached since 440.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:47,115 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,115 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,115 INFO sqlalchemy.engine.Engine [cached since 310.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:47,115 - sqlalchemy.engine.Engine - INFO - [cached since 310.1s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:47,116 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,116 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:47,116 INFO sqlalchemy.engine.Engine [cached since 310.1s ago] ('AAPL', 20, 0)
2026-02-09 16:01:47,116 - sqlalchemy.engine.Engine - INFO - [cached since 310.1s ago] ('AAPL', 20, 0)
2026-02-09 16:01:47,118 - api_logger - INFO - rid=/api/analysis/AAPL method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.30ms
INFO:     127.0.0.1:59005 - "GET /api/analysis/AAPL HTTP/1.1" 200 OK
2026-02-09 16:01:47,134 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:47,134 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:47,134 - api_logger - INFO - rid=/api/portfolio/AAPL/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=21.42ms
INFO:     127.0.0.1:59006 - "GET /api/portfolio/AAPL/news HTTP/1.1" 200 OK
2026-02-09 16:01:47,135 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:47,135 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:47,594 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=583.34ms
INFO:     127.0.0.1:59008 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:47,949 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=998.93ms
INFO:     127.0.0.1:59007 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:48,028 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=432.77ms
INFO:     127.0.0.1:59006 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:48,072 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=121.70ms
INFO:     127.0.0.1:59008 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:48,457 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=384.64ms
INFO:     127.0.0.1:59006 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:48,851 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=391.47ms
INFO:     127.0.0.1:59008 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 19ms (compile: 3ms, render: 15ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:52,149 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:52,149 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:52,150 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,150 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,150 INFO sqlalchemy.engine.Engine [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,150 - sqlalchemy.engine.Engine - INFO - [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:52,151 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:52,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:52,153 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,153 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,153 INFO sqlalchemy.engine.Engine [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,153 - sqlalchemy.engine.Engine - INFO - [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,158 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,158 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,158 INFO sqlalchemy.engine.Engine [cached since 315.2s ago] ('002050', 20, 0)
2026-02-09 16:01:52,158 - sqlalchemy.engine.Engine - INFO - [cached since 315.2s ago] ('002050', 20, 0)
2026-02-09 16:01:52,158 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,158 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,158 INFO sqlalchemy.engine.Engine [cached since 315.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:52,158 - sqlalchemy.engine.Engine - INFO - [cached since 315.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:52,159 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.54ms
INFO:     127.0.0.1:59079 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:01:52,161 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.84ms
INFO:     127.0.0.1:59080 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:01:52,162 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:52,162 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:52,163 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:52,163 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:52,216 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:52,216 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:52,218 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,218 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,218 INFO sqlalchemy.engine.Engine [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,218 - sqlalchemy.engine.Engine - INFO - [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:52,222 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:52,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:52,223 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,223 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,223 INFO sqlalchemy.engine.Engine [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,223 - sqlalchemy.engine.Engine - INFO - [cached since 445.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,224 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,224 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,224 INFO sqlalchemy.engine.Engine [cached since 315.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:52,224 - sqlalchemy.engine.Engine - INFO - [cached since 315.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AAPL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:52,224 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,224 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,224 INFO sqlalchemy.engine.Engine [cached since 315.2s ago] ('AAPL', 20, 0)
2026-02-09 16:01:52,224 - sqlalchemy.engine.Engine - INFO - [cached since 315.2s ago] ('AAPL', 20, 0)
2026-02-09 16:01:52,225 - api_logger - INFO - rid=/api/analysis/AAPL method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.80ms
INFO:     127.0.0.1:59079 - "GET /api/analysis/AAPL HTTP/1.1" 200 OK
2026-02-09 16:01:52,225 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:52,225 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:52,226 - api_logger - INFO - rid=/api/portfolio/AAPL/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.08ms
INFO:     127.0.0.1:59085 - "GET /api/portfolio/AAPL/news HTTP/1.1" 200 OK
2026-02-09 16:01:52,226 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:52,226 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:52,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:52,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:52,283 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,283 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,284 INFO sqlalchemy.engine.Engine [cached since 445.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,284 - sqlalchemy.engine.Engine - INFO - [cached since 445.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:01:52,285 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:01:52,285 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:01:52,286 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,286 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:01:52,286 INFO sqlalchemy.engine.Engine [cached since 445.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,286 - sqlalchemy.engine.Engine - INFO - [cached since 445.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:01:52,287 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,287 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,287 INFO sqlalchemy.engine.Engine [cached since 315.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:52,287 - sqlalchemy.engine.Engine - INFO - [cached since 315.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:01:52,289 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,289 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:01:52,289 INFO sqlalchemy.engine.Engine [cached since 315.3s ago] ('002050', 20, 0)
2026-02-09 16:01:52,289 - sqlalchemy.engine.Engine - INFO - [cached since 315.3s ago] ('002050', 20, 0)
2026-02-09 16:01:52,291 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=16.41ms
INFO:     127.0.0.1:59085 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:01:52,292 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:52,292 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:52,294 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.03ms
INFO:     127.0.0.1:59079 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:01:52,295 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:01:52,295 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:01:52,332 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=118.65ms
INFO:     127.0.0.1:59080 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:52,447 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=113.91ms
INFO:     127.0.0.1:59079 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:52,538 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=389.09ms
INFO:     127.0.0.1:59078 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:52,931 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=391.43ms
INFO:     127.0.0.1:59079 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:53,333 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=400.21ms
INFO:     127.0.0.1:59078 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:01:53,738 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=404.08ms
INFO:     127.0.0.1:59079 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
âœ“ Compiled in 221ms
âœ“ Compiled in 26ms
âœ“ Compiled in 89ms
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:05:21,235 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:21,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:21,239 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,239 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,239 INFO sqlalchemy.engine.Engine [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,239 - sqlalchemy.engine.Engine - INFO - [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:05:21,240 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:21,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:21,240 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,240 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,240 INFO sqlalchemy.engine.Engine [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,240 - sqlalchemy.engine.Engine - INFO - [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:05:21,241 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:21,241 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:21,241 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,241 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,241 INFO sqlalchemy.engine.Engine [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,241 - sqlalchemy.engine.Engine - INFO - [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,243 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:05:21,243 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:05:21,243 INFO sqlalchemy.engine.Engine [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,243 - sqlalchemy.engine.Engine - INFO - [cached since 654.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,244 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,244 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,244 INFO sqlalchemy.engine.Engine [cached since 524.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:05:21,244 - sqlalchemy.engine.Engine - INFO - [cached since 524.3s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:05:21,244 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,244 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,244 INFO sqlalchemy.engine.Engine [cached since 524.3s ago] ('002050', 20, 0)
2026-02-09 16:05:21,244 - sqlalchemy.engine.Engine - INFO - [cached since 524.3s ago] ('002050', 20, 0)
2026-02-09 16:05:21,246 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=21.06ms
INFO:     127.0.0.1:59439 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:05:21,247 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:21,247 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:05:21,247 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=22.43ms
INFO:     127.0.0.1:59440 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:05:21,248 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=23.38ms
INFO:     127.0.0.1:59438 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:05:21,248 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:21,248 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:05:21,248 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:21,248 - sqlalchemy.engine.Engine - INFO - ROLLBACK
âš  Fast Refresh had to perform a full reload due to a runtime error.
 GET /?ticker=002050 200 in 162ms (compile: 36ms, render: 126ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:05:21,497 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:21,497 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:21,497 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,497 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,497 INFO sqlalchemy.engine.Engine [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,497 - sqlalchemy.engine.Engine - INFO - [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:05:21,498 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:21,498 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:21,498 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,498 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,498 INFO sqlalchemy.engine.Engine [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,498 - sqlalchemy.engine.Engine - INFO - [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:05:21,499 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:21,499 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:21,499 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,499 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:21,499 INFO sqlalchemy.engine.Engine [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,499 - sqlalchemy.engine.Engine - INFO - [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,500 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,500 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,500 INFO sqlalchemy.engine.Engine [cached since 524.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:05:21,500 - sqlalchemy.engine.Engine - INFO - [cached since 524.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:05:21,500 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:05:21,500 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:05:21,500 INFO sqlalchemy.engine.Engine [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,500 - sqlalchemy.engine.Engine - INFO - [cached since 654.7s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:05:21,500 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,500 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:05:21,500 INFO sqlalchemy.engine.Engine [cached since 524.5s ago] ('002050', 20, 0)
2026-02-09 16:05:21,500 - sqlalchemy.engine.Engine - INFO - [cached since 524.5s ago] ('002050', 20, 0)
2026-02-09 16:05:21,501 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.20ms
INFO:     127.0.0.1:59440 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:05:21,502 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.93ms
INFO:     127.0.0.1:59456 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:05:21,502 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:21,502 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:05:21,503 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:21,503 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:05:21,505 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.97ms
INFO:     127.0.0.1:59439 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:05:21,505 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:21,505 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:05:21,873 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=586.55ms
2026-02-09 16:05:22,015 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=434.18ms
INFO:     127.0.0.1:59439 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
âœ“ Compiled in 47ms
 GET / 200 in 195ms (compile: 87ms, render: 108ms)
INFO:     127.0.0.1:59547 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 16:05:40,655 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:40,655 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:40,655 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:40,655 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:05:40,655 INFO sqlalchemy.engine.Engine [cached since 673.9s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:05:40,655 - sqlalchemy.engine.Engine - INFO - [cached since 673.9s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:05:40,655 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:05:40,655 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:05:40,656 INFO sqlalchemy.engine.Engine [cached since 673.9s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:05:40,656 - sqlalchemy.engine.Engine - INFO - [cached since 673.9s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:05:40,656 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=2.49ms
INFO:     127.0.0.1:59547 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:05:40,657 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:40,657 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET /sw.js 404 in 34ms (compile: 14ms, render: 20ms)
INFO:     127.0.0.1:59664 - "OPTIONS /api/portfolio/search?query=0&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,393 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:53,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:53,395 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,395 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,395 INFO sqlalchemy.engine.Engine [generated in 0.00042s] ('%0%', '%0%', 10, 0)
2026-02-09 16:05:53,395 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('%0%', '%0%', 10, 0)
INFO:     127.0.0.1:59665 - "OPTIONS /api/portfolio/search?query=00&remote=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:59666 - "OPTIONS /api/portfolio/search?query=002&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,399 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:53,399 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:53,399 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,399 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,399 INFO sqlalchemy.engine.Engine [cached since 0.004371s ago] ('%00%', '%00%', 10, 0)
2026-02-09 16:05:53,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.004371s ago] ('%00%', '%00%', 10, 0)
2026-02-09 16:05:53,400 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:53,400 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:53,400 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,400 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,400 INFO sqlalchemy.engine.Engine [cached since 0.005423s ago] ('%002%', '%002%', 10, 0)
2026-02-09 16:05:53,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.005423s ago] ('%002%', '%002%', 10, 0)
2026-02-09 16:05:53,401 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=12.34ms
INFO:     127.0.0.1:59664 - "GET /api/portfolio/search?query=0&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,401 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:53,401 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:05:53,402 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=3.74ms
INFO:     127.0.0.1:59665 - "GET /api/portfolio/search?query=00&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,402 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:53,402 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:05:53,403 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=3.34ms
INFO:     127.0.0.1:59666 - "GET /api/portfolio/search?query=002&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,404 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:53,404 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:59666 - "OPTIONS /api/portfolio/search?query=0020&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,407 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:53,407 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:53,407 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,407 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,407 INFO sqlalchemy.engine.Engine [cached since 0.01292s ago] ('%0020%', '%0020%', 10, 0)
2026-02-09 16:05:53,407 - sqlalchemy.engine.Engine - INFO - [cached since 0.01292s ago] ('%0020%', '%0020%', 10, 0)
2026-02-09 16:05:53,408 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=1.48ms
INFO:     127.0.0.1:59666 - "GET /api/portfolio/search?query=0020&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,408 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:53,408 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:59666 - "OPTIONS /api/portfolio/search?query=00205&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,412 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:53,412 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:53,412 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,412 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,413 INFO sqlalchemy.engine.Engine [cached since 0.01801s ago] ('%00205%', '%00205%', 10, 0)
2026-02-09 16:05:53,413 - sqlalchemy.engine.Engine - INFO - [cached since 0.01801s ago] ('%00205%', '%00205%', 10, 0)
2026-02-09 16:05:53,414 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=2.05ms
INFO:     127.0.0.1:59666 - "GET /api/portfolio/search?query=00205&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,414 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:53,414 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:59666 - "OPTIONS /api/portfolio/search?query=002050&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,419 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:05:53,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:05:53,419 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,419 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 16:05:53,419 INFO sqlalchemy.engine.Engine [cached since 0.02491s ago] ('%002050%', '%002050%', 10, 0)
2026-02-09 16:05:53,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.02491s ago] ('%002050%', '%002050%', 10, 0)
2026-02-09 16:05:53,421 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=3.13ms
INFO:     127.0.0.1:59666 - "GET /api/portfolio/search?query=002050&remote=false HTTP/1.1" 200 OK
2026-02-09 16:05:53,423 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:05:53,423 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:59684 - "OPTIONS /api/portfolio/ HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 16:06:00,238 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:06:00,238 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:06:00,239 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,239 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,239 INFO sqlalchemy.engine.Engine [cached since 693.5s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,239 - sqlalchemy.engine.Engine - INFO - [cached since 693.5s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,242 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 16:06:00,242 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 16:06:00,242 INFO sqlalchemy.engine.Engine [generated in 0.00031s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050')
2026-02-09 16:06:00,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050')
2026-02-09 16:06:00,246 INFO sqlalchemy.engine.Engine INSERT INTO portfolios (id, user_id, ticker, quantity, avg_cost, target_price, stop_loss_price, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 16:06:00,246 - sqlalchemy.engine.Engine - INFO - INSERT INTO portfolios (id, user_id, ticker, quantity, avg_cost, target_price, stop_loss_price, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 16:06:00,246 INFO sqlalchemy.engine.Engine [generated in 0.00070s] ('4e7579ef-6e4b-4ba3-b10b-4c8c87ba48d1', '27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 0.0, 0.0, None, None, '2026-02-09 08:06:00.246455', '2026-02-09 08:06:00.246466')
2026-02-09 16:06:00,246 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('4e7579ef-6e4b-4ba3-b10b-4c8c87ba48d1', '27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 0.0, 0.0, None, None, '2026-02-09 08:06:00.246455', '2026-02-09 08:06:00.246466')
2026-02-09 16:06:00,248 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 16:06:00,248 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 16:06:00,249 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:06:00,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:06:00,250 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 16:06:00,250 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 16:06:00,251 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('002050',)
2026-02-09 16:06:00,251 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('002050',)
2026-02-09 16:06:00,252 - api_logger - INFO - rid=/api/portfolio/ method=POST status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=17.22ms
INFO:     127.0.0.1:59684 - "POST /api/portfolio/ HTTP/1.1" 200 OK
2026-02-09 16:06:00,253 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:06:00,253 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 16:06:00,256 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:06:00,256 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:06:00,256 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,256 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,256 INFO sqlalchemy.engine.Engine [cached since 693.5s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,256 - sqlalchemy.engine.Engine - INFO - [cached since 693.5s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,257 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:06:00,257 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:06:00,257 INFO sqlalchemy.engine.Engine [cached since 693.5s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,257 - sqlalchemy.engine.Engine - INFO - [cached since 693.5s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,257 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=2.27ms
INFO:     127.0.0.1:59684 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:06:00,257 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:06:00,257 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET /?ticker=002050 200 in 14ms (compile: 4ms, render: 10ms)
INFO:     127.0.0.1:59684 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59686 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59687 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:59688 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 16:06:00,336 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:06:00,336 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:06:00,349 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,349 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,349 INFO sqlalchemy.engine.Engine [cached since 693.6s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,349 - sqlalchemy.engine.Engine - INFO - [cached since 693.6s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 16:06:00,356 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:06:00,356 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:06:00,356 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,356 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:06:00,356 INFO sqlalchemy.engine.Engine [cached since 693.6s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,356 - sqlalchemy.engine.Engine - INFO - [cached since 693.6s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 16:06:00,359 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:06:00,359 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:06:00,360 INFO sqlalchemy.engine.Engine [cached since 563.4s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 16:06:00,360 - sqlalchemy.engine.Engine - INFO - [cached since 563.4s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 16:06:00,366 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:06:00,366 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:06:00,366 INFO sqlalchemy.engine.Engine [cached since 563.4s ago] ('002050', 20, 0)
2026-02-09 16:06:00,366 - sqlalchemy.engine.Engine - INFO - [cached since 563.4s ago] ('002050', 20, 0)
2026-02-09 16:06:00,373 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:06:00,373 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:06:00,380 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=25.53ms
INFO:     127.0.0.1:59688 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:06:00,382 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:06:00,382 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:06:00,382 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=404 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=48.39ms
INFO:     127.0.0.1:59686 - "GET /api/analysis/002050 HTTP/1.1" 404 Not Found
2026-02-09 16:06:00,837 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=511.63ms
INFO:     127.0.0.1:59684 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:06:01,091 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=251.94ms
INFO:     127.0.0.1:59684 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 45ms (compile: 11ms, render: 34ms)
INFO:     127.0.0.1:59953 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59954 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:59955 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:06,148 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:06,148 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:06,149 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:06,149 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:06,149 INFO sqlalchemy.engine.Engine [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:06,149 - sqlalchemy.engine.Engine - INFO - [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:06,150 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:06,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:06,151 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:06,151 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:06,151 INFO sqlalchemy.engine.Engine [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:06,151 - sqlalchemy.engine.Engine - INFO - [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:06,151 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:06,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:06,151 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:06,151 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:06,151 INFO sqlalchemy.engine.Engine [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:06,151 - sqlalchemy.engine.Engine - INFO - [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:06,157 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:06,157 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:06,157 INFO sqlalchemy.engine.Engine [cached since 689.2s ago] ('002050', 20, 0)
2026-02-09 16:08:06,157 - sqlalchemy.engine.Engine - INFO - [cached since 689.2s ago] ('002050', 20, 0)
2026-02-09 16:08:06,157 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:06,157 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:06,158 INFO sqlalchemy.engine.Engine [cached since 689.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:08:06,158 - sqlalchemy.engine.Engine - INFO - [cached since 689.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:08:06,158 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:08:06,158 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:08:06,158 INFO sqlalchemy.engine.Engine [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:06,158 - sqlalchemy.engine.Engine - INFO - [cached since 819.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:06,159 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=15.41ms
INFO:     127.0.0.1:59955 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:08:06,160 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:06,160 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:06,161 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=15.33ms
INFO:     127.0.0.1:59953 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:08:06,163 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:06,163 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:06,163 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=17.55ms
INFO:     127.0.0.1:59954 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:08:06,163 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:06,163 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:59954 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 16:08:06,579 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=364.54ms
INFO:     127.0.0.1:59954 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 52ms (compile: 11ms, render: 41ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:57,741 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:57,741 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:57,741 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:57,741 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:57,741 INFO sqlalchemy.engine.Engine [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:57,741 - sqlalchemy.engine.Engine - INFO - [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:57,743 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:57,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:57,743 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:57,743 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:57,743 INFO sqlalchemy.engine.Engine [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:57,743 - sqlalchemy.engine.Engine - INFO - [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:57,743 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:57,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:57,743 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:57,743 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:57,743 INFO sqlalchemy.engine.Engine [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:57,743 - sqlalchemy.engine.Engine - INFO - [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:57,745 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:57,745 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:57,746 INFO sqlalchemy.engine.Engine [cached since 740.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:08:57,746 - sqlalchemy.engine.Engine - INFO - [cached since 740.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:08:57,748 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:08:57,748 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:08:57,749 INFO sqlalchemy.engine.Engine [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:57,749 - sqlalchemy.engine.Engine - INFO - [cached since 871s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:57,749 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:57,749 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:57,749 INFO sqlalchemy.engine.Engine [cached since 740.8s ago] ('002050', 20, 0)
2026-02-09 16:08:57,749 - sqlalchemy.engine.Engine - INFO - [cached since 740.8s ago] ('002050', 20, 0)
2026-02-09 16:08:57,750 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.54ms
INFO:     127.0.0.1:60191 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:08:57,751 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:57,751 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:57,752 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.66ms
INFO:     127.0.0.1:60193 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:08:57,754 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:57,754 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:57,755 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.21ms
INFO:     127.0.0.1:60192 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:08:57,755 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:57,755 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:58,160 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=356.74ms
INFO:     127.0.0.1:60192 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 40ms (compile: 5ms, render: 35ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:59,342 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:59,342 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:59,343 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:59,343 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:59,343 INFO sqlalchemy.engine.Engine [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:59,343 - sqlalchemy.engine.Engine - INFO - [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:59,343 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:59,343 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:59,343 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:59,343 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:59,343 INFO sqlalchemy.engine.Engine [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:59,343 - sqlalchemy.engine.Engine - INFO - [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:08:59,343 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:08:59,343 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:08:59,343 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:59,343 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:08:59,344 INFO sqlalchemy.engine.Engine [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:59,344 - sqlalchemy.engine.Engine - INFO - [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:59,344 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:59,344 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:59,344 INFO sqlalchemy.engine.Engine [cached since 742.4s ago] ('002050', 20, 0)
2026-02-09 16:08:59,344 - sqlalchemy.engine.Engine - INFO - [cached since 742.4s ago] ('002050', 20, 0)
2026-02-09 16:08:59,344 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:59,344 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:08:59,345 INFO sqlalchemy.engine.Engine [cached since 742.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:08:59,345 - sqlalchemy.engine.Engine - INFO - [cached since 742.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:08:59,345 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:08:59,345 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:08:59,345 INFO sqlalchemy.engine.Engine [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:59,345 - sqlalchemy.engine.Engine - INFO - [cached since 872.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:08:59,347 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.41ms
INFO:     127.0.0.1:60214 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:08:59,348 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.80ms
INFO:     127.0.0.1:60216 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:08:59,348 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:59,348 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:59,348 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:59,348 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:59,354 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.80ms
INFO:     127.0.0.1:60215 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:08:59,355 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:08:59,355 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:08:59,862 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=460.35ms
INFO:     127.0.0.1:60215 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 24ms (compile: 1786Âµs, render: 23ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:00,561 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:00,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:00,561 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:00,561 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:00,562 INFO sqlalchemy.engine.Engine [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:00,562 - sqlalchemy.engine.Engine - INFO - [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:00,563 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:00,563 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:00,563 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:00,563 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:00,563 INFO sqlalchemy.engine.Engine [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:00,563 - sqlalchemy.engine.Engine - INFO - [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:00,564 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:00,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:00,564 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:00,564 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:00,564 INFO sqlalchemy.engine.Engine [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:00,564 - sqlalchemy.engine.Engine - INFO - [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:00,565 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:00,565 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:00,565 INFO sqlalchemy.engine.Engine [cached since 743.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:00,565 - sqlalchemy.engine.Engine - INFO - [cached since 743.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:00,565 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:00,565 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:00,565 INFO sqlalchemy.engine.Engine [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:00,565 - sqlalchemy.engine.Engine - INFO - [cached since 873.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:00,565 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:00,565 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:00,565 INFO sqlalchemy.engine.Engine [cached since 743.6s ago] ('002050', 20, 0)
2026-02-09 16:09:00,565 - sqlalchemy.engine.Engine - INFO - [cached since 743.6s ago] ('002050', 20, 0)
2026-02-09 16:09:00,566 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.51ms
INFO:     127.0.0.1:60215 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:09:00,566 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:00,566 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:00,567 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.64ms
INFO:     127.0.0.1:60214 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:09:00,568 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:00,568 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:00,570 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.43ms
INFO:     127.0.0.1:60216 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:09:00,571 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:00,571 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:00,879 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=262.10ms
INFO:     127.0.0.1:60216 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 43ms (compile: 5ms, render: 38ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:01,540 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:01,540 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:01,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:01,540 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:01,540 INFO sqlalchemy.engine.Engine [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:01,540 - sqlalchemy.engine.Engine - INFO - [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:01,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:01,541 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:01,541 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:01,541 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:01,541 INFO sqlalchemy.engine.Engine [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:01,541 - sqlalchemy.engine.Engine - INFO - [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:01,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:01,541 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:01,542 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:01,542 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:01,542 INFO sqlalchemy.engine.Engine [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:01,542 - sqlalchemy.engine.Engine - INFO - [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:01,543 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:01,543 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:01,543 INFO sqlalchemy.engine.Engine [cached since 744.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:01,543 - sqlalchemy.engine.Engine - INFO - [cached since 744.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:01,548 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:01,548 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:01,548 INFO sqlalchemy.engine.Engine [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:01,548 - sqlalchemy.engine.Engine - INFO - [cached since 874.8s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:01,550 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:01,550 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:01,550 INFO sqlalchemy.engine.Engine [cached since 744.6s ago] ('002050', 20, 0)
2026-02-09 16:09:01,550 - sqlalchemy.engine.Engine - INFO - [cached since 744.6s ago] ('002050', 20, 0)
2026-02-09 16:09:01,551 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.77ms
INFO:     127.0.0.1:60216 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:09:01,555 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:01,555 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:01,555 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.50ms
INFO:     127.0.0.1:60214 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:09:01,555 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.52ms
INFO:     127.0.0.1:60215 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:09:01,556 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:01,556 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:01,556 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:01,556 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:01,922 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=321.22ms
INFO:     127.0.0.1:60215 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 38ms (compile: 4ms, render: 34ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:02,391 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:02,391 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:02,391 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:02,391 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:02,391 INFO sqlalchemy.engine.Engine [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:02,391 - sqlalchemy.engine.Engine - INFO - [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:02,392 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:02,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:02,392 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:02,392 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:02,392 INFO sqlalchemy.engine.Engine [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:02,392 - sqlalchemy.engine.Engine - INFO - [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:02,392 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:02,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:02,392 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:02,392 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:02,392 INFO sqlalchemy.engine.Engine [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:02,392 - sqlalchemy.engine.Engine - INFO - [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:02,393 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:02,393 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:02,393 INFO sqlalchemy.engine.Engine [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:02,393 - sqlalchemy.engine.Engine - INFO - [cached since 875.6s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:02,393 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:02,393 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:02,393 INFO sqlalchemy.engine.Engine [cached since 745.4s ago] ('002050', 20, 0)
2026-02-09 16:09:02,393 - sqlalchemy.engine.Engine - INFO - [cached since 745.4s ago] ('002050', 20, 0)
2026-02-09 16:09:02,393 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:02,393 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:02,393 INFO sqlalchemy.engine.Engine [cached since 745.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:02,393 - sqlalchemy.engine.Engine - INFO - [cached since 745.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:02,400 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.76ms
INFO:     127.0.0.1:60214 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:09:02,403 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:02,403 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:02,404 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.14ms
INFO:     127.0.0.1:60215 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:09:02,405 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.40ms
INFO:     127.0.0.1:60216 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:09:02,405 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:02,405 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:02,406 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:02,406 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:02,724 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=280.44ms
INFO:     127.0.0.1:60216 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 34ms (compile: 3ms, render: 31ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:03,213 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:03,213 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:09:03,214 INFO sqlalchemy.engine.Engine [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:03,214 - sqlalchemy.engine.Engine - INFO - [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:03,215 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:03,215 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:03,215 INFO sqlalchemy.engine.Engine [cached since 746.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:03,215 - sqlalchemy.engine.Engine - INFO - [cached since 746.2s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:09:03,215 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:03,215 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:09:03,215 INFO sqlalchemy.engine.Engine [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:03,215 - sqlalchemy.engine.Engine - INFO - [cached since 876.4s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:09:03,216 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:03,216 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:09:03,216 INFO sqlalchemy.engine.Engine [cached since 746.2s ago] ('002050', 20, 0)
2026-02-09 16:09:03,216 - sqlalchemy.engine.Engine - INFO - [cached since 746.2s ago] ('002050', 20, 0)
2026-02-09 16:09:03,216 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.75ms
INFO:     127.0.0.1:60216 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:09:03,218 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:03,218 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:03,227 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12.73ms
INFO:     127.0.0.1:60214 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:09:03,227 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.08ms
INFO:     127.0.0.1:60215 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:09:03,228 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:03,228 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:03,228 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:09:03,228 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:09:03,565 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=286.67ms
INFO:     127.0.0.1:60215 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
âœ“ Compiled in 45ms
 GET /?ticker=002050 200 in 154ms (compile: 43ms, render: 110ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:11:53,477 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:11:53,477 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:11:53,485 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:11:53,485 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:11:53,486 INFO sqlalchemy.engine.Engine [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:11:53,486 - sqlalchemy.engine.Engine - INFO - [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:11:53,487 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:11:53,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:11:53,487 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:11:53,487 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:11:53,487 INFO sqlalchemy.engine.Engine [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:11:53,487 - sqlalchemy.engine.Engine - INFO - [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 16:11:53,487 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 16:11:53,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 16:11:53,487 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:11:53,487 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 16:11:53,487 INFO sqlalchemy.engine.Engine [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:11:53,487 - sqlalchemy.engine.Engine - INFO - [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:11:53,489 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:11:53,489 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 16:11:53,489 INFO sqlalchemy.engine.Engine [cached since 916.5s ago] ('002050', 20, 0)
2026-02-09 16:11:53,489 - sqlalchemy.engine.Engine - INFO - [cached since 916.5s ago] ('002050', 20, 0)
2026-02-09 16:11:53,489 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:11:53,489 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 16:11:53,489 INFO sqlalchemy.engine.Engine [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:11:53,489 - sqlalchemy.engine.Engine - INFO - [cached since 1047s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 16:11:53,489 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:11:53,489 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 16:11:53,489 INFO sqlalchemy.engine.Engine [cached since 916.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:11:53,489 - sqlalchemy.engine.Engine - INFO - [cached since 916.5s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 16:11:53,490 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=28.30ms
INFO:     127.0.0.1:60609 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 16:11:53,491 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:11:53,491 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:11:53,492 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=26.68ms
INFO:     127.0.0.1:60611 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 16:11:53,496 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:11:53,496 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:11:53,496 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=31.23ms
INFO:     127.0.0.1:60610 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 16:11:53,496 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 16:11:53,496 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 16:11:53,928 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=372.23ms
INFO:     127.0.0.1:60610 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
âœ“ Compiled in 50ms
 GET /?ticker=002050 200 in 172ms (compile: 66ms, render: 106ms)
INFO:     127.0.0.1:55136 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:55138 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:55139 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:46:01,686 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:46:01,686 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:46:01,686 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:01,686 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:01,687 INFO sqlalchemy.engine.Engine [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:01,687 - sqlalchemy.engine.Engine - INFO - [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:46:01,687 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:46:01,687 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:46:01,688 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:01,688 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:01,688 INFO sqlalchemy.engine.Engine [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:01,688 - sqlalchemy.engine.Engine - INFO - [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:46:01,688 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:46:01,688 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:46:01,688 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:01,688 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:01,688 INFO sqlalchemy.engine.Engine [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:01,688 - sqlalchemy.engine.Engine - INFO - [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:01,693 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:01,693 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:01,693 INFO sqlalchemy.engine.Engine [cached since 6565s ago] ('002050', 20, 0)
2026-02-09 17:46:01,693 - sqlalchemy.engine.Engine - INFO - [cached since 6565s ago] ('002050', 20, 0)
2026-02-09 17:46:01,693 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:01,693 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:01,693 INFO sqlalchemy.engine.Engine [cached since 6565s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:46:01,693 - sqlalchemy.engine.Engine - INFO - [cached since 6565s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:46:01,694 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:46:01,694 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:46:01,694 INFO sqlalchemy.engine.Engine [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:01,694 - sqlalchemy.engine.Engine - INFO - [cached since 6695s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:01,696 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=14.36ms
INFO:     127.0.0.1:55138 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 17:46:01,700 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:46:01,700 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:46:01,700 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:46:01,700 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:46:01,701 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=12.83ms
INFO:     127.0.0.1:55139 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 17:46:01,701 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:46:01,701 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:46:01,701 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=404 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=31.08ms
INFO:     127.0.0.1:55136 - "GET /api/analysis/002050 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:55136 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 17:46:02,256 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=510.31ms
INFO:     127.0.0.1:55136 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /sw.js 404 in 49ms (compile: 27ms, render: 22ms)
 GET /?ticker=002050 200 in 57ms (compile: 12ms, render: 44ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:46:56,222 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:46:56,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:46:56,223 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:56,223 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:56,224 INFO sqlalchemy.engine.Engine [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:56,224 - sqlalchemy.engine.Engine - INFO - [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:46:56,224 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:46:56,224 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:46:56,224 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:56,224 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:56,224 INFO sqlalchemy.engine.Engine [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:56,224 - sqlalchemy.engine.Engine - INFO - [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:46:56,224 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:46:56,224 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:46:56,225 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:56,225 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:46:56,225 INFO sqlalchemy.engine.Engine [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:56,225 - sqlalchemy.engine.Engine - INFO - [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:56,226 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:56,226 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:56,226 INFO sqlalchemy.engine.Engine [cached since 6619s ago] ('002050', 20, 0)
2026-02-09 17:46:56,226 - sqlalchemy.engine.Engine - INFO - [cached since 6619s ago] ('002050', 20, 0)
2026-02-09 17:46:56,226 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:56,226 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:46:56,227 INFO sqlalchemy.engine.Engine [cached since 6619s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:46:56,227 - sqlalchemy.engine.Engine - INFO - [cached since 6619s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:46:56,227 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:46:56,227 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:46:56,227 INFO sqlalchemy.engine.Engine [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:56,227 - sqlalchemy.engine.Engine - INFO - [cached since 6749s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:46:56,228 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=9.34ms
INFO:     127.0.0.1:55403 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 17:46:56,229 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:46:56,229 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:46:56,229 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=10.89ms
INFO:     127.0.0.1:55402 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 17:46:56,229 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:46:56,229 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:46:56,230 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:46:56,230 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:46:56,230 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=404 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=12.88ms
INFO:     127.0.0.1:55401 - "GET /api/analysis/002050 HTTP/1.1" 404 Not Found
2026-02-09 17:46:56,619 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=362.50ms
INFO:     127.0.0.1:55401 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /sw.js 404 in 37ms (compile: 7ms, render: 30ms)
 GET /?ticker=002050 200 in 54ms (compile: 13ms, render: 41ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:55:05,735 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:55:05,735 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:55:05,736 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:55:05,736 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:55:05,736 INFO sqlalchemy.engine.Engine [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:55:05,736 - sqlalchemy.engine.Engine - INFO - [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:55:05,737 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:55:05,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:55:05,737 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:55:05,737 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:55:05,737 INFO sqlalchemy.engine.Engine [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:55:05,737 - sqlalchemy.engine.Engine - INFO - [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 17:55:05,738 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:55:05,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:55:05,738 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:55:05,738 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:55:05,738 INFO sqlalchemy.engine.Engine [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:55:05,738 - sqlalchemy.engine.Engine - INFO - [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:55:05,739 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:55:05,739 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:55:05,740 INFO sqlalchemy.engine.Engine [cached since 7109s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:55:05,740 - sqlalchemy.engine.Engine - INFO - [cached since 7109s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:55:05,740 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:55:05,740 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:55:05,740 INFO sqlalchemy.engine.Engine [cached since 7109s ago] ('002050', 20, 0)
2026-02-09 17:55:05,740 - sqlalchemy.engine.Engine - INFO - [cached since 7109s ago] ('002050', 20, 0)
2026-02-09 17:55:05,740 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:55:05,740 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:55:05,740 INFO sqlalchemy.engine.Engine [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:55:05,740 - sqlalchemy.engine.Engine - INFO - [cached since 7239s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 17:55:05,741 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=10.45ms
INFO:     127.0.0.1:56646 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 17:55:05,742 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:55:05,742 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:55:05,742 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=11.47ms
INFO:     127.0.0.1:56647 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 17:55:05,743 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:55:05,743 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:55:05,743 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:55:05,743 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:55:05,744 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=404 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=13.40ms
INFO:     127.0.0.1:56645 - "GET /api/analysis/002050 HTTP/1.1" 404 Not Found
2026-02-09 17:55:06,147 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=377.90ms
INFO:     127.0.0.1:56645 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /sw.js 404 in 47ms (compile: 13ms, render: 34ms)
 GET / 200 in 119ms (compile: 8ms, render: 111ms)
âš  Cross origin request detected from 127.0.0.1 to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 GET /login 200 in 16ms (compile: 7ms, render: 10ms)
2026-02-09 17:57:47,468 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:57:47,468 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:57:47,471 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 17:57:47,471 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 17:57:47,471 INFO sqlalchemy.engine.Engine [cached since 7401s ago] ('test_new@example.com',)
2026-02-09 17:57:47,471 - sqlalchemy.engine.Engine - INFO - [cached since 7401s ago] ('test_new@example.com',)
2026-02-09 17:57:47,473 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:57:47,473 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:57:47,473 - api_logger - INFO - rid=/api/auth/login method=POST status_code=400 user_id=anonymous time=14.47ms
INFO:     127.0.0.1:56975 - "POST /api/auth/login HTTP/1.1" 400 Bad Request
 GET /register 200 in 23ms (compile: 9ms, render: 14ms)
INFO:     127.0.0.1:57009 - "OPTIONS /api/auth/register HTTP/1.1" 200 OK
2026-02-09 17:58:05,479 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:05,479 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:05,479 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 17:58:05,479 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 17:58:05,480 INFO sqlalchemy.engine.Engine [cached since 7419s ago] ('tester@example.com',)
2026-02-09 17:58:05,480 - sqlalchemy.engine.Engine - INFO - [cached since 7419s ago] ('tester@example.com',)
2026-02-09 17:58:05,725 INFO sqlalchemy.engine.Engine INSERT INTO users (id, email, hashed_password, is_active, membership_tier, api_key_gemini, api_key_deepseek, api_key_siliconflow, preferred_data_source, preferred_ai_model, created_at, last_login) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 17:58:05,725 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (id, email, hashed_password, is_active, membership_tier, api_key_gemini, api_key_deepseek, api_key_siliconflow, preferred_data_source, preferred_ai_model, created_at, last_login) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 17:58:05,725 INFO sqlalchemy.engine.Engine [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'tester@example.com', '$2b$12$x4Sfh2yh74ZDYkFO7Uw9rOSSn.5tJkWKd9MadLf0PyetG6HYu2oPa', 1, 'FREE', None, None, None, 'ALPHA_VANTAGE', 'gemini-1.5-flash', '2026-02-09 09:58:05.725035', None)
2026-02-09 17:58:05,725 - sqlalchemy.engine.Engine - INFO - [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'tester@example.com', '$2b$12$x4Sfh2yh74ZDYkFO7Uw9rOSSn.5tJkWKd9MadLf0PyetG6HYu2oPa', 1, 'FREE', None, None, None, 'ALPHA_VANTAGE', 'gemini-1.5-flash', '2026-02-09 09:58:05.725035', None)
2026-02-09 17:58:05,727 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 17:58:05,727 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 17:58:05,729 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:05,729 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:05,729 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:05,729 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:05,729 INFO sqlalchemy.engine.Engine [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,729 - sqlalchemy.engine.Engine - INFO - [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,730 - api_logger - INFO - rid=/api/auth/register method=POST status_code=200 user_id=anonymous time=255.09ms
INFO:     127.0.0.1:57009 - "POST /api/auth/register HTTP/1.1" 200 OK
2026-02-09 17:58:05,731 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:05,731 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET / 200 in 14ms (compile: 5ms, render: 9ms)
INFO:     127.0.0.1:57009 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:57014 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
2026-02-09 17:58:05,777 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:05,777 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:05,777 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:05,777 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:05,778 INFO sqlalchemy.engine.Engine [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,778 - sqlalchemy.engine.Engine - INFO - [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,786 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:58:05,786 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:58:05,786 INFO sqlalchemy.engine.Engine [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,786 - sqlalchemy.engine.Engine - INFO - [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,788 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=11.77ms
INFO:     127.0.0.1:57009 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 17:58:05,789 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:05,789 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
2026-02-09 17:58:05,792 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:05,792 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:05,793 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:05,793 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:05,793 INFO sqlalchemy.engine.Engine [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,793 - sqlalchemy.engine.Engine - INFO - [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,794 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:58:05,794 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:58:05,795 INFO sqlalchemy.engine.Engine [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,795 - sqlalchemy.engine.Engine - INFO - [cached since 7419s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:05,796 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=5.77ms
INFO:     127.0.0.1:57009 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 17:58:05,798 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:05,798 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57015 - "OPTIONS /api/portfolio/search?query=A&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,453 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:27,453 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:27,453 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,453 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,453 INFO sqlalchemy.engine.Engine [cached since 6754s ago] ('%A%', '%A%', 10, 0)
2026-02-09 17:58:27,453 - sqlalchemy.engine.Engine - INFO - [cached since 6754s ago] ('%A%', '%A%', 10, 0)
2026-02-09 17:58:27,455 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=2.94ms
INFO:     127.0.0.1:57015 - "GET /api/portfolio/search?query=A&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,455 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:27,455 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57015 - "OPTIONS /api/portfolio/search?query=AA&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,458 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:27,458 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:27,458 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,458 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,458 INFO sqlalchemy.engine.Engine [cached since 6754s ago] ('%AA%', '%AA%', 10, 0)
2026-02-09 17:58:27,458 - sqlalchemy.engine.Engine - INFO - [cached since 6754s ago] ('%AA%', '%AA%', 10, 0)
2026-02-09 17:58:27,458 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=1.27ms
INFO:     127.0.0.1:57015 - "GET /api/portfolio/search?query=AA&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,459 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:27,459 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57015 - "OPTIONS /api/portfolio/search?query=AAP&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,468 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:27,468 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:27,468 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,468 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,468 INFO sqlalchemy.engine.Engine [cached since 6754s ago] ('%AAP%', '%AAP%', 10, 0)
2026-02-09 17:58:27,468 - sqlalchemy.engine.Engine - INFO - [cached since 6754s ago] ('%AAP%', '%AAP%', 10, 0)
2026-02-09 17:58:27,470 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=3.63ms
INFO:     127.0.0.1:57015 - "GET /api/portfolio/search?query=AAP&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,471 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:27,471 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57015 - "OPTIONS /api/portfolio/search?query=AAPL&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,473 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:27,473 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:27,473 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,473 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:27,473 INFO sqlalchemy.engine.Engine [cached since 6754s ago] ('%AAPL%', '%AAPL%', 10, 0)
2026-02-09 17:58:27,473 - sqlalchemy.engine.Engine - INFO - [cached since 6754s ago] ('%AAPL%', '%AAPL%', 10, 0)
2026-02-09 17:58:27,474 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=1.40ms
INFO:     127.0.0.1:57015 - "GET /api/portfolio/search?query=AAPL&remote=false HTTP/1.1" 200 OK
2026-02-09 17:58:27,474 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:27,474 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57015 - "OPTIONS /api/portfolio/search?query=AAPL&remote=true HTTP/1.1" 200 OK
2026-02-09 17:58:28,914 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:28,914 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:28,915 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:28,915 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE lower(stocks.ticker) LIKE lower(?) OR lower(stocks.name) LIKE lower(?)
 LIMIT ? OFFSET ?
2026-02-09 17:58:28,915 INFO sqlalchemy.engine.Engine [cached since 6756s ago] ('%AAPL%', '%AAPL%', 10, 0)
2026-02-09 17:58:28,915 - sqlalchemy.engine.Engine - INFO - [cached since 6756s ago] ('%AAPL%', '%AAPL%', 10, 0)
2026-02-09 17:58:28,917 - api_logger - INFO - rid=/api/portfolio/search method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=4.11ms
INFO:     127.0.0.1:57015 - "GET /api/portfolio/search?query=AAPL&remote=true HTTP/1.1" 200 OK
2026-02-09 17:58:28,919 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:28,919 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57062 - "OPTIONS /api/portfolio/ HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
2026-02-09 17:58:37,655 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:37,655 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:37,655 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,655 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,655 INFO sqlalchemy.engine.Engine [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,655 - sqlalchemy.engine.Engine - INFO - [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,656 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 17:58:37,656 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 17:58:37,656 INFO sqlalchemy.engine.Engine [cached since 6757s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL')
2026-02-09 17:58:37,656 - sqlalchemy.engine.Engine - INFO - [cached since 6757s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL')
2026-02-09 17:58:37,657 INFO sqlalchemy.engine.Engine INSERT INTO portfolios (id, user_id, ticker, quantity, avg_cost, target_price, stop_loss_price, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 17:58:37,657 - sqlalchemy.engine.Engine - INFO - INSERT INTO portfolios (id, user_id, ticker, quantity, avg_cost, target_price, stop_loss_price, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 17:58:37,657 INFO sqlalchemy.engine.Engine [cached since 6757s ago] ('63294708-95f8-4c26-9273-af949e0a0afd', '92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL', 0.0, 0.0, None, None, '2026-02-09 09:58:37.657360', '2026-02-09 09:58:37.657364')
2026-02-09 17:58:37,657 - sqlalchemy.engine.Engine - INFO - [cached since 6757s ago] ('63294708-95f8-4c26-9273-af949e0a0afd', '92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL', 0.0, 0.0, None, None, '2026-02-09 09:58:37.657360', '2026-02-09 09:58:37.657364')
2026-02-09 17:58:37,658 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 17:58:37,658 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 17:58:37,659 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:37,659 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:37,659 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 17:58:37,659 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 17:58:37,659 INFO sqlalchemy.engine.Engine [cached since 6757s ago] ('AAPL',)
2026-02-09 17:58:37,659 - sqlalchemy.engine.Engine - INFO - [cached since 6757s ago] ('AAPL',)
2026-02-09 17:58:37,660 - api_logger - INFO - rid=/api/portfolio/ method=POST status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=5.38ms
INFO:     127.0.0.1:57062 - "POST /api/portfolio/ HTTP/1.1" 200 OK
2026-02-09 17:58:37,660 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:37,660 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
2026-02-09 17:58:37,664 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:37,664 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:37,664 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,664 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,664 INFO sqlalchemy.engine.Engine [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,664 - sqlalchemy.engine.Engine - INFO - [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,664 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:58:37,664 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 17:58:37,664 INFO sqlalchemy.engine.Engine [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,664 - sqlalchemy.engine.Engine - INFO - [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,665 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=2.16ms
INFO:     127.0.0.1:57062 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 17:58:37,665 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:37,665 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET /?ticker=AAPL 200 in 35ms (compile: 4ms, render: 31ms)
INFO:     127.0.0.1:57062 - "OPTIONS /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:57064 - "OPTIONS /api/analysis/AAPL HTTP/1.1" 200 OK
INFO:     127.0.0.1:57065 - "OPTIONS /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:57066 - "OPTIONS /api/portfolio/AAPL/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
2026-02-09 17:58:37,756 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:37,756 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:37,757 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,757 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,757 INFO sqlalchemy.engine.Engine [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,757 - sqlalchemy.engine.Engine - INFO - [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
2026-02-09 17:58:37,758 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 17:58:37,758 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 17:58:37,759 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,759 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 17:58:37,760 INFO sqlalchemy.engine.Engine [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,760 - sqlalchemy.engine.Engine - INFO - [cached since 7451s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 17:58:37,761 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:58:37,761 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 17:58:37,762 INFO sqlalchemy.engine.Engine [cached since 7321s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:58:37,762 - sqlalchemy.engine.Engine - INFO - [cached since 7321s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL', 'gemini-1.5-flash', 1, 0)
2026-02-09 17:58:37,764 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:58:37,764 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 17:58:37,764 INFO sqlalchemy.engine.Engine [cached since 7321s ago] ('AAPL', 20, 0)
2026-02-09 17:58:37,764 - sqlalchemy.engine.Engine - INFO - [cached since 7321s ago] ('AAPL', 20, 0)
2026-02-09 17:58:37,769 - api_logger - INFO - rid=/api/portfolio/AAPL/news method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=14.05ms
INFO:     127.0.0.1:57066 - "GET /api/portfolio/AAPL/news HTTP/1.1" 200 OK
2026-02-09 17:58:37,770 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:37,770 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:58:37,770 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 17:58:37,770 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 17:58:37,771 - api_logger - INFO - rid=/api/analysis/AAPL method=GET status_code=404 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=15.20ms
INFO:     127.0.0.1:57067 - "GET /api/analysis/AAPL HTTP/1.1" 404 Not Found
2026-02-09 17:58:38,149 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=405.01ms
INFO:     127.0.0.1:57062 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 17:58:38,528 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=375.83ms
INFO:     127.0.0.1:57062 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
 GET /api/file?path=frontend/components/features/StockDetail.tsx 404 in 91ms (compile: 22ms, render: 68ms)
âœ“ Compiled in 76ms
âœ“ Compiled in 160ms
INFO:     127.0.0.1:57918 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:57919 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57920 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 18:06:02,190 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,192 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,192 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,192 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 18:06:02,192 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 18:06:02,193 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,193 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,193 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,193 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 18:06:02,193 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 18:06:02,194 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,194 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,194 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,194 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,194 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 18:06:02,194 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
INFO:     127.0.0.1:57924 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:57925 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57926 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:06:02,202 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:06:02,202 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:06:02,202 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 18:06:02,202 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 18:06:02,202 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,202 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,202 INFO sqlalchemy.engine.Engine [cached since 7765s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 18:06:02,202 - sqlalchemy.engine.Engine - INFO - [cached since 7765s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3', '002050', 'gemini-1.5-flash', 1, 0)
2026-02-09 18:06:02,202 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,202 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine [cached since 7765s ago] ('002050', 20, 0)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - [cached since 7765s ago] ('002050', 20, 0)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,204 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,204 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,204 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,204 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,204 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,204 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,205 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=40.38ms
INFO:     127.0.0.1:57918 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 18:06:02,205 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=36.40ms
INFO:     127.0.0.1:57920 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 18:06:02,206 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,206 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,206 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,206 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,207 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=404 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=38.67ms
INFO:     127.0.0.1:57919 - "GET /api/analysis/002050 HTTP/1.1" 404 Not Found
2026-02-09 18:06:02,207 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,207 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,207 INFO sqlalchemy.engine.Engine [cached since 7765s ago] ('002050', 20, 0)
2026-02-09 18:06:02,207 - sqlalchemy.engine.Engine - INFO - [cached since 7765s ago] ('002050', 20, 0)
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine [cached since 7765s ago] ('AAPL', 20, 0)
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - [cached since 7765s ago] ('AAPL', 20, 0)
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine [cached since 7765s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL', 'gemini-1.5-flash', 1, 0)
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - [cached since 7765s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099', 'AAPL', 'gemini-1.5-flash', 1, 0)
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:06:02,208 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,208 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
INFO:     127.0.0.1:57920 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:06:02,209 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,209 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:06:02,209 INFO sqlalchemy.engine.Engine [cached since 7765s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 18:06:02,209 - sqlalchemy.engine.Engine - INFO - [cached since 7765s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710066, 'sub': '27f9c1a8-f876-4722-ac36-4f9fc0835ec3'}
2026-02-09 18:06:02,212 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,212 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,213 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,213 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,213 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 18:06:02,213 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('27f9c1a8-f876-4722-ac36-4f9fc0835ec3',)
2026-02-09 18:06:02,213 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,213 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,216 - api_logger - INFO - rid=/api/analysis/AAPL method=GET status_code=404 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=21.06ms
INFO:     127.0.0.1:57922 - "GET /api/analysis/AAPL HTTP/1.1" 404 Not Found
2026-02-09 18:06:02,216 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=18.52ms
INFO:     127.0.0.1:57924 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 18:06:02,217 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=7.33ms
INFO:     127.0.0.1:57920 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:06:02,218 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=19.77ms
INFO:     127.0.0.1:57925 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 18:06:02,220 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=25.69ms
INFO:     127.0.0.1:57921 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 18:06:02,221 - api_logger - INFO - rid=/api/portfolio/AAPL/news method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=25.87ms
INFO:     127.0.0.1:57923 - "GET /api/portfolio/AAPL/news HTTP/1.1" 200 OK
2026-02-09 18:06:02,221 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,221 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,221 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,221 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,222 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,222 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,225 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,225 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,225 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,225 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,225 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=27.60ms
INFO:     127.0.0.1:57926 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:57923 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:06:02,228 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,228 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770717485, 'sub': '92be8643-67f5-4a66-b27d-5aeafd157099'}
2026-02-09 18:06:02,230 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,230 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,230 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,230 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,230 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
2026-02-09 18:06:02,230 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('92be8643-67f5-4a66-b27d-5aeafd157099',)
INFO:     127.0.0.1:57926 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:57920 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:06:02,239 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:06:02,239 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:06:02,241 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,241 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:06:02,241 INFO sqlalchemy.engine.Engine [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,241 - sqlalchemy.engine.Engine - INFO - [cached since 7895s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:06:02,242 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=13.59ms
INFO:     127.0.0.1:57923 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:06:02,243 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,243 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:06:02,244 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.18ms
INFO:     127.0.0.1:57926 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:06:02,246 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:06:02,246 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57926 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 18:06:02,628 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=27f9c1a8-f876-4722-ac36-4f9fc0835ec3 time=394.42ms
INFO:     127.0.0.1:57920 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 18:06:02,649 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=271.09ms
INFO:     127.0.0.1:57926 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 18:06:02,662 - api_logger - INFO - rid=/api/stocks/AAPL/history method=GET status_code=200 user_id=92be8643-67f5-4a66-b27d-5aeafd157099 time=392.13ms
INFO:     127.0.0.1:57923 - "GET /api/stocks/AAPL/history?period=1y HTTP/1.1" 200 OK
 GET /login 200 in 28ms (compile: 12ms, render: 17ms)
2026-02-09 18:11:58,104 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:11:58,104 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:11:58,106 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 18:11:58,106 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.email = ?
2026-02-09 18:11:58,106 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('test@qq.com',)
2026-02-09 18:11:58,106 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('test@qq.com',)
2026-02-09 18:11:58,305 - api_logger - INFO - rid=/api/auth/login method=POST status_code=200 user_id=anonymous time=206.50ms
INFO:     127.0.0.1:58573 - "POST /api/auth/login HTTP/1.1" 200 OK
2026-02-09 18:11:58,306 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:11:58,306 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET / 200 in 63ms (compile: 48ms, render: 15ms)
INFO:     127.0.0.1:58573 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:11:58,415 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:11:58,415 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:11:58,415 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,415 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,415 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,415 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,417 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:11:58,417 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:11:58,417 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,417 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,421 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.42ms
INFO:     127.0.0.1:58573 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 18:11:58,422 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:11:58,422 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:11:58,422 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:11:58,422 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:11:58,423 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,423 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,423 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,423 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,424 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:11:58,424 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:11:58,424 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,424 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,426 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.43ms
INFO:     127.0.0.1:58573 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 18:11:58,429 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:11:58,429 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET /?ticker=002050 200 in 10ms (compile: 1962Âµs, render: 8ms)
INFO:     127.0.0.1:58573 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:58579 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:58580 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:58582 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:11:58,493 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:11:58,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:11:58,494 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,494 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,496 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,496 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:11:58,500 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:11:58,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:11:58,500 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,500 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,500 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,500 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:11:58,502 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:11:58,502 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:11:58,503 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,503 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,503 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,503 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,506 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=18.61ms
INFO:     127.0.0.1:58581 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:11:58,509 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:11:58,509 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:11:58,509 INFO sqlalchemy.engine.Engine [cached since 8122s ago] ('002050', 20, 0)
2026-02-09 18:11:58,509 - sqlalchemy.engine.Engine - INFO - [cached since 8122s ago] ('002050', 20, 0)
2026-02-09 18:11:58,513 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:11:58,513 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:11:58,514 INFO sqlalchemy.engine.Engine [cached since 8122s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 18:11:58,514 - sqlalchemy.engine.Engine - INFO - [cached since 8122s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 18:11:58,515 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:11:58,515 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:11:58,521 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=23.08ms
INFO:     127.0.0.1:58579 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 18:11:58,522 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:11:58,522 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:11:58,524 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=26.40ms
INFO:     127.0.0.1:58580 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 18:11:58,526 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:11:58,526 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET /?ticker=002050 200 in 33ms (compile: 4ms, render: 29ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:11:58,542 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:11:58,542 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:11:58,543 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,543 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:11:58,543 INFO sqlalchemy.engine.Engine [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,543 - sqlalchemy.engine.Engine - INFO - [cached since 8252s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:11:58,544 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.19ms
INFO:     127.0.0.1:58580 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:11:58,545 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:11:58,545 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:11:58,885 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=403.07ms
INFO:     127.0.0.1:58573 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 18:11:59,188 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=301.06ms
INFO:     127.0.0.1:58573 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=002050 200 in 90ms (compile: 979Âµs, render: 89ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:12:08,076 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:12:08,076 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:12:08,076 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,076 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,076 INFO sqlalchemy.engine.Engine [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,076 - sqlalchemy.engine.Engine - INFO - [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:12:08,077 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:12:08,077 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:12:08,077 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,077 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,077 INFO sqlalchemy.engine.Engine [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,077 - sqlalchemy.engine.Engine - INFO - [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:12:08,079 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:12:08,079 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:12:08,079 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,079 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,080 INFO sqlalchemy.engine.Engine [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,080 - sqlalchemy.engine.Engine - INFO - [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,082 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:12:08,082 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:12:08,082 INFO sqlalchemy.engine.Engine [cached since 8131s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 18:12:08,082 - sqlalchemy.engine.Engine - INFO - [cached since 8131s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 18:12:08,083 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:12:08,083 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:12:08,083 INFO sqlalchemy.engine.Engine [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,083 - sqlalchemy.engine.Engine - INFO - [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,083 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:12:08,083 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:12:08,083 INFO sqlalchemy.engine.Engine [cached since 8131s ago] ('002050', 20, 0)
2026-02-09 18:12:08,083 - sqlalchemy.engine.Engine - INFO - [cached since 8131s ago] ('002050', 20, 0)
2026-02-09 18:12:08,084 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.61ms
INFO:     127.0.0.1:58639 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 18:12:08,084 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:12:08,084 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:12:08,086 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.40ms
INFO:     127.0.0.1:58641 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 18:12:08,087 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:12:08,087 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:12:08,087 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.63ms
INFO:     127.0.0.1:58640 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 18:12:08,087 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:12:08,087 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:12:08,090 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:12:08,090 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:12:08,090 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,090 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:12:08,090 INFO sqlalchemy.engine.Engine [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,090 - sqlalchemy.engine.Engine - INFO - [cached since 8261s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:12:08,090 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=0.97ms
INFO:     127.0.0.1:58640 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:12:08,091 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:12:08,091 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:12:08,359 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=211.30ms
INFO:     127.0.0.1:58640 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
âœ“ Compiled in 116ms
 GET /?ticker=002050 200 in 173ms (compile: 49ms, render: 123ms)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:13:42,288 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:13:42,288 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:13:42,289 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,289 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,289 INFO sqlalchemy.engine.Engine [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,289 - sqlalchemy.engine.Engine - INFO - [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:13:42,290 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:13:42,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:13:42,290 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,290 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,290 INFO sqlalchemy.engine.Engine [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,290 - sqlalchemy.engine.Engine - INFO - [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:13:42,290 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:13:42,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:13:42,290 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,290 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,290 INFO sqlalchemy.engine.Engine [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,290 - sqlalchemy.engine.Engine - INFO - [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,292 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:13:42,292 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 18:13:42,292 INFO sqlalchemy.engine.Engine [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,292 - sqlalchemy.engine.Engine - INFO - [cached since 8355s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,292 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:13:42,292 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 18:13:42,292 INFO sqlalchemy.engine.Engine [cached since 8225s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 18:13:42,292 - sqlalchemy.engine.Engine - INFO - [cached since 8225s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 18:13:42,293 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:13:42,293 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 18:13:42,293 INFO sqlalchemy.engine.Engine [cached since 8225s ago] ('002050', 20, 0)
2026-02-09 18:13:42,293 - sqlalchemy.engine.Engine - INFO - [cached since 8225s ago] ('002050', 20, 0)
2026-02-09 18:13:42,294 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.90ms
INFO:     127.0.0.1:58769 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 18:13:42,297 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:13:42,297 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:13:42,297 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=10.86ms
INFO:     127.0.0.1:58770 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 18:13:42,297 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.53ms
INFO:     127.0.0.1:58771 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 18:13:42,298 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:13:42,298 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:13:42,298 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:13:42,298 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770718318, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 18:13:42,299 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 18:13:42,299 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 18:13:42,299 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,299 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 18:13:42,299 INFO sqlalchemy.engine.Engine [cached since 8356s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,299 - sqlalchemy.engine.Engine - INFO - [cached since 8356s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 18:13:42,299 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=0.94ms
INFO:     127.0.0.1:58771 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 18:13:42,300 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 18:13:42,300 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 18:13:42,620 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=277.40ms
INFO:     127.0.0.1:58771 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
âœ“ Compiled in 34ms
âœ“ Compiled in 113ms
 GET /?ticker=002050 200 in 164ms (compile: 63ms, render: 101ms)
INFO:     127.0.0.1:61798 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61799 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
INFO:     127.0.0.1:61800 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:15:35,717 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:15:35,717 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:15:35,718 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,718 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,719 INFO sqlalchemy.engine.Engine [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,719 - sqlalchemy.engine.Engine - INFO - [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:15:35,721 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:15:35,721 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:15:35,721 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,721 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,721 INFO sqlalchemy.engine.Engine [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,721 - sqlalchemy.engine.Engine - INFO - [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:15:35,721 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:15:35,721 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:15:35,721 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,721 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,722 INFO sqlalchemy.engine.Engine [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,722 - sqlalchemy.engine.Engine - INFO - [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,733 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:15:35,733 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:15:35,734 INFO sqlalchemy.engine.Engine [cached since 8954s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:15:35,734 - sqlalchemy.engine.Engine - INFO - [cached since 8954s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:15:35,735 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:15:35,735 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:15:35,735 INFO sqlalchemy.engine.Engine [cached since 8954s ago] ('002050', 20, 0)
2026-02-09 20:15:35,735 - sqlalchemy.engine.Engine - INFO - [cached since 8954s ago] ('002050', 20, 0)
2026-02-09 20:15:35,737 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 20:15:35,737 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 20:15:35,737 INFO sqlalchemy.engine.Engine [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,737 - sqlalchemy.engine.Engine - INFO - [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,746 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=25.54ms
INFO:     127.0.0.1:61800 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 20:15:35,747 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:15:35,747 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:15:35,748 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=42.53ms
INFO:     127.0.0.1:61799 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 20:15:35,749 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:15:35,749 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:15:35,749 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=29.39ms
INFO:     127.0.0.1:61798 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 20:15:35,750 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:15:35,750 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:61798 - "OPTIONS /api/user/me HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:15:35,754 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:15:35,754 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:15:35,755 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,755 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:15:35,755 INFO sqlalchemy.engine.Engine [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,755 - sqlalchemy.engine.Engine - INFO - [cached since 9085s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:15:35,755 - api_logger - INFO - rid=/api/user/me method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=1.25ms
INFO:     127.0.0.1:61798 - "GET /api/user/me HTTP/1.1" 200 OK
2026-02-09 20:15:35,755 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:15:35,755 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:61798 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:15:36,336 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=528.65ms
INFO:     127.0.0.1:61798 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=AMD 200 in 22ms (compile: 5ms, render: 16ms)
INFO:     127.0.0.1:62025 - "OPTIONS /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62026 - "OPTIONS /api/analysis/AMD HTTP/1.1" 200 OK
INFO:     127.0.0.1:62027 - "OPTIONS /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62028 - "OPTIONS /api/portfolio/AMD/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:20,321 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:20,321 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:20,321 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,321 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,321 INFO sqlalchemy.engine.Engine [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,321 - sqlalchemy.engine.Engine - INFO - [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:20,322 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:20,322 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:20,322 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,322 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,322 INFO sqlalchemy.engine.Engine [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,322 - sqlalchemy.engine.Engine - INFO - [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,323 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,323 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,323 INFO sqlalchemy.engine.Engine [cached since 9119s ago] ('AMD', 20, 0)
2026-02-09 20:18:20,323 - sqlalchemy.engine.Engine - INFO - [cached since 9119s ago] ('AMD', 20, 0)
2026-02-09 20:18:20,324 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,324 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,324 INFO sqlalchemy.engine.Engine [cached since 9119s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:18:20,324 - sqlalchemy.engine.Engine - INFO - [cached since 9119s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:18:20,325 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.13ms
INFO:     127.0.0.1:62028 - "GET /api/analysis/AMD HTTP/1.1" 200 OK
2026-02-09 20:18:20,325 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:20,325 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:18:20,326 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.44ms
INFO:     127.0.0.1:62027 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-09 20:18:20,327 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:20,327 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:20,364 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:20,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:20,364 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,364 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,365 INFO sqlalchemy.engine.Engine [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,365 - sqlalchemy.engine.Engine - INFO - [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:20,365 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:20,365 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:20,365 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,365 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,365 INFO sqlalchemy.engine.Engine [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,365 - sqlalchemy.engine.Engine - INFO - [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,366 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,366 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,366 INFO sqlalchemy.engine.Engine [cached since 9119s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:18:20,366 - sqlalchemy.engine.Engine - INFO - [cached since 9119s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:18:20,367 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,367 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,367 INFO sqlalchemy.engine.Engine [cached since 9119s ago] ('002050', 20, 0)
2026-02-09 20:18:20,367 - sqlalchemy.engine.Engine - INFO - [cached since 9119s ago] ('002050', 20, 0)
2026-02-09 20:18:20,367 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.78ms
INFO:     127.0.0.1:62028 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 20:18:20,368 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.92ms
INFO:     127.0.0.1:62025 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 20:18:20,368 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:20,368 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:18:20,368 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:20,368 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:20,456 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:20,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:20,456 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,456 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,456 INFO sqlalchemy.engine.Engine [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,456 - sqlalchemy.engine.Engine - INFO - [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:20,456 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:20,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:20,457 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,457 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:20,457 INFO sqlalchemy.engine.Engine [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,457 - sqlalchemy.engine.Engine - INFO - [cached since 9249s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:20,458 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,458 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,458 INFO sqlalchemy.engine.Engine [cached since 9119s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:18:20,458 - sqlalchemy.engine.Engine - INFO - [cached since 9119s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:18:20,459 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,459 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:20,459 INFO sqlalchemy.engine.Engine [cached since 9119s ago] ('AMD', 20, 0)
2026-02-09 20:18:20,459 - sqlalchemy.engine.Engine - INFO - [cached since 9119s ago] ('AMD', 20, 0)
2026-02-09 20:18:20,459 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.01ms
INFO:     127.0.0.1:62025 - "GET /api/analysis/AMD HTTP/1.1" 200 OK
2026-02-09 20:18:20,460 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:20,460 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:18:20,461 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.15ms
INFO:     127.0.0.1:62028 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-09 20:18:20,462 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:20,462 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:18:20,662 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=345.72ms
INFO:     127.0.0.1:62026 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:18:20,924 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=561.82ms
INFO:     127.0.0.1:62027 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:18:20,999 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=335.19ms
INFO:     127.0.0.1:62028 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:18:21,324 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=324.02ms
INFO:     127.0.0.1:62027 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:18:21,510 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=585.37ms
INFO:     127.0.0.1:62026 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:18:21,673 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=348.38ms
INFO:     127.0.0.1:62028 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62059 - "OPTIONS /api/analysis/AMD?force=true HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:25,021 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:25,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:25,021 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:25,021 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:25,021 INFO sqlalchemy.engine.Engine [cached since 9254s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:25,021 - sqlalchemy.engine.Engine - INFO - [cached since 9254s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:25,024 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:18:25,024 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:18:25,024 INFO sqlalchemy.engine.Engine [generated in 0.00040s] ('AMD',)
2026-02-09 20:18:25,024 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('AMD',)
2026-02-09 20:18:25,026 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:18:25,026 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:18:25,026 INFO sqlalchemy.engine.Engine [cached since 8560s ago] ('AMD',)
2026-02-09 20:18:25,026 - sqlalchemy.engine.Engine - INFO - [cached since 8560s ago] ('AMD',)
2026-02-09 20:18:25,995 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:18:25,995 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:18:25,995 INFO sqlalchemy.engine.Engine [cached since 0.9714s ago] ('AMD',)
2026-02-09 20:18:25,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.9714s ago] ('AMD',)
2026-02-09 20:18:25,999 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:25,999 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:25,999 INFO sqlalchemy.engine.Engine [no key 0.00025s] ('34693beb-634a-3482-a454-7a59e3cdd8ea', 'AMD', 'Latest News In AI Chips - AI Market Expansion Fueled By Technological Advancements', 'Simply Wall St.', 'https://finance.yahoo.com/news/latest-news-ai-chips-ai-113722593.html', '2026-02-09 11:37:22.000000', None)
2026-02-09 20:18:25,999 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] ('34693beb-634a-3482-a454-7a59e3cdd8ea', 'AMD', 'Latest News In AI Chips - AI Market Expansion Fueled By Technological Advancements', 'Simply Wall St.', 'https://finance.yahoo.com/news/latest-news-ai-chips-ai-113722593.html', '2026-02-09 11:37:22.000000', None)
2026-02-09 20:18:26,000 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,000 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,000 INFO sqlalchemy.engine.Engine [no key 0.00016s] ('b939ab1e-9aa3-3124-8dd1-bf62fbc92f00', 'AMD', 'US Equity Investors to Focus on Semiconductor Equipment Earnings Alongside Inflation, Jobs This Week', 'MT Newswires', 'https://finance.yahoo.com/news/us-equity-investors-focus-semiconductor-112925666.html', '2026-02-09 11:29:25.000000', None)
2026-02-09 20:18:26,000 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ('b939ab1e-9aa3-3124-8dd1-bf62fbc92f00', 'AMD', 'US Equity Investors to Focus on Semiconductor Equipment Earnings Alongside Inflation, Jobs This Week', 'MT Newswires', 'https://finance.yahoo.com/news/us-equity-investors-focus-semiconductor-112925666.html', '2026-02-09 11:29:25.000000', None)
2026-02-09 20:18:26,001 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,001 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,001 INFO sqlalchemy.engine.Engine [no key 0.00011s] ('b72247d3-bdc9-3ccc-bd94-f84bd4f8ee8b', 'AMD', "Prediction: Amazon's Sell-Off Will Set Up a Monster Rebound in 2026", 'Motley Fool', 'https://finance.yahoo.com/news/prediction-amazons-sell-off-set-100400919.html', '2026-02-09 10:04:00.000000', None)
2026-02-09 20:18:26,001 - sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ('b72247d3-bdc9-3ccc-bd94-f84bd4f8ee8b', 'AMD', "Prediction: Amazon's Sell-Off Will Set Up a Monster Rebound in 2026", 'Motley Fool', 'https://finance.yahoo.com/news/prediction-amazons-sell-off-set-100400919.html', '2026-02-09 10:04:00.000000', None)
2026-02-09 20:18:26,002 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,002 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,002 INFO sqlalchemy.engine.Engine [no key 0.00010s] ('dd29006e-8e12-36c6-afc3-f1042305bbc3', 'AMD', 'Is Micron the New Nvidia?', 'Motley Fool', 'https://finance.yahoo.com/news/micron-nvidia-234500267.html', '2026-02-08 23:45:00.000000', None)
2026-02-09 20:18:26,002 - sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ('dd29006e-8e12-36c6-afc3-f1042305bbc3', 'AMD', 'Is Micron the New Nvidia?', 'Motley Fool', 'https://finance.yahoo.com/news/micron-nvidia-234500267.html', '2026-02-08 23:45:00.000000', None)
2026-02-09 20:18:26,003 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,003 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,003 INFO sqlalchemy.engine.Engine [no key 0.00009s] ('d564112b-12a9-3d3f-8ab4-d5670fab9c3e', 'AMD', 'Goldman Sachs revamps Nvidia stock forecast ahead of earnings', 'TheStreet', 'https://finance.yahoo.com/news/goldman-sachs-revamps-nvidia-stock-184524432.html', '2026-02-08 18:45:24.000000', None)
2026-02-09 20:18:26,003 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ('d564112b-12a9-3d3f-8ab4-d5670fab9c3e', 'AMD', 'Goldman Sachs revamps Nvidia stock forecast ahead of earnings', 'TheStreet', 'https://finance.yahoo.com/news/goldman-sachs-revamps-nvidia-stock-184524432.html', '2026-02-08 18:45:24.000000', None)
2026-02-09 20:18:26,003 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,003 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,003 INFO sqlalchemy.engine.Engine [no key 0.00009s] ('2f4b559e-b426-3efd-911e-0deb2a756756', 'AMD', 'The Robot Revolution Is Real. Tesla, Hyundai, and More Stocks to Play It.', 'Barrons.com', 'https://www.barrons.com/articles/robot-stocks-tesla-nvidia-gm-ford-ai-humanoid-6629c2c3?siteid=yhoof2&yptr=yahoo', '2026-02-08 14:32:00.000000', None)
2026-02-09 20:18:26,003 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ('2f4b559e-b426-3efd-911e-0deb2a756756', 'AMD', 'The Robot Revolution Is Real. Tesla, Hyundai, and More Stocks to Play It.', 'Barrons.com', 'https://www.barrons.com/articles/robot-stocks-tesla-nvidia-gm-ford-ai-humanoid-6629c2c3?siteid=yhoof2&yptr=yahoo', '2026-02-08 14:32:00.000000', None)
2026-02-09 20:18:26,004 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,004 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,004 INFO sqlalchemy.engine.Engine [no key 0.00009s] ('1fd23bcb-3544-3f36-b8d1-2d127a5fce5b', 'AMD', 'Advanced Micro Devices (AMD) Stock Just Plunged. Buy the Dip, or Run for the Hills?', 'Motley Fool', 'https://finance.yahoo.com/news/advanced-micro-devices-amd-stock-140700429.html', '2026-02-08 14:07:00.000000', None)
2026-02-09 20:18:26,004 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ('1fd23bcb-3544-3f36-b8d1-2d127a5fce5b', 'AMD', 'Advanced Micro Devices (AMD) Stock Just Plunged. Buy the Dip, or Run for the Hills?', 'Motley Fool', 'https://finance.yahoo.com/news/advanced-micro-devices-amd-stock-140700429.html', '2026-02-08 14:07:00.000000', None)
2026-02-09 20:18:26,004 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,004 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,004 INFO sqlalchemy.engine.Engine [no key 0.00009s] ('cbe3b00b-552c-3c73-96ab-c2fcf36b1dab', 'AMD', "Here's How Micron Technology, AMD, and Nvidia Could Help This Magnificent ETF Turn $500 Per Month Into $1 Million", 'Motley Fool', 'https://finance.yahoo.com/news/heres-micron-technology-amd-nvidia-111200290.html', '2026-02-08 11:12:00.000000', None)
2026-02-09 20:18:26,004 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ('cbe3b00b-552c-3c73-96ab-c2fcf36b1dab', 'AMD', "Here's How Micron Technology, AMD, and Nvidia Could Help This Magnificent ETF Turn $500 Per Month Into $1 Million", 'Motley Fool', 'https://finance.yahoo.com/news/heres-micron-technology-amd-nvidia-111200290.html', '2026-02-08 11:12:00.000000', None)
2026-02-09 20:18:26,005 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,005 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,005 INFO sqlalchemy.engine.Engine [no key 0.00010s] ('69912346-44ee-32f8-aa26-31068e64e33c', 'AMD', 'AMD Supply Strain Highlights Growing Role In Global AI Data Centers', 'Simply Wall St.', 'https://finance.yahoo.com/news/amd-supply-strain-highlights-growing-100623347.html', '2026-02-08 10:06:23.000000', None)
2026-02-09 20:18:26,005 - sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ('69912346-44ee-32f8-aa26-31068e64e33c', 'AMD', 'AMD Supply Strain Highlights Growing Role In Global AI Data Centers', 'Simply Wall St.', 'https://finance.yahoo.com/news/amd-supply-strain-highlights-growing-100623347.html', '2026-02-08 10:06:23.000000', None)
2026-02-09 20:18:26,006 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,006 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:18:26,006 INFO sqlalchemy.engine.Engine [no key 0.00009s] ('c97a4444-37be-371f-9572-49b225409c0a', 'AMD', '5 big analyst AI moves: Microsoft stock downgraded as itâ€™s â€™time for a breakâ€™', 'Investing.com', 'https://finance.yahoo.com/news/5-big-analyst-ai-moves-093503505.html', '2026-02-08 09:35:03.000000', None)
2026-02-09 20:18:26,006 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ('c97a4444-37be-371f-9572-49b225409c0a', 'AMD', '5 big analyst AI moves: Microsoft stock downgraded as itâ€™s â€™time for a breakâ€™', 'Investing.com', 'https://finance.yahoo.com/news/5-big-analyst-ai-moves-093503505.html', '2026-02-08 09:35:03.000000', None)
2026-02-09 20:18:26,009 INFO sqlalchemy.engine.Engine UPDATE market_data_cache SET adx_14=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:18:26,009 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET adx_14=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:18:26,009 INFO sqlalchemy.engine.Engine [generated in 0.00012s] (nan, '2026-02-09 12:18:25.027493', 'AMD')
2026-02-09 20:18:26,009 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] (nan, '2026-02-09 12:18:25.027493', 'AMD')
2026-02-09 20:18:26,010 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 20:18:26,010 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 20:18:26,011 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:26,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:26,012 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:18:26,012 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:18:26,012 INFO sqlalchemy.engine.Engine [generated in 0.00009s] ('AMD',)
2026-02-09 20:18:26,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ('AMD',)
2026-02-09 20:18:26,013 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:26,013 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:26,013 INFO sqlalchemy.engine.Engine [cached since 9125s ago] ('AMD', 5, 0)
2026-02-09 20:18:26,013 - sqlalchemy.engine.Engine - INFO - [cached since 9125s ago] ('AMD', 5, 0)
2026-02-09 20:18:26,014 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 20:18:26,014 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 20:18:26,014 INFO sqlalchemy.engine.Engine [cached since 8561s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD')
2026-02-09 20:18:26,014 - sqlalchemy.engine.Engine - INFO - [cached since 8561s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD')
2026-02-09 20:18:26,014 - app.api.v1.endpoints.analysis - INFO - Preparing AI analysis for AMD. Market Data keys present: ['current_price', 'change_percent', 'rsi_14', 'ma_20', 'ma_50', 'ma_200', 'macd_val', 'macd_hist', 'bb_upper', 'bb_lower', 'kdj_k', 'atr_14', 'market_status']
2026-02-09 20:18:26,021 - app.services.ai_service - INFO - --- AI ANALYSIS PROMPT FOR AMD ---

        ä½ æ˜¯ä¸€ä½èµ„æ·±ç¾Žè‚¡æŠ•èµ„é¡¾é—®å’Œé‡åŒ–ç­–ç•¥ä¸“å®¶ã€‚è¯·åŸºäºŽä»¥ä¸‹å¤šç»´æ•°æ®ä¸ºä»£ç  [AMD] æä¾›ä¸¥è°¨çš„è¯Šæ–­ã€‚
        
        **1. åŸºç¡€é¢æ¦‚è§ˆ (Fundamental Context)**:
        - è¡Œä¸š/æ¿å—: Technology / Semiconductors
        - å¸‚å€¼: 339842859008.0
        - PE (TTM): 79.86 | Forward PE: 19.75
        - 52å‘¨æ³¢åŠ¨èŒƒå›´: [76.48, 267.08]
        - Beta: 1.95
        
        **2. ç”¨æˆ·æŒä»“èƒŒæ™¯ (Portfolio Context)**:
        - å½“å‰æˆæœ¬ä»·: $220.0
        - æŒä»“æ•°é‡: 3.0
        - æœªå®žçŽ°ç›ˆäº: $-34.68000000000001 (-5.254545454545456%)
        
        **3. å®žæ—¶æŠ€æœ¯é¢æ•°æ® (Technical Data)**:
        - å½“å‰ä»·æ ¼: $208.44
        - ä»Šæ—¥æ¶¨è·Œ: 8.28%
        - RSI (14): 41.2 | KDJ (K): None / (D): None / (J): None
        - MACD: -1.51 (æŸ±çŠ¶å›¾: -5.71, æ–œçŽ‡: None)
        - å¸ƒæž—å¸¦ (BB): ä¸Šè½¨: 273.92 | å‡çº¿: None | ä¸‹è½¨: 190.56
        - MA å‡çº¿: [20: 232.24, 50: 221.47, 200: 179.04]
        - è¶‹åŠ¿å¼ºåº¦ (ADX): None | ATR: 15.91
        - æž¢è½´å‚è€ƒ (Pivots): é˜»åŠ›ä½ R1: None / R2: None | æ”¯æ’‘ä½ S1: None / S2: None
        
        **4. æœ€æ–°æ¶ˆæ¯é¢ (Recent News)**:
        [{'title': 'Latest News In AI Chips - AI Market Expansion Fueled By Technological Advancements', 'publisher': 'Simply Wall St.', 'time': '2026-02-09T11:37:22'}, {'title': 'US Equity Investors to Focus on Semiconductor Equipment Earnings Alongside Inflation, Jobs This Week', 'publisher': 'MT Newswires', 'time': '2026-02-09T11:29:25'}, {'title': "Prediction: Amazon's Sell-Off Will Set Up a Monster Rebound in 2026", 'publisher': 'Motley Fool', 'time': '2026-02-09T10:04:00'}, {'title': 'Is Micron the New Nvidia?', 'publisher': 'Motley Fool', 'time': '2026-02-08T23:45:00'}, {'title': 'Goldman Sachs revamps Nvidia stock forecast ahead of earnings', 'publisher': 'TheStreet', 'time': '2026-02-08T18:45:24'}]
        
        **ä»»åŠ¡ (Core Task)**:
        è¯·æ‰§è¡Œâ€œé€»è¾‘ä¸¥å¯†â€çš„æŠ•èµ„è¯Šæ–­ã€‚
        
        **é‡è¦å‡†åˆ™ (Strict Rules)**:
        - **æ•°æ®é©±åŠ¨**: æ‰€æœ‰çš„æ­¢æŸä½ã€åŠ ä»“ä½å’Œç›®æ ‡ä»·**å¿…é¡»åŸºäºŽä¸Šè¿°æä¾›çš„æŠ€æœ¯æŒ‡æ ‡æˆ–åŸºç¡€é¢æ•°å€¼**ã€‚ä¾‹å¦‚ï¼Œâ€œæ­¢æŸè®¾åœ¨ MA50 (221.47) é™„è¿‘â€æˆ–â€œå‚è€ƒå¸ƒæž—çº¿ä¸‹è½¨ (190.56)â€ã€‚
        - **ä¸¥ç¦ä¹±é€ **: ä¸è¦å‡­ç©ºç¼–é€  99.42 ä¹‹ç±»æ²¡æœ‰ä»»ä½•å‚è€ƒæ„ä¹‰çš„æ•°å­—ã€‚æ‰€æœ‰çš„ä»·æ ¼é”šç‚¹å¿…é¡»åœ¨æ•°æ®ä¸­æœ‰è¿¹å¯å¾ªã€‚
        - **æŒä»“é€»è¾‘**: å¦‚æžœç”¨æˆ·å½“å‰æŒä»“ä¸º 0ï¼Œå»ºè®®åº”ä¾§é‡äºŽå»ºä»“ç‚¹ä½ï¼›å¦‚æžœå·²æœ‰æŒä»“ä¸”æµ®ç›ˆ/æµ®äºè¾ƒå¤§ï¼Œåº”ç»™å‡ºæ­¢ç›ˆ/åŠ ç æˆ–å‡ä»“ç­–ç•¥ã€‚
        
        **è¿”å›žæ ¼å¼è¦æ±‚**:
        - ä½¿ç”¨ç®€æ´ã€ä¸“ä¸šçš„ä¸­æ–‡ã€‚
        - **å¿…é¡»åœ¨ `technical_analysis` ä¸­æ˜Žç¡®å¼•ç”¨ä»¥ä¸‹æ•°å€¼**: å½“å‰ä»·æ ¼ã€RSIã€MACDã€MA50/200 æˆ–å¸ƒæž—å¸¦ä½ç‚¹ã€‚
        - **ä¸¥è°¨ç²¾åº¦**: AI å»ºè®®ä¸­çš„æ‰€æœ‰ä»·æ ¼æ•°å€¼ã€æŒ‡æ ‡æ•°å€¼å¿…é¡»**å››èˆäº”å…¥ä¿ç•™ 2 ä½å°æ•°ç‚¹**ï¼ˆä¾‹å¦‚ï¼š88.54 è€Œä¸æ˜¯ 88.544834ï¼‰ã€‚
        - å¿…é¡»è¿”å›žä¸¥æ ¼çš„ JSON æ ¼å¼ã€‚
        
        ç»“æžœç»“æž„:
        {
            "sentiment_score": 0-100 (é‡åŒ–è¯„åˆ†ï¼š0=æžåº¦çœ‹ç©º, 50=ä¸­æ€§, 100=æžåº¦çœ‹å¤š), 
            "summary_status": "4-6å­—å®šè°ƒ",
            "immediate_action": "é’ˆå¯¹å½“ä¸‹çš„å†³ç­–å»ºè®® (ä¾‹å¦‚ï¼šé€¢ä½Žä¹°å…¥/è¶‹åŠ¿åšå¤š/æŒä»“è§‚æœ›/åˆ†æ‰¹å‡æŒ)",
            "entry_price_low": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸‹é™ (Float, ä¾‹å¦‚ï¼š50.50)ã€‚å¿…é¡»åŸºäºŽæŠ€æœ¯ä½ï¼ˆå¦‚å¸ƒæž—ä¸‹è½¨æˆ–æ”¯æ’‘ä½ï¼‰ã€‚",
            "entry_price_high": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸Šé™ (Float, ä¾‹å¦‚ï¼š52.00)ã€‚å¿…é¡»åŸºäºŽæŠ€æœ¯ä½ã€‚",
            "target_price": "é¢„æœŸçš„æ­¢ç›ˆä½ (Float)",
            "stop_loss_price": "[CRITICAL] é¢„æœŸçš„æ­¢æŸä½ (Float)ã€‚å¿…é¡»ä¸¥æ ¼ä½ŽäºŽ entry_price_low (é€šå¸¸å»ºè®®ä½Ž 2%-5% æˆ–è®¾åœ¨æ›´ä½Žä¸€å±‚çš„å…³é”®æ”¯æ’‘ä½)ï¼Œä¸¥ç¦ä¸Žå»ºä»“ä¸‹é™é‡å ã€‚",
            "risk_level": "é£Žé™©ç­‰çº§ï¼šä½Ž/ä¸­/é«˜",
            "investment_horizon": "å»ºè®®æŒä»“æœŸé™",
            "confidence_level": 0-100 (AI ä¿¡å¿ƒæŒ‡æ•°),
            "rr_ratio": "é¢„ä¼°ç›ˆäºæ¯”",
            "technical_analysis": "æ ¸å¿ƒæŠ€æœ¯ä½è§£è¯»ï¼ˆå¿…é¡»åˆ†æž RSI, MACD, MA50 ç­‰æ•°å€¼ï¼‰",
            "fundamental_news": "åŸºç¡€é¢/æ¶ˆæ¯é¢æ·±åº¦è§£è¯»",
            "action_advice": "è¯¦ç»†çš„æ“ä½œé€»è¾‘ä¸Žä»“ä½æŽ§åˆ¶ç­–ç•¥ã€‚å¿…é¡»ä½¿ç”¨ã€ç»“æž„åŒ–åˆ—è¡¨ã€‘æ ¼å¼ï¼Œä¸¥ç¦é•¿ç¯‡å¤§è®ºã€‚åŒ…å«ï¼šðŸ”µ é¦–æ‰¹å»ºä»“ã€ðŸ”µ æ¬¡æ‰¹åŠ ç ã€ðŸ”´ æ­¢æŸæ–¹æ¡ˆã€ðŸŸ¢ ç›®æ ‡æ­¢ç›ˆ ç­‰å…³é”®ç‚¹ã€‚"
        }
        
--------------------------------------
2026-02-09 20:18:46,230 - httpx - INFO - HTTP Request: POST https://api.siliconflow.cn/v1/chat/completions "HTTP/1.1 200 OK"
2026-02-09 20:18:46,234 - app.api.v1.endpoints.analysis - INFO - AI Response for AMD: {
    "sentiment_score": 68,
    "summary_status": "éœ‡è¡åå¼º",
    "immediate_action": "æŒä»“è§‚æœ›",
    "entry_price_low": 190.56,
    "entry_price_high": 208.44,
    "target_price": 267.08,
    "stop_loss_price": 186.75,
    "risk_level": "ä¸­",
    "investment_horizon": "3-6ä¸ªæœˆ",
    "confidence_level": 75,
    "rr_ratio": 3.15,
    "technical_analysis": "å½“å‰ä»·æ ¼208.44è·Œç ´MA50(221.47)ä½†é«˜äºŽå¸ƒæž—ä¸‹è½¨190.56ï¼Œæ˜¾ç¤ºçŸ­æœŸä¸‹è¡ŒåŽ‹åŠ›ï¼›RSI 41.2å¤„äºŽä¸­æ€§åå¼±åŒºåŸŸï¼ŒMACDæŸ±çŠ¶å›¾-5.71ä»å¤„è´Ÿå€¼ä½†æ–œçŽ‡è¶‹ç¨³ï¼›MA200(179.04)æž„æˆå…³é”®æ”¯æ’‘ä½ï¼Œå½“å‰ä»·æ ¼è·ç¦»è¯¥å‡çº¿ä»æœ‰10.2%ä¸Šè¡Œç©ºé—´ã€‚",
    "fundamental_news": "åŠå¯¼ä½“è¡Œä¸šå—AIèŠ¯ç‰‡éœ€æ±‚æ‰©å¼ æŒç»­é©±åŠ¨ï¼Œæ¿å—è¿‘æœŸèšç„¦è®¾å¤‡åŽ‚å•†è´¢æŠ¥ä¸Žé€šèƒ€æ•°æ®ã€‚AMDä½œä¸ºç®—åŠ›æ ¸å¿ƒä¾›åº”å•†ï¼ŒForward PE 19.75æ˜¾è‘—ä½ŽäºŽTTMå€¼ï¼Œåæ˜ å¸‚åœºå¯¹ä¸šç»©æ”¹å–„é¢„æœŸã€‚éœ€è­¦æƒ•Betaå€¼1.95å¸¦æ¥çš„é«˜æ³¢åŠ¨é£Žé™©ï¼Œä½†é•¿æœŸå—ç›ŠäºŽAIåŸºç¡€è®¾æ–½å»ºè®¾æµªæ½®ã€‚",
    "action_advice": "â—ã€å¿…é¡»åˆ†3æ­¥æ‰§è¡Œã€‘\nðŸ”µ é¦–æ‰¹å»ºä»“ï¼šå½“å‰ä»·208.44å¯è¡¥ä»“è‡³5æ‰‹ï¼ˆæˆæœ¬æ‘Šè–„è‡³215.36ï¼‰\nðŸ”µ æ¬¡æ‰¹åŠ ç ï¼šè§¦åŠå¸ƒæž—ä¸‹è½¨190.56æ—¶åŠ ä»“è‡³7æ‰‹\nðŸ”´ æ­¢æŸæ–¹æ¡ˆï¼šè·Œç ´MA200ï¼ˆ179.04ï¼‰å³åˆ»æ¸…ä»“ï¼Œé¢„è®¾186.75è§¦å‘\nðŸŸ¢ ç›®æ ‡æ­¢ç›ˆï¼šåˆ†æ‰¹æ­¢ç›ˆäºŽ260.00ï¼ˆ50%ä»“ä½ï¼‰å’Œ267.08ï¼ˆ25%ä»“ä½ï¼‰"
}
2026-02-09 20:18:46,236 INFO sqlalchemy.engine.Engine INSERT INTO analysis_reports (id, user_id, ticker, input_context_snapshot, ai_response_markdown, sentiment_score, summary_status, risk_level, technical_analysis, fundamental_news, action_advice, investment_horizon, confidence_level, immediate_action, target_price, stop_loss_price, entry_zone, entry_price_low, entry_price_high, rr_ratio, model_used, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 20:18:46,236 - sqlalchemy.engine.Engine - INFO - INSERT INTO analysis_reports (id, user_id, ticker, input_context_snapshot, ai_response_markdown, sentiment_score, summary_status, risk_level, technical_analysis, fundamental_news, action_advice, investment_horizon, confidence_level, immediate_action, target_price, stop_loss_price, entry_zone, entry_price_low, entry_price_high, rr_ratio, model_used, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 20:18:46,236 INFO sqlalchemy.engine.Engine [generated in 0.00051s] ('0eaba067-6524-4b97-ac37-b7259eecccf2', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', '{"market_data": {"current_price": 208.44, "change_percent": 8.28, "rsi_14": 41.2, "ma_20": 232.24, "ma_50": 221.47, "ma_200": 179.04, "macd_val": -1. ... (100 characters truncated) ... rket_status": "OPEN"}, "portfolio_data": {"avg_cost": 220.0, "quantity": 3.0, "unrealized_pl": -34.68000000000001, "pl_percent": -5.254545454545456}}', '{\n    "sentiment_score": 68,\n    "summary_status": "éœ‡è¡åå¼º",\n    "immediate_action": "æŒä»“è§‚æœ›",\n    "entry_price_low": 190.56,\n    "entry_price_high" ... (532 characters truncated) ... ðŸ”µ é¦–æ‰¹å»ºä»“ï¼šå½“å‰ä»·208.44å¯è¡¥ä»“è‡³5æ‰‹ï¼ˆæˆæœ¬æ‘Šè–„è‡³215.36ï¼‰\\nðŸ”µ æ¬¡æ‰¹åŠ ç ï¼šè§¦åŠå¸ƒæž—ä¸‹è½¨190.56æ—¶åŠ ä»“è‡³7æ‰‹\\nðŸ”´ æ­¢æŸæ–¹æ¡ˆï¼šè·Œç ´MA200ï¼ˆ179.04ï¼‰å³åˆ»æ¸…ä»“ï¼Œé¢„è®¾186.75è§¦å‘\\nðŸŸ¢ ç›®æ ‡æ­¢ç›ˆï¼šåˆ†æ‰¹æ­¢ç›ˆäºŽ260.00ï¼ˆ50%ä»“ä½ï¼‰å’Œ267.08ï¼ˆ25%ä»“ä½ï¼‰"\n}', '68', 'éœ‡è¡åå¼º', 'ä¸­', 'å½“å‰ä»·æ ¼208.44è·Œç ´MA50(221.47)ä½†é«˜äºŽå¸ƒæž—ä¸‹è½¨190.56ï¼Œæ˜¾ç¤ºçŸ­æœŸä¸‹è¡ŒåŽ‹åŠ›ï¼›RSI 41.2å¤„äºŽä¸­æ€§åå¼±åŒºåŸŸï¼ŒMACDæŸ±çŠ¶å›¾-5.71ä»å¤„è´Ÿå€¼ä½†æ–œçŽ‡è¶‹ç¨³ï¼›MA200(179.04)æž„æˆå…³é”®æ”¯æ’‘ä½ï¼Œå½“å‰ä»·æ ¼è·ç¦»è¯¥å‡çº¿ä»æœ‰10.2%ä¸Šè¡Œç©ºé—´ã€‚', 'åŠå¯¼ä½“è¡Œä¸šå—AIèŠ¯ç‰‡éœ€æ±‚æ‰©å¼ æŒç»­é©±åŠ¨ï¼Œæ¿å—è¿‘æœŸèšç„¦è®¾å¤‡åŽ‚å•†è´¢æŠ¥ä¸Žé€šèƒ€æ•°æ®ã€‚AMDä½œä¸ºç®—åŠ›æ ¸å¿ƒä¾›åº”å•†ï¼ŒForward PE 19.75æ˜¾è‘—ä½ŽäºŽTTMå€¼ï¼Œåæ˜ å¸‚åœºå¯¹ä¸šç»©æ”¹å–„é¢„æœŸã€‚éœ€è­¦æƒ•Betaå€¼1.95å¸¦æ¥çš„é«˜æ³¢åŠ¨é£Žé™©ï¼Œä½†é•¿æœŸå—ç›ŠäºŽAIåŸºç¡€è®¾æ–½å»ºè®¾æµªæ½®ã€‚', 'â—ã€å¿…é¡»åˆ†3æ­¥æ‰§è¡Œã€‘\nðŸ”µ é¦–æ‰¹å»ºä»“ï¼šå½“å‰ä»·208.44å¯è¡¥ä»“è‡³5æ‰‹ï¼ˆæˆæœ¬æ‘Šè–„è‡³215.36ï¼‰\nðŸ”µ æ¬¡æ‰¹åŠ ç ï¼šè§¦åŠå¸ƒæž—ä¸‹è½¨190.56æ—¶åŠ ä»“è‡³7æ‰‹\nðŸ”´ æ­¢æŸæ–¹æ¡ˆï¼šè·Œç ´MA200ï¼ˆ179.04ï¼‰å³åˆ»æ¸…ä»“ï¼Œé¢„è®¾186.75è§¦å‘\nðŸŸ¢ ç›®æ ‡æ­¢ç›ˆï¼šåˆ†æ‰¹æ­¢ç›ˆäºŽ260.00ï¼ˆ50%ä»“ä½ï¼‰å’Œ267.08ï¼ˆ25%ä»“ä½ï¼‰', '3-6ä¸ªæœˆ', 75.0, 'æŒä»“è§‚æœ›', 267.08, 186.75, 'Near 208.44', 190.56, 208.44, '3.15', 'qwen-3-vl-thinking', '2026-02-09 12:18:46.236593')
2026-02-09 20:18:46,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('0eaba067-6524-4b97-ac37-b7259eecccf2', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', '{"market_data": {"current_price": 208.44, "change_percent": 8.28, "rsi_14": 41.2, "ma_20": 232.24, "ma_50": 221.47, "ma_200": 179.04, "macd_val": -1. ... (100 characters truncated) ... rket_status": "OPEN"}, "portfolio_data": {"avg_cost": 220.0, "quantity": 3.0, "unrealized_pl": -34.68000000000001, "pl_percent": -5.254545454545456}}', '{\n    "sentiment_score": 68,\n    "summary_status": "éœ‡è¡åå¼º",\n    "immediate_action": "æŒä»“è§‚æœ›",\n    "entry_price_low": 190.56,\n    "entry_price_high" ... (532 characters truncated) ... ðŸ”µ é¦–æ‰¹å»ºä»“ï¼šå½“å‰ä»·208.44å¯è¡¥ä»“è‡³5æ‰‹ï¼ˆæˆæœ¬æ‘Šè–„è‡³215.36ï¼‰\\nðŸ”µ æ¬¡æ‰¹åŠ ç ï¼šè§¦åŠå¸ƒæž—ä¸‹è½¨190.56æ—¶åŠ ä»“è‡³7æ‰‹\\nðŸ”´ æ­¢æŸæ–¹æ¡ˆï¼šè·Œç ´MA200ï¼ˆ179.04ï¼‰å³åˆ»æ¸…ä»“ï¼Œé¢„è®¾186.75è§¦å‘\\nðŸŸ¢ ç›®æ ‡æ­¢ç›ˆï¼šåˆ†æ‰¹æ­¢ç›ˆäºŽ260.00ï¼ˆ50%ä»“ä½ï¼‰å’Œ267.08ï¼ˆ25%ä»“ä½ï¼‰"\n}', '68', 'éœ‡è¡åå¼º', 'ä¸­', 'å½“å‰ä»·æ ¼208.44è·Œç ´MA50(221.47)ä½†é«˜äºŽå¸ƒæž—ä¸‹è½¨190.56ï¼Œæ˜¾ç¤ºçŸ­æœŸä¸‹è¡ŒåŽ‹åŠ›ï¼›RSI 41.2å¤„äºŽä¸­æ€§åå¼±åŒºåŸŸï¼ŒMACDæŸ±çŠ¶å›¾-5.71ä»å¤„è´Ÿå€¼ä½†æ–œçŽ‡è¶‹ç¨³ï¼›MA200(179.04)æž„æˆå…³é”®æ”¯æ’‘ä½ï¼Œå½“å‰ä»·æ ¼è·ç¦»è¯¥å‡çº¿ä»æœ‰10.2%ä¸Šè¡Œç©ºé—´ã€‚', 'åŠå¯¼ä½“è¡Œä¸šå—AIèŠ¯ç‰‡éœ€æ±‚æ‰©å¼ æŒç»­é©±åŠ¨ï¼Œæ¿å—è¿‘æœŸèšç„¦è®¾å¤‡åŽ‚å•†è´¢æŠ¥ä¸Žé€šèƒ€æ•°æ®ã€‚AMDä½œä¸ºç®—åŠ›æ ¸å¿ƒä¾›åº”å•†ï¼ŒForward PE 19.75æ˜¾è‘—ä½ŽäºŽTTMå€¼ï¼Œåæ˜ å¸‚åœºå¯¹ä¸šç»©æ”¹å–„é¢„æœŸã€‚éœ€è­¦æƒ•Betaå€¼1.95å¸¦æ¥çš„é«˜æ³¢åŠ¨é£Žé™©ï¼Œä½†é•¿æœŸå—ç›ŠäºŽAIåŸºç¡€è®¾æ–½å»ºè®¾æµªæ½®ã€‚', 'â—ã€å¿…é¡»åˆ†3æ­¥æ‰§è¡Œã€‘\nðŸ”µ é¦–æ‰¹å»ºä»“ï¼šå½“å‰ä»·208.44å¯è¡¥ä»“è‡³5æ‰‹ï¼ˆæˆæœ¬æ‘Šè–„è‡³215.36ï¼‰\nðŸ”µ æ¬¡æ‰¹åŠ ç ï¼šè§¦åŠå¸ƒæž—ä¸‹è½¨190.56æ—¶åŠ ä»“è‡³7æ‰‹\nðŸ”´ æ­¢æŸæ–¹æ¡ˆï¼šè·Œç ´MA200ï¼ˆ179.04ï¼‰å³åˆ»æ¸…ä»“ï¼Œé¢„è®¾186.75è§¦å‘\nðŸŸ¢ ç›®æ ‡æ­¢ç›ˆï¼šåˆ†æ‰¹æ­¢ç›ˆäºŽ260.00ï¼ˆ50%ä»“ä½ï¼‰å’Œ267.08ï¼ˆ25%ä»“ä½ï¼‰', '3-6ä¸ªæœˆ', 75.0, 'æŒä»“è§‚æœ›', 267.08, 186.75, 'Near 208.44', 190.56, 208.44, '3.15', 'qwen-3-vl-thinking', '2026-02-09 12:18:46.236593')
2026-02-09 20:18:46,238 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 20:18:46,238 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 20:18:46,240 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:46,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:46,241 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.id = ?
2026-02-09 20:18:46,241 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.id = ?
2026-02-09 20:18:46,241 INFO sqlalchemy.engine.Engine [generated in 0.00025s] ('0eaba067-6524-4b97-ac37-b7259eecccf2',)
2026-02-09 20:18:46,241 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('0eaba067-6524-4b97-ac37-b7259eecccf2',)
2026-02-09 20:18:46,244 - api_logger - INFO - rid=/api/analysis/AMD method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=21227.99ms
INFO:     127.0.0.1:62059 - "POST /api/analysis/AMD?force=true HTTP/1.1" 200 OK
2026-02-09 20:18:46,245 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:46,245 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:18:46,254 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:18:46,254 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:18:46,255 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:46,255 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:18:46,255 INFO sqlalchemy.engine.Engine [cached since 9275s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:46,255 - sqlalchemy.engine.Engine - INFO - [cached since 9275s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:18:46,256 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:46,256 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:18:46,257 INFO sqlalchemy.engine.Engine [cached since 9145s ago] ('AMD', 20, 0)
2026-02-09 20:18:46,257 - sqlalchemy.engine.Engine - INFO - [cached since 9145s ago] ('AMD', 20, 0)
2026-02-09 20:18:46,258 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.39ms
INFO:     127.0.0.1:62059 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-09 20:18:46,259 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:18:46,259 - sqlalchemy.engine.Engine - INFO - ROLLBACK
 GET /?ticker=FRO 200 in 23ms (compile: 6ms, render: 17ms)
INFO:     127.0.0.1:62605 - "OPTIONS /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62606 - "OPTIONS /api/analysis/FRO HTTP/1.1" 200 OK
INFO:     127.0.0.1:62607 - "OPTIONS /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62608 - "OPTIONS /api/portfolio/FRO/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:13,376 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:13,376 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:13,376 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,376 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,376 INFO sqlalchemy.engine.Engine [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,376 - sqlalchemy.engine.Engine - INFO - [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:13,377 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:13,377 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:13,377 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,377 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,377 INFO sqlalchemy.engine.Engine [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,377 - sqlalchemy.engine.Engine - INFO - [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,378 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,378 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,378 INFO sqlalchemy.engine.Engine [cached since 9412s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:13,378 - sqlalchemy.engine.Engine - INFO - [cached since 9412s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:13,378 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,378 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,378 INFO sqlalchemy.engine.Engine [cached since 9412s ago] ('FRO', 20, 0)
2026-02-09 20:23:13,378 - sqlalchemy.engine.Engine - INFO - [cached since 9412s ago] ('FRO', 20, 0)
2026-02-09 20:23:13,379 - api_logger - INFO - rid=/api/portfolio/FRO/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.54ms
INFO:     127.0.0.1:62606 - "GET /api/portfolio/FRO/news HTTP/1.1" 200 OK
2026-02-09 20:23:13,379 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:13,379 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:13,380 - api_logger - INFO - rid=/api/analysis/FRO method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.54ms
INFO:     127.0.0.1:62608 - "GET /api/analysis/FRO HTTP/1.1" 200 OK
2026-02-09 20:23:13,380 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:13,380 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:13,419 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:13,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:13,420 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,420 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,420 INFO sqlalchemy.engine.Engine [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,420 - sqlalchemy.engine.Engine - INFO - [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:13,421 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:13,421 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:13,421 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,421 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,421 INFO sqlalchemy.engine.Engine [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,421 - sqlalchemy.engine.Engine - INFO - [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,422 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,422 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,422 INFO sqlalchemy.engine.Engine [cached since 9412s ago] ('AMD', 20, 0)
2026-02-09 20:23:13,422 - sqlalchemy.engine.Engine - INFO - [cached since 9412s ago] ('AMD', 20, 0)
2026-02-09 20:23:13,422 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,422 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,422 INFO sqlalchemy.engine.Engine [cached since 9412s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:13,422 - sqlalchemy.engine.Engine - INFO - [cached since 9412s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:13,423 - api_logger - INFO - rid=/api/analysis/AMD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.91ms
INFO:     127.0.0.1:62606 - "GET /api/analysis/AMD HTTP/1.1" 200 OK
2026-02-09 20:23:13,423 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:13,423 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:13,424 - api_logger - INFO - rid=/api/portfolio/AMD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.77ms
INFO:     127.0.0.1:62605 - "GET /api/portfolio/AMD/news HTTP/1.1" 200 OK
2026-02-09 20:23:13,425 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:13,425 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:13,512 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:13,512 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:13,513 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,513 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,513 INFO sqlalchemy.engine.Engine [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,513 - sqlalchemy.engine.Engine - INFO - [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:13,514 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:13,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:13,514 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,514 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:13,514 INFO sqlalchemy.engine.Engine [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,514 - sqlalchemy.engine.Engine - INFO - [cached since 9542s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:13,516 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,516 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,516 INFO sqlalchemy.engine.Engine [cached since 9412s ago] ('FRO', 20, 0)
2026-02-09 20:23:13,516 - sqlalchemy.engine.Engine - INFO - [cached since 9412s ago] ('FRO', 20, 0)
2026-02-09 20:23:13,517 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,517 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:13,517 INFO sqlalchemy.engine.Engine [cached since 9412s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:13,517 - sqlalchemy.engine.Engine - INFO - [cached since 9412s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:13,518 - api_logger - INFO - rid=/api/portfolio/FRO/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.38ms
INFO:     127.0.0.1:62606 - "GET /api/portfolio/FRO/news HTTP/1.1" 200 OK
2026-02-09 20:23:13,520 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:13,520 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:13,521 - api_logger - INFO - rid=/api/analysis/FRO method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.25ms
INFO:     127.0.0.1:62605 - "GET /api/analysis/FRO HTTP/1.1" 200 OK
2026-02-09 20:23:13,526 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:13,526 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:13,821 - api_logger - INFO - rid=/api/stocks/FRO/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=449.10ms
INFO:     127.0.0.1:62607 - "GET /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:13,822 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=404.10ms
INFO:     127.0.0.1:62608 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:14,024 - api_logger - INFO - rid=/api/stocks/AMD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=200.59ms
INFO:     127.0.0.1:62606 - "GET /api/stocks/AMD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:14,189 - api_logger - INFO - rid=/api/stocks/FRO/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=366.67ms
INFO:     127.0.0.1:62605 - "GET /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:14,414 - api_logger - INFO - rid=/api/stocks/FRO/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=224.01ms
INFO:     127.0.0.1:62606 - "GET /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:14,535 - api_logger - INFO - rid=/api/stocks/FRO/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=119.09ms
INFO:     127.0.0.1:62605 - "GET /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=GLD 200 in 39ms (compile: 3ms, render: 35ms)
INFO:     127.0.0.1:62616 - "OPTIONS /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62618 - "OPTIONS /api/analysis/GLD HTTP/1.1" 200 OK
INFO:     127.0.0.1:62619 - "OPTIONS /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62620 - "OPTIONS /api/portfolio/GLD/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:17,620 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:17,620 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:17,620 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,620 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,620 INFO sqlalchemy.engine.Engine [cached since 9546s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,620 - sqlalchemy.engine.Engine - INFO - [cached since 9546s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:17,621 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:17,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:17,621 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,621 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,621 INFO sqlalchemy.engine.Engine [cached since 9546s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,621 - sqlalchemy.engine.Engine - INFO - [cached since 9546s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,621 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,621 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,621 INFO sqlalchemy.engine.Engine [cached since 9416s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GLD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:17,621 - sqlalchemy.engine.Engine - INFO - [cached since 9416s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GLD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:17,622 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,622 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,622 INFO sqlalchemy.engine.Engine [cached since 9416s ago] ('GLD', 20, 0)
2026-02-09 20:23:17,622 - sqlalchemy.engine.Engine - INFO - [cached since 9416s ago] ('GLD', 20, 0)
2026-02-09 20:23:17,623 - api_logger - INFO - rid=/api/analysis/GLD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.43ms
INFO:     127.0.0.1:62618 - "GET /api/analysis/GLD HTTP/1.1" 200 OK
2026-02-09 20:23:17,623 - api_logger - INFO - rid=/api/portfolio/GLD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.68ms
INFO:     127.0.0.1:62620 - "GET /api/portfolio/GLD/news HTTP/1.1" 200 OK
2026-02-09 20:23:17,623 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:17,623 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:17,623 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:17,623 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:17,658 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:17,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:17,659 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,659 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,659 INFO sqlalchemy.engine.Engine [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,659 - sqlalchemy.engine.Engine - INFO - [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:17,660 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:17,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:17,661 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,661 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,661 INFO sqlalchemy.engine.Engine [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,661 - sqlalchemy.engine.Engine - INFO - [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,661 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,661 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,661 INFO sqlalchemy.engine.Engine [cached since 9416s ago] ('FRO', 20, 0)
2026-02-09 20:23:17,661 - sqlalchemy.engine.Engine - INFO - [cached since 9416s ago] ('FRO', 20, 0)
2026-02-09 20:23:17,662 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,662 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,662 INFO sqlalchemy.engine.Engine [cached since 9416s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:17,662 - sqlalchemy.engine.Engine - INFO - [cached since 9416s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'FRO', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:17,663 - api_logger - INFO - rid=/api/analysis/FRO method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.77ms
INFO:     127.0.0.1:62618 - "GET /api/analysis/FRO HTTP/1.1" 200 OK
2026-02-09 20:23:17,664 - api_logger - INFO - rid=/api/portfolio/FRO/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.05ms
INFO:     127.0.0.1:62619 - "GET /api/portfolio/FRO/news HTTP/1.1" 200 OK
2026-02-09 20:23:17,665 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:17,665 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:17,665 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:17,665 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:17,737 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:17,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:17,737 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,737 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,737 INFO sqlalchemy.engine.Engine [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,737 - sqlalchemy.engine.Engine - INFO - [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:17,737 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:17,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:17,737 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,737 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:17,737 INFO sqlalchemy.engine.Engine [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,737 - sqlalchemy.engine.Engine - INFO - [cached since 9547s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:17,738 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,738 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,739 INFO sqlalchemy.engine.Engine [cached since 9416s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GLD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:17,739 - sqlalchemy.engine.Engine - INFO - [cached since 9416s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GLD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:17,740 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,740 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:17,740 INFO sqlalchemy.engine.Engine [cached since 9416s ago] ('GLD', 20, 0)
2026-02-09 20:23:17,740 - sqlalchemy.engine.Engine - INFO - [cached since 9416s ago] ('GLD', 20, 0)
2026-02-09 20:23:17,741 - api_logger - INFO - rid=/api/analysis/GLD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.96ms
INFO:     127.0.0.1:62619 - "GET /api/analysis/GLD HTTP/1.1" 200 OK
2026-02-09 20:23:17,743 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:17,743 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:17,744 - api_logger - INFO - rid=/api/portfolio/GLD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.69ms
INFO:     127.0.0.1:62618 - "GET /api/portfolio/GLD/news HTTP/1.1" 200 OK
2026-02-09 20:23:17,744 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:17,744 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:17,773 - api_logger - INFO - rid=/api/stocks/FRO/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=116.25ms
INFO:     127.0.0.1:62620 - "GET /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:17,806 - api_logger - INFO - rid=/api/stocks/GLD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=190.99ms
INFO:     127.0.0.1:62616 - "GET /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:17,881 - api_logger - INFO - rid=/api/stocks/FRO/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=107.51ms
INFO:     127.0.0.1:62618 - "GET /api/stocks/FRO/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:18,015 - api_logger - INFO - rid=/api/stocks/GLD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=208.49ms
INFO:     127.0.0.1:62620 - "GET /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:18,137 - api_logger - INFO - rid=/api/stocks/GLD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=120.70ms
INFO:     127.0.0.1:62618 - "GET /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:18,526 - api_logger - INFO - rid=/api/stocks/GLD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=386.99ms
INFO:     127.0.0.1:62620 - "GET /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=GOOGL 200 in 19ms (compile: 3ms, render: 15ms)
INFO:     127.0.0.1:62624 - "OPTIONS /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62625 - "OPTIONS /api/analysis/GOOGL HTTP/1.1" 200 OK
INFO:     127.0.0.1:62627 - "OPTIONS /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62628 - "OPTIONS /api/portfolio/GOOGL/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:20,362 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:20,362 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:20,363 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,363 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,363 INFO sqlalchemy.engine.Engine [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,363 - sqlalchemy.engine.Engine - INFO - [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:20,364 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:20,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:20,365 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,365 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,365 INFO sqlalchemy.engine.Engine [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,365 - sqlalchemy.engine.Engine - INFO - [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,367 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,367 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,367 INFO sqlalchemy.engine.Engine [cached since 9419s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GOOGL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:20,367 - sqlalchemy.engine.Engine - INFO - [cached since 9419s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GOOGL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:20,367 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,367 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,367 INFO sqlalchemy.engine.Engine [cached since 9419s ago] ('GOOGL', 20, 0)
2026-02-09 20:23:20,367 - sqlalchemy.engine.Engine - INFO - [cached since 9419s ago] ('GOOGL', 20, 0)
2026-02-09 20:23:20,369 - api_logger - INFO - rid=/api/analysis/GOOGL method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.35ms
INFO:     127.0.0.1:62628 - "GET /api/analysis/GOOGL HTTP/1.1" 200 OK
2026-02-09 20:23:20,370 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:20,370 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:20,371 - api_logger - INFO - rid=/api/portfolio/GOOGL/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.08ms
INFO:     127.0.0.1:62627 - "GET /api/portfolio/GOOGL/news HTTP/1.1" 200 OK
2026-02-09 20:23:20,371 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:20,371 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:20,401 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:20,401 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:20,402 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,402 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,402 INFO sqlalchemy.engine.Engine [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,402 - sqlalchemy.engine.Engine - INFO - [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:20,403 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:20,403 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:20,403 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,403 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,404 INFO sqlalchemy.engine.Engine [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,404 - sqlalchemy.engine.Engine - INFO - [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,405 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,405 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,405 INFO sqlalchemy.engine.Engine [cached since 9419s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GLD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:20,405 - sqlalchemy.engine.Engine - INFO - [cached since 9419s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GLD', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:20,405 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,405 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,405 INFO sqlalchemy.engine.Engine [cached since 9419s ago] ('GLD', 20, 0)
2026-02-09 20:23:20,405 - sqlalchemy.engine.Engine - INFO - [cached since 9419s ago] ('GLD', 20, 0)
2026-02-09 20:23:20,406 - api_logger - INFO - rid=/api/analysis/GLD method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.04ms
INFO:     127.0.0.1:62628 - "GET /api/analysis/GLD HTTP/1.1" 200 OK
2026-02-09 20:23:20,406 - api_logger - INFO - rid=/api/portfolio/GLD/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.55ms
INFO:     127.0.0.1:62624 - "GET /api/portfolio/GLD/news HTTP/1.1" 200 OK
2026-02-09 20:23:20,407 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:20,407 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:20,407 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:20,407 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:20,480 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:20,480 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:20,480 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,480 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,481 INFO sqlalchemy.engine.Engine [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,481 - sqlalchemy.engine.Engine - INFO - [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:20,481 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:20,481 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:20,481 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,481 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:20,482 INFO sqlalchemy.engine.Engine [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,482 - sqlalchemy.engine.Engine - INFO - [cached since 9549s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:20,484 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,484 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,485 INFO sqlalchemy.engine.Engine [cached since 9419s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GOOGL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:20,485 - sqlalchemy.engine.Engine - INFO - [cached since 9419s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GOOGL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:20,486 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,486 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:20,486 INFO sqlalchemy.engine.Engine [cached since 9419s ago] ('GOOGL', 20, 0)
2026-02-09 20:23:20,486 - sqlalchemy.engine.Engine - INFO - [cached since 9419s ago] ('GOOGL', 20, 0)
2026-02-09 20:23:20,488 - api_logger - INFO - rid=/api/analysis/GOOGL method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.52ms
INFO:     127.0.0.1:62624 - "GET /api/analysis/GOOGL HTTP/1.1" 200 OK
2026-02-09 20:23:20,489 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:20,489 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:20,489 - api_logger - INFO - rid=/api/portfolio/GOOGL/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.74ms
INFO:     127.0.0.1:62628 - "GET /api/portfolio/GOOGL/news HTTP/1.1" 200 OK
2026-02-09 20:23:20,490 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:20,490 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:20,512 - api_logger - INFO - rid=/api/stocks/GLD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=113.49ms
INFO:     127.0.0.1:62627 - "GET /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:20,623 - api_logger - INFO - rid=/api/stocks/GOOGL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=265.12ms
INFO:     127.0.0.1:62625 - "GET /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:20,710 - api_logger - INFO - rid=/api/stocks/GLD/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=197.72ms
INFO:     127.0.0.1:62628 - "GET /api/stocks/GLD/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:20,829 - api_logger - INFO - rid=/api/stocks/GOOGL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=205.58ms
INFO:     127.0.0.1:62627 - "GET /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:20,962 - api_logger - INFO - rid=/api/stocks/GOOGL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=130.93ms
INFO:     127.0.0.1:62628 - "GET /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:21,176 - api_logger - INFO - rid=/api/stocks/GOOGL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=212.94ms
INFO:     127.0.0.1:62627 - "GET /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=META 200 in 17ms (compile: 4ms, render: 13ms)
INFO:     127.0.0.1:62630 - "OPTIONS /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62631 - "OPTIONS /api/analysis/META HTTP/1.1" 200 OK
INFO:     127.0.0.1:62633 - "OPTIONS /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62634 - "OPTIONS /api/portfolio/META/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:25,150 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:25,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:25,150 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,150 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,151 INFO sqlalchemy.engine.Engine [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,151 - sqlalchemy.engine.Engine - INFO - [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:25,152 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:25,152 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:25,152 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,152 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,152 INFO sqlalchemy.engine.Engine [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,152 - sqlalchemy.engine.Engine - INFO - [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,154 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,154 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,154 INFO sqlalchemy.engine.Engine [cached since 9424s ago] ('META', 20, 0)
2026-02-09 20:23:25,154 - sqlalchemy.engine.Engine - INFO - [cached since 9424s ago] ('META', 20, 0)
2026-02-09 20:23:25,154 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,154 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,154 INFO sqlalchemy.engine.Engine [cached since 9424s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'META', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:25,154 - sqlalchemy.engine.Engine - INFO - [cached since 9424s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'META', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:25,155 - api_logger - INFO - rid=/api/portfolio/META/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.34ms
INFO:     127.0.0.1:62633 - "GET /api/portfolio/META/news HTTP/1.1" 200 OK
2026-02-09 20:23:25,156 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:25,156 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:25,156 - api_logger - INFO - rid=/api/analysis/META method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.41ms
INFO:     127.0.0.1:62634 - "GET /api/analysis/META HTTP/1.1" 200 OK
2026-02-09 20:23:25,156 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:25,156 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:25,185 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:25,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:25,186 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,186 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,186 INFO sqlalchemy.engine.Engine [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,186 - sqlalchemy.engine.Engine - INFO - [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:25,187 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:25,187 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:25,188 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,188 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,188 INFO sqlalchemy.engine.Engine [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,188 - sqlalchemy.engine.Engine - INFO - [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,189 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,189 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,189 INFO sqlalchemy.engine.Engine [cached since 9424s ago] ('GOOGL', 20, 0)
2026-02-09 20:23:25,189 - sqlalchemy.engine.Engine - INFO - [cached since 9424s ago] ('GOOGL', 20, 0)
2026-02-09 20:23:25,189 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,189 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,189 INFO sqlalchemy.engine.Engine [cached since 9424s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GOOGL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:25,189 - sqlalchemy.engine.Engine - INFO - [cached since 9424s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'GOOGL', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:25,190 - api_logger - INFO - rid=/api/portfolio/GOOGL/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.78ms
INFO:     127.0.0.1:62630 - "GET /api/portfolio/GOOGL/news HTTP/1.1" 200 OK
2026-02-09 20:23:25,190 - api_logger - INFO - rid=/api/analysis/GOOGL method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.24ms
INFO:     127.0.0.1:62633 - "GET /api/analysis/GOOGL HTTP/1.1" 200 OK
2026-02-09 20:23:25,191 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:25,191 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:25,191 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:25,191 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:25,262 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:25,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:25,263 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,263 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,263 INFO sqlalchemy.engine.Engine [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,263 - sqlalchemy.engine.Engine - INFO - [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:25,265 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:25,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:25,266 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,266 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:25,266 INFO sqlalchemy.engine.Engine [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,266 - sqlalchemy.engine.Engine - INFO - [cached since 9554s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:25,268 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,268 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,268 INFO sqlalchemy.engine.Engine [cached since 9424s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'META', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:25,268 - sqlalchemy.engine.Engine - INFO - [cached since 9424s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'META', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:25,269 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,269 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:25,269 INFO sqlalchemy.engine.Engine [cached since 9424s ago] ('META', 20, 0)
2026-02-09 20:23:25,269 - sqlalchemy.engine.Engine - INFO - [cached since 9424s ago] ('META', 20, 0)
2026-02-09 20:23:25,270 - api_logger - INFO - rid=/api/analysis/META method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.91ms
INFO:     127.0.0.1:62633 - "GET /api/analysis/META HTTP/1.1" 200 OK
2026-02-09 20:23:25,272 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:25,272 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:25,272 - api_logger - INFO - rid=/api/portfolio/META/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.35ms
INFO:     127.0.0.1:62630 - "GET /api/portfolio/META/news HTTP/1.1" 200 OK
2026-02-09 20:23:25,273 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:25,273 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:25,344 - api_logger - INFO - rid=/api/stocks/GOOGL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=160.36ms
INFO:     127.0.0.1:62634 - "GET /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:25,356 - api_logger - INFO - rid=/api/stocks/META/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=209.48ms
INFO:     127.0.0.1:62631 - "GET /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:25,473 - api_logger - INFO - rid=/api/stocks/GOOGL/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=123.36ms
INFO:     127.0.0.1:62630 - "GET /api/stocks/GOOGL/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:25,746 - api_logger - INFO - rid=/api/stocks/META/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=389.07ms
INFO:     127.0.0.1:62634 - "GET /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:25,870 - api_logger - INFO - rid=/api/stocks/META/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=122.50ms
INFO:     127.0.0.1:62630 - "GET /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:26,077 - api_logger - INFO - rid=/api/stocks/META/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=205.25ms
INFO:     127.0.0.1:62634 - "GET /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
 GET /?ticker=NDX 200 in 22ms (compile: 4ms, render: 18ms)
INFO:     127.0.0.1:62659 - "OPTIONS /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62660 - "OPTIONS /api/analysis/NDX HTTP/1.1" 200 OK
INFO:     127.0.0.1:62661 - "OPTIONS /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:62662 - "OPTIONS /api/portfolio/NDX/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:30,275 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:30,275 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:30,276 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,276 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,276 INFO sqlalchemy.engine.Engine [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,276 - sqlalchemy.engine.Engine - INFO - [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:30,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:30,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:30,277 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,277 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,277 INFO sqlalchemy.engine.Engine [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,277 - sqlalchemy.engine.Engine - INFO - [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,278 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,278 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,278 INFO sqlalchemy.engine.Engine [cached since 9429s ago] ('NDX', 20, 0)
2026-02-09 20:23:30,278 - sqlalchemy.engine.Engine - INFO - [cached since 9429s ago] ('NDX', 20, 0)
2026-02-09 20:23:30,278 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,278 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,278 INFO sqlalchemy.engine.Engine [cached since 9429s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'NDX', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:30,278 - sqlalchemy.engine.Engine - INFO - [cached since 9429s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'NDX', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:30,279 - api_logger - INFO - rid=/api/portfolio/NDX/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.37ms
INFO:     127.0.0.1:62660 - "GET /api/portfolio/NDX/news HTTP/1.1" 200 OK
2026-02-09 20:23:30,279 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:30,279 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:30,279 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:30,279 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:30,280 - api_logger - INFO - rid=/api/analysis/NDX method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.86ms
INFO:     127.0.0.1:62662 - "GET /api/analysis/NDX HTTP/1.1" 404 Not Found
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:30,312 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:30,312 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:30,313 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,313 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,313 INFO sqlalchemy.engine.Engine [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,313 - sqlalchemy.engine.Engine - INFO - [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:30,314 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:30,314 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:30,314 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,314 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,314 INFO sqlalchemy.engine.Engine [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,314 - sqlalchemy.engine.Engine - INFO - [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,315 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,315 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,315 INFO sqlalchemy.engine.Engine [cached since 9429s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'META', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:30,315 - sqlalchemy.engine.Engine - INFO - [cached since 9429s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'META', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:30,315 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,315 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,315 INFO sqlalchemy.engine.Engine [cached since 9429s ago] ('META', 20, 0)
2026-02-09 20:23:30,315 - sqlalchemy.engine.Engine - INFO - [cached since 9429s ago] ('META', 20, 0)
2026-02-09 20:23:30,316 - api_logger - INFO - rid=/api/analysis/META method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.37ms
INFO:     127.0.0.1:62660 - "GET /api/analysis/META HTTP/1.1" 200 OK
2026-02-09 20:23:30,316 - api_logger - INFO - rid=/api/portfolio/META/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.26ms
INFO:     127.0.0.1:62659 - "GET /api/portfolio/META/news HTTP/1.1" 200 OK
2026-02-09 20:23:30,317 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:30,317 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:30,317 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:30,317 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:30,385 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:30,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:30,385 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,385 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,385 INFO sqlalchemy.engine.Engine [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,385 - sqlalchemy.engine.Engine - INFO - [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:23:30,389 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:23:30,389 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:23:30,390 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,390 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:23:30,390 INFO sqlalchemy.engine.Engine [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,390 - sqlalchemy.engine.Engine - INFO - [cached since 9559s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:23:30,391 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,391 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,391 INFO sqlalchemy.engine.Engine [cached since 9429s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'NDX', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:30,391 - sqlalchemy.engine.Engine - INFO - [cached since 9429s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'NDX', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:23:30,392 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,392 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:23:30,392 INFO sqlalchemy.engine.Engine [cached since 9429s ago] ('NDX', 20, 0)
2026-02-09 20:23:30,392 - sqlalchemy.engine.Engine - INFO - [cached since 9429s ago] ('NDX', 20, 0)
2026-02-09 20:23:30,393 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:30,393 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:30,395 - api_logger - INFO - rid=/api/portfolio/NDX/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.53ms
INFO:     127.0.0.1:62660 - "GET /api/portfolio/NDX/news HTTP/1.1" 200 OK
2026-02-09 20:23:30,395 - api_logger - INFO - rid=/api/analysis/NDX method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.44ms
INFO:     127.0.0.1:62659 - "GET /api/analysis/NDX HTTP/1.1" 404 Not Found
2026-02-09 20:23:30,395 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:23:30,395 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:23:30,427 - api_logger - INFO - rid=/api/stocks/META/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=118.34ms
INFO:     127.0.0.1:62662 - "GET /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:30,459 - api_logger - INFO - rid=/api/stocks/NDX/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=186.55ms
INFO:     127.0.0.1:62661 - "GET /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:30,586 - api_logger - INFO - rid=/api/stocks/META/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=157.97ms
INFO:     127.0.0.1:62659 - "GET /api/stocks/META/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:30,647 - api_logger - INFO - rid=/api/stocks/NDX/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=187.45ms
INFO:     127.0.0.1:62662 - "GET /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:30,766 - api_logger - INFO - rid=/api/stocks/NDX/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=117.79ms
INFO:     127.0.0.1:62659 - "GET /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:23:30,963 - api_logger - INFO - rid=/api/stocks/NDX/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=194.61ms
INFO:     127.0.0.1:62662 - "GET /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49805 - "OPTIONS /api/portfolio/AMZN/refresh HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:34,190 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:34,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:34,191 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:34,191 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:34,192 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:34,192 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:34,194 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:34,194 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:34,194 INFO sqlalchemy.engine.Engine [cached since 1.079e+04s ago] ('AMZN',)
2026-02-09 20:55:34,194 - sqlalchemy.engine.Engine - INFO - [cached since 1.079e+04s ago] ('AMZN',)
INFO:     127.0.0.1:49815 - "OPTIONS /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49816 - "OPTIONS /api/analysis/AMZN HTTP/1.1" 200 OK
INFO:     127.0.0.1:49817 - "OPTIONS /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49818 - "OPTIONS /api/portfolio/AMZN/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:34,988 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:34,988 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:34,988 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:34,988 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:34,989 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:34,989 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:34,989 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:34,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:34,989 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:34,989 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:34,989 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:34,989 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:34,991 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:34,991 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:34,991 INFO sqlalchemy.engine.Engine [cached since 1.135e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:55:34,991 - sqlalchemy.engine.Engine - INFO - [cached since 1.135e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:55:34,992 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:34,992 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:34,992 INFO sqlalchemy.engine.Engine [cached since 1.135e+04s ago] ('AMZN', 20, 0)
2026-02-09 20:55:34,992 - sqlalchemy.engine.Engine - INFO - [cached since 1.135e+04s ago] ('AMZN', 20, 0)
 GET /?ticker=AMZN 200 in 77ms (compile: 26ms, render: 51ms)
2026-02-09 20:55:35,001 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:55:35,001 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:55:35,001 INFO sqlalchemy.engine.Engine [cached since 2230s ago] ('AMZN',)
2026-02-09 20:55:35,001 - sqlalchemy.engine.Engine - INFO - [cached since 2230s ago] ('AMZN',)
2026-02-09 20:55:35,002 - api_logger - INFO - rid=/api/analysis/AMZN method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=15.82ms
INFO:     127.0.0.1:49816 - "GET /api/analysis/AMZN HTTP/1.1" 200 OK
2026-02-09 20:55:35,003 - api_logger - INFO - rid=/api/portfolio/AMZN/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=14.40ms
INFO:     127.0.0.1:49818 - "GET /api/portfolio/AMZN/news HTTP/1.1" 200 OK
2026-02-09 20:55:35,004 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:55:35,004 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:55:35,006 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,006 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,006 INFO sqlalchemy.engine.Engine [no key 0.00018s] ('19cd1080-a43d-4393-8ed1-77d2b30d3322', 'AMZN', 'Earnings live: Amazon, Reddit stocks sink to cap jam-packed earnings week', 'Yahoo Finance', 'https://finance.yahoo.com/news/live/earnings-live-amazon-reddit-stocks-sink-to-cap-jam-packed-earnings-week-213155571.html', '2026-02-06 21:31:55.000000', None)
2026-02-09 20:55:35,006 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] ('19cd1080-a43d-4393-8ed1-77d2b30d3322', 'AMZN', 'Earnings live: Amazon, Reddit stocks sink to cap jam-packed earnings week', 'Yahoo Finance', 'https://finance.yahoo.com/news/live/earnings-live-amazon-reddit-stocks-sink-to-cap-jam-packed-earnings-week-213155571.html', '2026-02-06 21:31:55.000000', None)
2026-02-09 20:55:35,007 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,007 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,007 INFO sqlalchemy.engine.Engine [no key 0.00008s] ('ba089452-e595-4c50-9f70-ba64e6351540', 'AMZN', "'This probably seems overdone': Wall Street strategists weigh in on software stock sell-off", 'Yahoo Finance', 'https://finance.yahoo.com/news/this-probably-seems-overdone-wall-street-strategists-weigh-in-on-software-stock-sell-off-160003877.html', '2026-02-08 16:00:03.000000', None)
2026-02-09 20:55:35,007 - sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ('ba089452-e595-4c50-9f70-ba64e6351540', 'AMZN', "'This probably seems overdone': Wall Street strategists weigh in on software stock sell-off", 'Yahoo Finance', 'https://finance.yahoo.com/news/this-probably-seems-overdone-wall-street-strategists-weigh-in-on-software-stock-sell-off-160003877.html', '2026-02-08 16:00:03.000000', None)
2026-02-09 20:55:35,008 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,008 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,008 INFO sqlalchemy.engine.Engine [no key 0.00006s] ('6c0f2d86-d5ae-3026-9c78-a64b7332c1f5', 'AMZN', "Peter Thiel Once Said Brilliant Thinking Is 'Rare' But Even Rarer And In 'Shorter Supply' Is This Personality Trait", 'Benzinga', 'https://finance.yahoo.com/news/peter-thiel-once-said-brilliant-123105718.html', '2026-02-09 12:31:05.000000', None)
2026-02-09 20:55:35,008 - sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ('6c0f2d86-d5ae-3026-9c78-a64b7332c1f5', 'AMZN', "Peter Thiel Once Said Brilliant Thinking Is 'Rare' But Even Rarer And In 'Shorter Supply' Is This Personality Trait", 'Benzinga', 'https://finance.yahoo.com/news/peter-thiel-once-said-brilliant-123105718.html', '2026-02-09 12:31:05.000000', None)
2026-02-09 20:55:35,009 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,009 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,009 INFO sqlalchemy.engine.Engine [no key 0.00008s] ('cfa08814-d7e1-3ff7-83cf-8e6d7dfb8b1f', 'AMZN', 'Amazon Deepens Chip Ties With STMicroelectronics', 'GuruFocus.com', 'https://finance.yahoo.com/news/amazon-deepens-chip-ties-stmicroelectronics-121510379.html', '2026-02-09 12:15:10.000000', None)
2026-02-09 20:55:35,009 - sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ('cfa08814-d7e1-3ff7-83cf-8e6d7dfb8b1f', 'AMZN', 'Amazon Deepens Chip Ties With STMicroelectronics', 'GuruFocus.com', 'https://finance.yahoo.com/news/amazon-deepens-chip-ties-stmicroelectronics-121510379.html', '2026-02-09 12:15:10.000000', None)
2026-02-09 20:55:35,009 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,009 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,009 INFO sqlalchemy.engine.Engine [no key 0.00005s] ('d1a93223-47cc-398f-8b8b-2175fe2a1af1', 'AMZN', 'Stocks to Watch Monday: Novo Nordisk, Hims & Hers, Apollo', 'The Wall Street Journal', 'https://www.wsj.com/livecoverage/stock-market-today-dow-sp-500-nasdaq-02-09-2026/card/stocks-to-watch-monday-novo-nordisk-hims-hers-apollo-a0rxP5ZTMDZ6HUIzqdwu?siteid=yhoof2&yptr=yahoo', '2026-02-09 12:08:37.000000', None)
2026-02-09 20:55:35,009 - sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ('d1a93223-47cc-398f-8b8b-2175fe2a1af1', 'AMZN', 'Stocks to Watch Monday: Novo Nordisk, Hims & Hers, Apollo', 'The Wall Street Journal', 'https://www.wsj.com/livecoverage/stock-market-today-dow-sp-500-nasdaq-02-09-2026/card/stocks-to-watch-monday-novo-nordisk-hims-hers-apollo-a0rxP5ZTMDZ6HUIzqdwu?siteid=yhoof2&yptr=yahoo', '2026-02-09 12:08:37.000000', None)
2026-02-09 20:55:35,010 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,010 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,010 INFO sqlalchemy.engine.Engine [no key 0.00007s] ('021a95e2-c99b-318b-a905-15fd54f49933', 'AMZN', 'Geopolitics, Catalyst Dearth Dull European Bourses Middy', 'MT Newswires', 'https://finance.yahoo.com/news/geopolitics-catalyst-dearth-dull-european-114728767.html', '2026-02-09 11:47:28.000000', None)
2026-02-09 20:55:35,010 - sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ('021a95e2-c99b-318b-a905-15fd54f49933', 'AMZN', 'Geopolitics, Catalyst Dearth Dull European Bourses Middy', 'MT Newswires', 'https://finance.yahoo.com/news/geopolitics-catalyst-dearth-dull-european-114728767.html', '2026-02-09 11:47:28.000000', None)
2026-02-09 20:55:35,010 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,010 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,010 INFO sqlalchemy.engine.Engine [no key 0.00005s] ('372531a3-e1cc-34b8-938e-3ba781256ec6', 'AMZN', "Microsoft's Cash Flow Stands Out", 'GuruFocus.com', 'https://finance.yahoo.com/news/microsofts-cash-flow-stands-114638625.html', '2026-02-09 11:46:38.000000', None)
2026-02-09 20:55:35,010 - sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ('372531a3-e1cc-34b8-938e-3ba781256ec6', 'AMZN', "Microsoft's Cash Flow Stands Out", 'GuruFocus.com', 'https://finance.yahoo.com/news/microsofts-cash-flow-stands-114638625.html', '2026-02-09 11:46:38.000000', None)
2026-02-09 20:55:35,011 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,011 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,011 INFO sqlalchemy.engine.Engine [no key 0.00007s] ('6894b3ab-e77d-39d7-983d-9e58c9193056', 'AMZN', 'Markets Falling as Relief Rally Fades, AI Fears Return. Stock Futures Drop.', 'Barrons.com', 'https://www.barrons.com/livecoverage/stock-market-news-today-020926/card/dow-builds-on-record-high-above-50-000-as-relief-rally-gathers-pace-stock-futures-rise--oq3sldzYCa5d0gEXSebI?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:23:19.000000', None)
2026-02-09 20:55:35,011 - sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ('6894b3ab-e77d-39d7-983d-9e58c9193056', 'AMZN', 'Markets Falling as Relief Rally Fades, AI Fears Return. Stock Futures Drop.', 'Barrons.com', 'https://www.barrons.com/livecoverage/stock-market-news-today-020926/card/dow-builds-on-record-high-above-50-000-as-relief-rally-gathers-pace-stock-futures-rise--oq3sldzYCa5d0gEXSebI?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:23:19.000000', None)
2026-02-09 20:55:35,011 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,011 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,011 INFO sqlalchemy.engine.Engine [no key 0.00007s] ('bb930b74-77ef-3545-a829-a09981471b01', 'AMZN', 'These Stocks Are Todayâ€™s Movers: Hims & Hers, Novo Nordisk, Micron, Kroger, STMicroelectronics, Nvidia, and More', 'Barrons.com', 'https://www.barrons.com/articles/stock-movers-ebcb0aef?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:02:00.000000', None)
2026-02-09 20:55:35,011 - sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ('bb930b74-77ef-3545-a829-a09981471b01', 'AMZN', 'These Stocks Are Todayâ€™s Movers: Hims & Hers, Novo Nordisk, Micron, Kroger, STMicroelectronics, Nvidia, and More', 'Barrons.com', 'https://www.barrons.com/articles/stock-movers-ebcb0aef?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:02:00.000000', None)
2026-02-09 20:55:35,012 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,012 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:35,012 INFO sqlalchemy.engine.Engine [no key 0.00005s] ('665d8645-286b-39e7-b386-a0806a3c656a', 'AMZN', "Amazon CEO Andy Jassy Warns Shoppers Are 'Starting To See More Of That Impact' As Trump's 10% Tariffs Begin Hitting Prices On Amazon", 'Benzinga', 'https://finance.yahoo.com/news/amazon-ceo-andy-jassy-warns-110103194.html', '2026-02-09 11:01:03.000000', None)
2026-02-09 20:55:35,012 - sqlalchemy.engine.Engine - INFO - [no key 0.00005s] ('665d8645-286b-39e7-b386-a0806a3c656a', 'AMZN', "Amazon CEO Andy Jassy Warns Shoppers Are 'Starting To See More Of That Impact' As Trump's 10% Tariffs Begin Hitting Prices On Amazon", 'Benzinga', 'https://finance.yahoo.com/news/amazon-ceo-andy-jassy-warns-110103194.html', '2026-02-09 11:01:03.000000', None)
2026-02-09 20:55:35,016 INFO sqlalchemy.engine.Engine UPDATE stocks SET forward_pe=? WHERE stocks.ticker = ?
2026-02-09 20:55:35,016 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET forward_pe=? WHERE stocks.ticker = ?
2026-02-09 20:55:35,016 INFO sqlalchemy.engine.Engine [generated in 0.00029s] (22.630703, 'AMZN')
2026-02-09 20:55:35,016 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (22.630703, 'AMZN')
2026-02-09 20:55:35,017 INFO sqlalchemy.engine.Engine UPDATE market_data_cache SET adx_14=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:55:35,017 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET adx_14=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:55:35,018 INFO sqlalchemy.engine.Engine [cached since 2229s ago] (nan, '2026-02-09 12:55:34.195322', 'AMZN')
2026-02-09 20:55:35,018 - sqlalchemy.engine.Engine - INFO - [cached since 2229s ago] (nan, '2026-02-09 12:55:34.195322', 'AMZN')
2026-02-09 20:55:35,018 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 20:55:35,018 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 20:55:35,020 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:35,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:35,020 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:35,020 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:35,020 INFO sqlalchemy.engine.Engine [cached since 2229s ago] ('AMZN',)
2026-02-09 20:55:35,020 - sqlalchemy.engine.Engine - INFO - [cached since 2229s ago] ('AMZN',)
2026-02-09 20:55:35,022 - api_logger - INFO - rid=/api/portfolio/AMZN/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=855.23ms
INFO:     127.0.0.1:49805 - "POST /api/portfolio/AMZN/refresh HTTP/1.1" 200 OK
2026-02-09 20:55:35,022 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,022 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:49818 - "OPTIONS /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49805 - "OPTIONS /api/analysis/NDX HTTP/1.1" 200 OK
INFO:     127.0.0.1:49816 - "OPTIONS /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49815 - "OPTIONS /api/portfolio/NDX/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:35,029 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:35,029 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:35,030 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,030 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,030 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,030 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:35,031 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:35,031 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:35,031 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,031 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,031 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,031 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,032 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,032 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,032 INFO sqlalchemy.engine.Engine [cached since 1.135e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'NDX', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:55:35,032 - sqlalchemy.engine.Engine - INFO - [cached since 1.135e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'NDX', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:55:35,032 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,032 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,032 INFO sqlalchemy.engine.Engine [cached since 1.135e+04s ago] ('NDX', 20, 0)
2026-02-09 20:55:35,032 - sqlalchemy.engine.Engine - INFO - [cached since 1.135e+04s ago] ('NDX', 20, 0)
2026-02-09 20:55:35,033 - api_logger - INFO - rid=/api/portfolio/NDX/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.26ms
INFO:     127.0.0.1:49815 - "GET /api/portfolio/NDX/news HTTP/1.1" 200 OK
2026-02-09 20:55:35,033 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,033 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:55:35,034 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,034 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:55:35,034 - api_logger - INFO - rid=/api/analysis/NDX method=GET status_code=404 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.38ms
INFO:     127.0.0.1:49818 - "GET /api/analysis/NDX HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:49818 - "OPTIONS /api/portfolio/?refresh=false HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:35,052 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:35,052 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:35,052 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,052 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,052 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,052 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,053 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 20:55:35,053 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 20:55:35,053 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,053 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,054 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=2.75ms
INFO:     127.0.0.1:49818 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 20:55:35,055 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,055 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:35,117 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:35,117 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:35,118 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,118 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,118 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,118 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:35,119 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:35,119 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:35,119 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,119 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:35,119 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,119 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:35,123 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,123 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,123 INFO sqlalchemy.engine.Engine [cached since 1.135e+04s ago] ('AMZN', 20, 0)
2026-02-09 20:55:35,123 - sqlalchemy.engine.Engine - INFO - [cached since 1.135e+04s ago] ('AMZN', 20, 0)
2026-02-09 20:55:35,123 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,123 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:35,123 INFO sqlalchemy.engine.Engine [cached since 1.135e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:55:35,123 - sqlalchemy.engine.Engine - INFO - [cached since 1.135e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:55:35,125 - api_logger - INFO - rid=/api/analysis/AMZN method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=11.70ms
INFO:     127.0.0.1:49818 - "GET /api/analysis/AMZN HTTP/1.1" 200 OK
2026-02-09 20:55:35,127 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,127 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:55:35,128 - api_logger - INFO - rid=/api/portfolio/AMZN/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=9.69ms
INFO:     127.0.0.1:49815 - "GET /api/portfolio/AMZN/news HTTP/1.1" 200 OK
2026-02-09 20:55:35,129 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:55:35,129 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:55:35,186 - api_logger - INFO - rid=/api/stocks/AMZN/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=206.15ms
INFO:     127.0.0.1:49817 - "GET /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:55:35,355 - api_logger - INFO - rid=/api/stocks/NDX/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=327.66ms
INFO:     127.0.0.1:49805 - "GET /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:55:35,373 - api_logger - INFO - rid=/api/stocks/AMZN/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=185.52ms
INFO:     127.0.0.1:49815 - "GET /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:55:35,554 - api_logger - INFO - rid=/api/stocks/NDX/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=197.65ms
INFO:     127.0.0.1:49817 - "GET /api/stocks/NDX/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:55:35,569 - api_logger - INFO - rid=/api/stocks/AMZN/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=194.58ms
INFO:     127.0.0.1:49821 - "GET /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:55:35,691 - api_logger - INFO - rid=/api/stocks/AMZN/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=121.17ms
INFO:     127.0.0.1:49817 - "GET /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49817 - "OPTIONS /api/analysis/AMZN?force=true HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:55:39,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:39,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:39,168 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:39,168 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:55:39,168 INFO sqlalchemy.engine.Engine [cached since 1.149e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:39,168 - sqlalchemy.engine.Engine - INFO - [cached since 1.149e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:55:39,170 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:55:39,170 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:55:39,170 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('AMZN',)
2026-02-09 20:55:39,170 - sqlalchemy.engine.Engine - INFO - [cached since 2234s ago] ('AMZN',)
2026-02-09 20:55:39,171 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:39,171 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:39,172 INFO sqlalchemy.engine.Engine [cached since 1.079e+04s ago] ('AMZN',)
2026-02-09 20:55:39,172 - sqlalchemy.engine.Engine - INFO - [cached since 1.079e+04s ago] ('AMZN',)
2026-02-09 20:55:39,656 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:55:39,656 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:55:39,657 INFO sqlalchemy.engine.Engine [cached since 2235s ago] ('AMZN',)
2026-02-09 20:55:39,657 - sqlalchemy.engine.Engine - INFO - [cached since 2235s ago] ('AMZN',)
2026-02-09 20:55:39,659 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,659 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,659 INFO sqlalchemy.engine.Engine [no key 0.00033s] ('19cd1080-a43d-4393-8ed1-77d2b30d3322', 'AMZN', 'Earnings live: Amazon, Reddit stocks sink to cap jam-packed earnings week', 'Yahoo Finance', 'https://finance.yahoo.com/news/live/earnings-live-amazon-reddit-stocks-sink-to-cap-jam-packed-earnings-week-213155571.html', '2026-02-06 21:31:55.000000', None)
2026-02-09 20:55:39,659 - sqlalchemy.engine.Engine - INFO - [no key 0.00033s] ('19cd1080-a43d-4393-8ed1-77d2b30d3322', 'AMZN', 'Earnings live: Amazon, Reddit stocks sink to cap jam-packed earnings week', 'Yahoo Finance', 'https://finance.yahoo.com/news/live/earnings-live-amazon-reddit-stocks-sink-to-cap-jam-packed-earnings-week-213155571.html', '2026-02-06 21:31:55.000000', None)
2026-02-09 20:55:39,660 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,660 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,660 INFO sqlalchemy.engine.Engine [no key 0.00025s] ('ba089452-e595-4c50-9f70-ba64e6351540', 'AMZN', "'This probably seems overdone': Wall Street strategists weigh in on software stock sell-off", 'Yahoo Finance', 'https://finance.yahoo.com/news/this-probably-seems-overdone-wall-street-strategists-weigh-in-on-software-stock-sell-off-160003877.html', '2026-02-08 16:00:03.000000', None)
2026-02-09 20:55:39,660 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] ('ba089452-e595-4c50-9f70-ba64e6351540', 'AMZN', "'This probably seems overdone': Wall Street strategists weigh in on software stock sell-off", 'Yahoo Finance', 'https://finance.yahoo.com/news/this-probably-seems-overdone-wall-street-strategists-weigh-in-on-software-stock-sell-off-160003877.html', '2026-02-08 16:00:03.000000', None)
2026-02-09 20:55:39,662 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,662 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,662 INFO sqlalchemy.engine.Engine [no key 0.00027s] ('6c0f2d86-d5ae-3026-9c78-a64b7332c1f5', 'AMZN', "Peter Thiel Once Said Brilliant Thinking Is 'Rare' But Even Rarer And In 'Shorter Supply' Is This Personality Trait", 'Benzinga', 'https://finance.yahoo.com/news/peter-thiel-once-said-brilliant-123105718.html', '2026-02-09 12:31:05.000000', None)
2026-02-09 20:55:39,662 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ('6c0f2d86-d5ae-3026-9c78-a64b7332c1f5', 'AMZN', "Peter Thiel Once Said Brilliant Thinking Is 'Rare' But Even Rarer And In 'Shorter Supply' Is This Personality Trait", 'Benzinga', 'https://finance.yahoo.com/news/peter-thiel-once-said-brilliant-123105718.html', '2026-02-09 12:31:05.000000', None)
2026-02-09 20:55:39,664 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,664 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,664 INFO sqlalchemy.engine.Engine [no key 0.00029s] ('cfa08814-d7e1-3ff7-83cf-8e6d7dfb8b1f', 'AMZN', 'Amazon Deepens Chip Ties With STMicroelectronics', 'GuruFocus.com', 'https://finance.yahoo.com/news/amazon-deepens-chip-ties-stmicroelectronics-121510379.html', '2026-02-09 12:15:10.000000', None)
2026-02-09 20:55:39,664 - sqlalchemy.engine.Engine - INFO - [no key 0.00029s] ('cfa08814-d7e1-3ff7-83cf-8e6d7dfb8b1f', 'AMZN', 'Amazon Deepens Chip Ties With STMicroelectronics', 'GuruFocus.com', 'https://finance.yahoo.com/news/amazon-deepens-chip-ties-stmicroelectronics-121510379.html', '2026-02-09 12:15:10.000000', None)
2026-02-09 20:55:39,665 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,665 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,665 INFO sqlalchemy.engine.Engine [no key 0.00015s] ('d1a93223-47cc-398f-8b8b-2175fe2a1af1', 'AMZN', 'Stocks to Watch Monday: Novo Nordisk, Hims & Hers, Apollo', 'The Wall Street Journal', 'https://www.wsj.com/livecoverage/stock-market-today-dow-sp-500-nasdaq-02-09-2026/card/stocks-to-watch-monday-novo-nordisk-hims-hers-apollo-a0rxP5ZTMDZ6HUIzqdwu?siteid=yhoof2&yptr=yahoo', '2026-02-09 12:08:37.000000', None)
2026-02-09 20:55:39,665 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ('d1a93223-47cc-398f-8b8b-2175fe2a1af1', 'AMZN', 'Stocks to Watch Monday: Novo Nordisk, Hims & Hers, Apollo', 'The Wall Street Journal', 'https://www.wsj.com/livecoverage/stock-market-today-dow-sp-500-nasdaq-02-09-2026/card/stocks-to-watch-monday-novo-nordisk-hims-hers-apollo-a0rxP5ZTMDZ6HUIzqdwu?siteid=yhoof2&yptr=yahoo', '2026-02-09 12:08:37.000000', None)
2026-02-09 20:55:39,666 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,666 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,666 INFO sqlalchemy.engine.Engine [no key 0.00013s] ('021a95e2-c99b-318b-a905-15fd54f49933', 'AMZN', 'Geopolitics, Catalyst Dearth Dull European Bourses Middy', 'MT Newswires', 'https://finance.yahoo.com/news/geopolitics-catalyst-dearth-dull-european-114728767.html', '2026-02-09 11:47:28.000000', None)
2026-02-09 20:55:39,666 - sqlalchemy.engine.Engine - INFO - [no key 0.00013s] ('021a95e2-c99b-318b-a905-15fd54f49933', 'AMZN', 'Geopolitics, Catalyst Dearth Dull European Bourses Middy', 'MT Newswires', 'https://finance.yahoo.com/news/geopolitics-catalyst-dearth-dull-european-114728767.html', '2026-02-09 11:47:28.000000', None)
2026-02-09 20:55:39,666 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,666 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,666 INFO sqlalchemy.engine.Engine [no key 0.00014s] ('372531a3-e1cc-34b8-938e-3ba781256ec6', 'AMZN', "Microsoft's Cash Flow Stands Out", 'GuruFocus.com', 'https://finance.yahoo.com/news/microsofts-cash-flow-stands-114638625.html', '2026-02-09 11:46:38.000000', None)
2026-02-09 20:55:39,666 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ('372531a3-e1cc-34b8-938e-3ba781256ec6', 'AMZN', "Microsoft's Cash Flow Stands Out", 'GuruFocus.com', 'https://finance.yahoo.com/news/microsofts-cash-flow-stands-114638625.html', '2026-02-09 11:46:38.000000', None)
2026-02-09 20:55:39,667 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,667 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,667 INFO sqlalchemy.engine.Engine [no key 0.00010s] ('6894b3ab-e77d-39d7-983d-9e58c9193056', 'AMZN', 'Markets Falling as Relief Rally Fades, AI Fears Return. Stock Futures Drop.', 'Barrons.com', 'https://www.barrons.com/livecoverage/stock-market-news-today-020926/card/dow-builds-on-record-high-above-50-000-as-relief-rally-gathers-pace-stock-futures-rise--oq3sldzYCa5d0gEXSebI?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:23:19.000000', None)
2026-02-09 20:55:39,667 - sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ('6894b3ab-e77d-39d7-983d-9e58c9193056', 'AMZN', 'Markets Falling as Relief Rally Fades, AI Fears Return. Stock Futures Drop.', 'Barrons.com', 'https://www.barrons.com/livecoverage/stock-market-news-today-020926/card/dow-builds-on-record-high-above-50-000-as-relief-rally-gathers-pace-stock-futures-rise--oq3sldzYCa5d0gEXSebI?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:23:19.000000', None)
2026-02-09 20:55:39,668 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,668 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,668 INFO sqlalchemy.engine.Engine [no key 0.00016s] ('bb930b74-77ef-3545-a829-a09981471b01', 'AMZN', 'These Stocks Are Todayâ€™s Movers: Hims & Hers, Novo Nordisk, Micron, Kroger, STMicroelectronics, Nvidia, and More', 'Barrons.com', 'https://www.barrons.com/articles/stock-movers-ebcb0aef?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:02:00.000000', None)
2026-02-09 20:55:39,668 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ('bb930b74-77ef-3545-a829-a09981471b01', 'AMZN', 'These Stocks Are Todayâ€™s Movers: Hims & Hers, Novo Nordisk, Micron, Kroger, STMicroelectronics, Nvidia, and More', 'Barrons.com', 'https://www.barrons.com/articles/stock-movers-ebcb0aef?siteid=yhoof2&yptr=yahoo', '2026-02-09 11:02:00.000000', None)
2026-02-09 20:55:39,669 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,669 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:55:39,669 INFO sqlalchemy.engine.Engine [no key 0.00009s] ('665d8645-286b-39e7-b386-a0806a3c656a', 'AMZN', "Amazon CEO Andy Jassy Warns Shoppers Are 'Starting To See More Of That Impact' As Trump's 10% Tariffs Begin Hitting Prices On Amazon", 'Benzinga', 'https://finance.yahoo.com/news/amazon-ceo-andy-jassy-warns-110103194.html', '2026-02-09 11:01:03.000000', None)
2026-02-09 20:55:39,669 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ('665d8645-286b-39e7-b386-a0806a3c656a', 'AMZN', "Amazon CEO Andy Jassy Warns Shoppers Are 'Starting To See More Of That Impact' As Trump's 10% Tariffs Begin Hitting Prices On Amazon", 'Benzinga', 'https://finance.yahoo.com/news/amazon-ceo-andy-jassy-warns-110103194.html', '2026-02-09 11:01:03.000000', None)
2026-02-09 20:55:39,669 INFO sqlalchemy.engine.Engine UPDATE market_data_cache SET adx_14=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:55:39,669 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET adx_14=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:55:39,669 INFO sqlalchemy.engine.Engine [cached since 2234s ago] (nan, '2026-02-09 12:55:39.172750', 'AMZN')
2026-02-09 20:55:39,669 - sqlalchemy.engine.Engine - INFO - [cached since 2234s ago] (nan, '2026-02-09 12:55:39.172750', 'AMZN')
2026-02-09 20:55:39,670 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 20:55:39,670 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 20:55:39,672 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:55:39,672 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:55:39,672 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:39,672 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:55:39,672 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('AMZN',)
2026-02-09 20:55:39,672 - sqlalchemy.engine.Engine - INFO - [cached since 2234s ago] ('AMZN',)
2026-02-09 20:55:39,673 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:39,673 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:55:39,673 INFO sqlalchemy.engine.Engine [cached since 1.136e+04s ago] ('AMZN', 5, 0)
2026-02-09 20:55:39,673 - sqlalchemy.engine.Engine - INFO - [cached since 1.136e+04s ago] ('AMZN', 5, 0)
2026-02-09 20:55:39,674 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 20:55:39,674 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at 
FROM portfolios 
WHERE portfolios.user_id = ? AND portfolios.ticker = ?
2026-02-09 20:55:39,674 INFO sqlalchemy.engine.Engine [cached since 1.08e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN')
2026-02-09 20:55:39,674 - sqlalchemy.engine.Engine - INFO - [cached since 1.08e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN')
2026-02-09 20:55:39,674 - app.api.v1.endpoints.analysis - INFO - Preparing AI analysis for AMZN. Market Data keys present: ['current_price', 'change_percent', 'rsi_14', 'ma_20', 'ma_50', 'ma_200', 'macd_val', 'macd_hist', 'bb_upper', 'bb_lower', 'kdj_k', 'atr_14', 'market_status']
2026-02-09 20:55:39,675 - app.services.ai_service - INFO - --- AI ANALYSIS PROMPT FOR AMZN ---

        ä½ æ˜¯ä¸€ä½èµ„æ·±ç¾Žè‚¡æŠ•èµ„é¡¾é—®å’Œé‡åŒ–ç­–ç•¥ä¸“å®¶ã€‚è¯·åŸºäºŽä»¥ä¸‹å¤šç»´æ•°æ®ä¸ºä»£ç  [AMZN] æä¾›ä¸¥è°¨çš„è¯Šæ–­ã€‚
        
        **1. åŸºç¡€é¢æ¦‚è§ˆ (Fundamental Context)**:
        - è¡Œä¸š/æ¿å—: Consumer Cyclical / Internet Retail
        - å¸‚å€¼: 2257768677376.0
        - PE (TTM): 29.33 | Forward PE: 22.63
        - 52å‘¨æ³¢åŠ¨èŒƒå›´: [161.38, 258.6]
        - Beta: 1.39
        
        **2. ç”¨æˆ·æŒä»“èƒŒæ™¯ (Portfolio Context)**:
        - å½“å‰æˆæœ¬ä»·: $0.0
        - æŒä»“æ•°é‡: 0.0
        - æœªå®žçŽ°ç›ˆäº: $0.0 (0%)
        
        **3. å®žæ—¶æŠ€æœ¯é¢æ•°æ® (Technical Data)**:
        - å½“å‰ä»·æ ¼: $210.32
        - ä»Šæ—¥æ¶¨è·Œ: -5.55%
        - RSI (14): 27.83 | KDJ (K): None / (D): None / (J): None
        - MACD: -2.17 (æŸ±çŠ¶å›¾: -2.92, æ–œçŽ‡: None)
        - å¸ƒæž—å¸¦ (BB): ä¸Šè½¨: 254.28 | å‡çº¿: None | ä¸‹è½¨: 219.81
        - MA å‡çº¿: [20: 237.05, 50: 233.3, 200: 223.19]
        - è¶‹åŠ¿å¼ºåº¦ (ADX): None | ATR: 8.21
        - æž¢è½´å‚è€ƒ (Pivots): é˜»åŠ›ä½ R1: None / R2: None | æ”¯æ’‘ä½ S1: None / S2: None
        
        **4. æœ€æ–°æ¶ˆæ¯é¢ (Recent News)**:
        [{'title': "Peter Thiel Once Said Brilliant Thinking Is 'Rare' But Even Rarer And In 'Shorter Supply' Is This Personality Trait", 'publisher': 'Benzinga', 'time': '2026-02-09T12:31:05'}, {'title': 'Amazon Deepens Chip Ties With STMicroelectronics', 'publisher': 'GuruFocus.com', 'time': '2026-02-09T12:15:10'}, {'title': 'Stocks to Watch Monday: Novo Nordisk, Hims & Hers, Apollo', 'publisher': 'The Wall Street Journal', 'time': '2026-02-09T12:08:37'}, {'title': 'Geopolitics, Catalyst Dearth Dull European Bourses Middy', 'publisher': 'MT Newswires', 'time': '2026-02-09T11:47:28'}, {'title': "Microsoft's Cash Flow Stands Out", 'publisher': 'GuruFocus.com', 'time': '2026-02-09T11:46:38'}]
        
        **ä»»åŠ¡ (Core Task)**:
        è¯·æ‰§è¡Œâ€œé€»è¾‘ä¸¥å¯†â€çš„æŠ•èµ„è¯Šæ–­ã€‚
        
        **é‡è¦å‡†åˆ™ (Strict Rules)**:
        - **æ•°æ®é©±åŠ¨**: æ‰€æœ‰çš„æ­¢æŸä½ã€åŠ ä»“ä½å’Œç›®æ ‡ä»·**å¿…é¡»åŸºäºŽä¸Šè¿°æä¾›çš„æŠ€æœ¯æŒ‡æ ‡æˆ–åŸºç¡€é¢æ•°å€¼**ã€‚ä¾‹å¦‚ï¼Œâ€œæ­¢æŸè®¾åœ¨ MA50 (233.3) é™„è¿‘â€æˆ–â€œå‚è€ƒå¸ƒæž—çº¿ä¸‹è½¨ (219.81)â€ã€‚
        - **ä¸¥ç¦ä¹±é€ **: ä¸è¦å‡­ç©ºç¼–é€  99.42 ä¹‹ç±»æ²¡æœ‰ä»»ä½•å‚è€ƒæ„ä¹‰çš„æ•°å­—ã€‚æ‰€æœ‰çš„ä»·æ ¼é”šç‚¹å¿…é¡»åœ¨æ•°æ®ä¸­æœ‰è¿¹å¯å¾ªã€‚
        - **æŒä»“é€»è¾‘**: å¦‚æžœç”¨æˆ·å½“å‰æŒä»“ä¸º 0ï¼Œå»ºè®®åº”ä¾§é‡äºŽå»ºä»“ç‚¹ä½ï¼›å¦‚æžœå·²æœ‰æŒä»“ä¸”æµ®ç›ˆ/æµ®äºè¾ƒå¤§ï¼Œåº”ç»™å‡ºæ­¢ç›ˆ/åŠ ç æˆ–å‡ä»“ç­–ç•¥ã€‚
        
        **è¿”å›žæ ¼å¼è¦æ±‚**:
        - ä½¿ç”¨ç®€æ´ã€ä¸“ä¸šçš„ä¸­æ–‡ã€‚
        - **å¿…é¡»åœ¨ `technical_analysis` ä¸­æ˜Žç¡®å¼•ç”¨ä»¥ä¸‹æ•°å€¼**: å½“å‰ä»·æ ¼ã€RSIã€MACDã€MA50/200 æˆ–å¸ƒæž—å¸¦ä½ç‚¹ã€‚
        - **ä¸¥è°¨ç²¾åº¦**: AI å»ºè®®ä¸­çš„æ‰€æœ‰ä»·æ ¼æ•°å€¼ã€æŒ‡æ ‡æ•°å€¼å¿…é¡»**å››èˆäº”å…¥ä¿ç•™ 2 ä½å°æ•°ç‚¹**ï¼ˆä¾‹å¦‚ï¼š88.54 è€Œä¸æ˜¯ 88.544834ï¼‰ã€‚
        - å¿…é¡»è¿”å›žä¸¥æ ¼çš„ JSON æ ¼å¼ã€‚
        
        ç»“æžœç»“æž„:
        {
            "sentiment_score": 0-100 (é‡åŒ–è¯„åˆ†ï¼š0=æžåº¦çœ‹ç©º, 50=ä¸­æ€§, 100=æžåº¦çœ‹å¤š), 
            "summary_status": "4-6å­—å®šè°ƒ",
            "immediate_action": "é’ˆå¯¹å½“ä¸‹çš„å†³ç­–å»ºè®® (ä¾‹å¦‚ï¼šé€¢ä½Žä¹°å…¥/è¶‹åŠ¿åšå¤š/æŒä»“è§‚æœ›/åˆ†æ‰¹å‡æŒ)",
            "entry_price_low": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸‹é™ (Float, ä¾‹å¦‚ï¼š50.50)ã€‚å¿…é¡»åŸºäºŽæŠ€æœ¯ä½ï¼ˆå¦‚å¸ƒæž—ä¸‹è½¨æˆ–æ”¯æ’‘ä½ï¼‰ã€‚",
            "entry_price_high": "[CRITICAL] å»ºè®®ä¹°å…¥åŒºé—´çš„ä¸Šé™ (Float, ä¾‹å¦‚ï¼š52.00)ã€‚å¿…é¡»åŸºäºŽæŠ€æœ¯ä½ã€‚",
            "target_price": "é¢„æœŸçš„æ­¢ç›ˆä½ (Float)",
            "stop_loss_price": "[CRITICAL] é¢„æœŸçš„æ­¢æŸä½ (Float)ã€‚å¿…é¡»ä¸¥æ ¼ä½ŽäºŽ entry_price_low (é€šå¸¸å»ºè®®ä½Ž 2%-5% æˆ–è®¾åœ¨æ›´ä½Žä¸€å±‚çš„å…³é”®æ”¯æ’‘ä½)ï¼Œä¸¥ç¦ä¸Žå»ºä»“ä¸‹é™é‡å ã€‚",
            "risk_level": "é£Žé™©ç­‰çº§ï¼šä½Ž/ä¸­/é«˜",
            "investment_horizon": "å»ºè®®æŒä»“æœŸé™",
            "confidence_level": 0-100 (AI ä¿¡å¿ƒæŒ‡æ•°),
            "rr_ratio": "é¢„ä¼°ç›ˆäºæ¯”",
            "technical_analysis": "æ ¸å¿ƒæŠ€æœ¯ä½è§£è¯»ï¼ˆå¿…é¡»åˆ†æž RSI, MACD, MA50 ç­‰æ•°å€¼ï¼‰",
            "fundamental_news": "åŸºç¡€é¢/æ¶ˆæ¯é¢æ·±åº¦è§£è¯»",
            "action_advice": "è¯¦ç»†çš„æ“ä½œé€»è¾‘ä¸Žä»“ä½æŽ§åˆ¶ç­–ç•¥ã€‚å¿…é¡»ä½¿ç”¨ã€ç»“æž„åŒ–åˆ—è¡¨ã€‘æ ¼å¼ï¼Œä¸¥ç¦é•¿ç¯‡å¤§è®ºã€‚åŒ…å«ï¼šðŸ”µ é¦–æ‰¹å»ºä»“ã€ðŸ”µ æ¬¡æ‰¹åŠ ç ã€ðŸ”´ æ­¢æŸæ–¹æ¡ˆã€ðŸŸ¢ ç›®æ ‡æ­¢ç›ˆ ç­‰å…³é”®ç‚¹ã€‚"
        }
        
--------------------------------------
 GET /?ticker=002050 200 in 18ms (compile: 3ms, render: 15ms)
INFO:     127.0.0.1:49859 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49860 - "OPTIONS /api/analysis/002050 HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "OPTIONS /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49862 - "OPTIONS /api/portfolio/002050/news HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:15,259 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:15,259 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:15,260 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,260 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,261 INFO sqlalchemy.engine.Engine [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,261 - sqlalchemy.engine.Engine - INFO - [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:15,263 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:15,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:15,263 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,263 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,263 INFO sqlalchemy.engine.Engine [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,263 - sqlalchemy.engine.Engine - INFO - [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,264 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,264 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,264 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:56:15,264 - sqlalchemy.engine.Engine - INFO - [cached since 1.139e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:56:15,264 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,264 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,264 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] ('002050', 20, 0)
2026-02-09 20:56:15,264 - sqlalchemy.engine.Engine - INFO - [cached since 1.139e+04s ago] ('002050', 20, 0)
2026-02-09 20:56:15,265 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=7.62ms
INFO:     127.0.0.1:49860 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 20:56:15,266 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:15,266 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:56:15,266 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=3.81ms
INFO:     127.0.0.1:49862 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 20:56:15,266 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:15,266 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:15,296 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:15,296 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:15,297 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,297 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,297 INFO sqlalchemy.engine.Engine [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,297 - sqlalchemy.engine.Engine - INFO - [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:15,298 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:15,298 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:15,299 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,299 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,299 INFO sqlalchemy.engine.Engine [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,299 - sqlalchemy.engine.Engine - INFO - [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,299 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,299 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,299 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] ('AMZN', 20, 0)
2026-02-09 20:56:15,299 - sqlalchemy.engine.Engine - INFO - [cached since 1.139e+04s ago] ('AMZN', 20, 0)
2026-02-09 20:56:15,300 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,300 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,300 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:56:15,300 - sqlalchemy.engine.Engine - INFO - [cached since 1.139e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:56:15,302 - api_logger - INFO - rid=/api/portfolio/AMZN/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.22ms
INFO:     127.0.0.1:49859 - "GET /api/portfolio/AMZN/news HTTP/1.1" 200 OK
2026-02-09 20:56:15,302 - api_logger - INFO - rid=/api/analysis/AMZN method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=8.82ms
INFO:     127.0.0.1:49860 - "GET /api/analysis/AMZN HTTP/1.1" 200 OK
2026-02-09 20:56:15,303 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:15,303 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:56:15,303 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:15,303 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:15,381 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:15,381 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:15,381 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,381 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,382 INFO sqlalchemy.engine.Engine [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,382 - sqlalchemy.engine.Engine - INFO - [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:15,383 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:15,383 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:15,384 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,384 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:15,384 INFO sqlalchemy.engine.Engine [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,384 - sqlalchemy.engine.Engine - INFO - [cached since 1.152e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:15,385 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,385 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.user_id = ? AND analysis_reports.ticker = ? AND analysis_reports.model_used = ? ORDER BY analysis_reports.created_at DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,385 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:56:15,385 - sqlalchemy.engine.Engine - INFO - [cached since 1.139e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a', '002050', 'qwen-3-vl-thinking', 1, 0)
2026-02-09 20:56:15,385 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,385 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:56:15,385 INFO sqlalchemy.engine.Engine [cached since 1.139e+04s ago] ('002050', 20, 0)
2026-02-09 20:56:15,385 - sqlalchemy.engine.Engine - INFO - [cached since 1.139e+04s ago] ('002050', 20, 0)
2026-02-09 20:56:15,386 - api_logger - INFO - rid=/api/analysis/002050 method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=6.00ms
INFO:     127.0.0.1:49868 - "GET /api/analysis/002050 HTTP/1.1" 200 OK
2026-02-09 20:56:15,391 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:15,391 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:56:15,395 - api_logger - INFO - rid=/api/portfolio/002050/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=13.00ms
INFO:     127.0.0.1:49869 - "GET /api/portfolio/002050/news HTTP/1.1" 200 OK
2026-02-09 20:56:15,396 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:15,396 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:56:15,630 - api_logger - INFO - rid=/api/stocks/AMZN/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=337.88ms
INFO:     127.0.0.1:49862 - "GET /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:56:15,969 - api_logger - INFO - rid=/api/stocks/AMZN/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=337.56ms
INFO:     127.0.0.1:49869 - "GET /api/stocks/AMZN/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:56:16,174 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=918.09ms
INFO:     127.0.0.1:49861 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:56:16,698 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=523.37ms
INFO:     127.0.0.1:49869 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:56:17,332 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=632.82ms
INFO:     127.0.0.1:49861 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
2026-02-09 20:56:17,981 - api_logger - INFO - rid=/api/stocks/002050/history method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=647.67ms
INFO:     127.0.0.1:49869 - "GET /api/stocks/002050/history?period=1y HTTP/1.1" 200 OK
INFO:     127.0.0.1:49861 - "OPTIONS /api/portfolio/002050/refresh HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:17,984 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:17,984 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:17,985 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:17,985 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:17,985 INFO sqlalchemy.engine.Engine [cached since 1.153e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:17,985 - sqlalchemy.engine.Engine - INFO - [cached since 1.153e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:17,985 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:56:17,985 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:56:17,985 INFO sqlalchemy.engine.Engine [cached since 1.083e+04s ago] ('002050',)
2026-02-09 20:56:17,985 - sqlalchemy.engine.Engine - INFO - [cached since 1.083e+04s ago] ('002050',)
2026-02-09 20:56:17,986 - app.services.market_providers.tavily - WARNING - TAVILY_API_KEY not set. TavilyProvider will be disabled.
  0%|          | 0/58 [00:00<?, ?it/s]2026-02-09 20:56:18,176 - app.services.market_providers.akshare - WARNING - Eastmoney hist failed for 002050, falling back to Sina: HTTPSConnectionPool(host='push2his.eastmoney.com', port=443): Max retries exceeded with url: /api/qt/stock/kline/get?fields1=f1%2Cf2%2Cf3%2Cf4%2Cf5%2Cf6&fields2=f51%2Cf52%2Cf53%2Cf54%2Cf55%2Cf56%2Cf57%2Cf58%2Cf59%2Cf60%2Cf61%2Cf116&ut=7eea3edcaed734bea9cbfc24409ed989&klt=101&fqt=1&secid=0.002050&beg=19700101&end=20500101 (Caused by ProxyError('Unable to connect to proxy', RemoteDisconnected('Remote end closed connection without response')))

  0%|          | 0/58 [00:00<?, ?it/s][A  2%|â–         | 1/58 [00:00<00:56,  1.02it/s]
  2%|â–         | 1/58 [00:00<00:48,  1.18it/s][A  3%|â–Ž         | 2/58 [00:01<00:41,  1.35it/s]
  3%|â–Ž         | 2/58 [00:01<00:44,  1.27it/s][A  5%|â–Œ         | 3/58 [00:02<00:52,  1.06it/s]
  5%|â–Œ         | 3/58 [00:02<00:45,  1.20it/s][A
  7%|â–‹         | 4/58 [00:03<00:40,  1.34it/s][A  7%|â–‹         | 4/58 [00:03<00:55,  1.03s/it]
  9%|â–Š         | 5/58 [00:03<00:42,  1.24it/s][A  9%|â–Š         | 5/58 [00:05<01:04,  1.22s/it]
                                              [A                                              2026-02-09 20:56:30,123 INFO sqlalchemy.engine.Engine SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:56:30,123 - sqlalchemy.engine.Engine - INFO - SELECT stocks.ticker, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM stocks 
WHERE stocks.ticker = ?
2026-02-09 20:56:30,124 INFO sqlalchemy.engine.Engine [cached since 2285s ago] ('002050',)
2026-02-09 20:56:30,124 - sqlalchemy.engine.Engine - INFO - [cached since 2285s ago] ('002050',)
2026-02-09 20:56:30,126 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,126 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,126 INFO sqlalchemy.engine.Engine [no key 0.00024s] ('-5743520230015361794', '002050', '002050ï¼Œå¼‚åŠ¨æ‹‰å‡', 'ä¸Šæµ·è¯åˆ¸æŠ¥', 'http://finance.eastmoney.com/a/202601163621684791.html', '2026-01-16 11:13:05.000000', None)
2026-02-09 20:56:30,126 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ('-5743520230015361794', '002050', '002050ï¼Œå¼‚åŠ¨æ‹‰å‡', 'ä¸Šæµ·è¯åˆ¸æŠ¥', 'http://finance.eastmoney.com/a/202601163621684791.html', '2026-01-16 11:13:05.000000', None)
2026-02-09 20:56:30,130 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,130 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,130 INFO sqlalchemy.engine.Engine [no key 0.00042s] ('8283751005684437325', '002050', 'ä¸‰èŠ±æ™ºæŽ§æŽ§è‚¡å­å…¬å¸2.1äº¿å…ƒé¡¹ç›®çŽ¯è¯„èŽ·åŽŸåˆ™åŒæ„', 'æ¯æ—¥ç»æµŽæ–°é—»', 'http://finance.eastmoney.com/a/202602043641538358.html', '2026-02-04 18:12:22.000000', None)
2026-02-09 20:56:30,130 - sqlalchemy.engine.Engine - INFO - [no key 0.00042s] ('8283751005684437325', '002050', 'ä¸‰èŠ±æ™ºæŽ§æŽ§è‚¡å­å…¬å¸2.1äº¿å…ƒé¡¹ç›®çŽ¯è¯„èŽ·åŽŸåˆ™åŒæ„', 'æ¯æ—¥ç»æµŽæ–°é—»', 'http://finance.eastmoney.com/a/202602043641538358.html', '2026-02-04 18:12:22.000000', None)
2026-02-09 20:56:30,132 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,132 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,132 INFO sqlalchemy.engine.Engine [no key 0.00021s] ('5168074886343120004', '002050', '002050ï¼Œå‘å¸ƒå¹´åº¦ä¸šç»©é¢„å‘Šï¼3è‚¡èŽ·æœºæž„å¤§å¹…æŠ¢ç­¹', 'æ•°æ®å®', 'http://finance.eastmoney.com/a/202512223598607016.html', '2025-12-22 22:24:39.000000', None)
2026-02-09 20:56:30,132 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] ('5168074886343120004', '002050', '002050ï¼Œå‘å¸ƒå¹´åº¦ä¸šç»©é¢„å‘Šï¼3è‚¡èŽ·æœºæž„å¤§å¹…æŠ¢ç­¹', 'æ•°æ®å®', 'http://finance.eastmoney.com/a/202512223598607016.html', '2025-12-22 22:24:39.000000', None)
2026-02-09 20:56:30,133 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,133 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,133 INFO sqlalchemy.engine.Engine [no key 0.00014s] ('-6002959021476325779', '002050', '23è‚¡èŽ·èžèµ„å®¢é€†å¸‚å‡€ä¹°å…¥è¶…äº¿å…ƒ', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602033639754212.html', '2026-02-03 09:57:39.000000', None)
2026-02-09 20:56:30,133 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ('-6002959021476325779', '002050', '23è‚¡èŽ·èžèµ„å®¢é€†å¸‚å‡€ä¹°å…¥è¶…äº¿å…ƒ', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602033639754212.html', '2026-02-03 09:57:39.000000', None)
2026-02-09 20:56:30,134 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,134 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,134 INFO sqlalchemy.engine.Engine [no key 0.00016s] ('-5494814520845044984', '002050', '46è‚¡ç‰¹å¤§å•å‡€æµå…¥èµ„é‡‘è¶…2äº¿å…ƒ', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602043641856015.html', '2026-02-04 23:41:15.000000', None)
2026-02-09 20:56:30,134 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ('-5494814520845044984', '002050', '46è‚¡ç‰¹å¤§å•å‡€æµå…¥èµ„é‡‘è¶…2äº¿å…ƒ', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602043641856015.html', '2026-02-04 23:41:15.000000', None)
2026-02-09 20:56:30,135 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,135 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,135 INFO sqlalchemy.engine.Engine [no key 0.00014s] ('4139253414648980216', '002050', 'æ æ†èµ„é‡‘å¤§æ‰‹ç¬”åŠ ä»“è‚¡åå•', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602023638212355.html', '2026-02-02 09:42:06.000000', None)
2026-02-09 20:56:30,135 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ('4139253414648980216', '002050', 'æ æ†èµ„é‡‘å¤§æ‰‹ç¬”åŠ ä»“è‚¡åå•', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602023638212355.html', '2026-02-02 09:42:06.000000', None)
2026-02-09 20:56:30,135 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,135 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,136 INFO sqlalchemy.engine.Engine [no key 0.00011s] ('2095954133047301291', '002050', '61è‚¡ç‰¹å¤§å•å‡€æµå…¥èµ„é‡‘è¶…2äº¿å…ƒ', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602033640238431.html', '2026-02-03 18:06:13.000000', None)
2026-02-09 20:56:30,136 - sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ('2095954133047301291', '002050', '61è‚¡ç‰¹å¤§å•å‡€æµå…¥èµ„é‡‘è¶…2äº¿å…ƒ', 'è¯åˆ¸æ—¶æŠ¥ç½‘', 'http://finance.eastmoney.com/a/202602033640238431.html', '2026-02-03 18:06:13.000000', None)
2026-02-09 20:56:30,136 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,136 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,136 INFO sqlalchemy.engine.Engine [no key 0.00011s] ('2361058837397064953', '002050', 'åœ¨åŽå¹´å…¥1498äº¿å…ƒå´è¢«ä¼ â€œå¤§è£å‘˜â€ï¼Ÿåšä¸–ä¸­å›½CEOï¼šä¸ªåˆ«éƒ¨é—¨è°ƒæ•´ï¼Œä¸æ˜¯è£å‘˜', 'æ—¶ä»£å‘¨æŠ¥', 'http://finance.eastmoney.com/a/202602053642927122.html', '2026-02-05 19:13:33.000000', None)
2026-02-09 20:56:30,136 - sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ('2361058837397064953', '002050', 'åœ¨åŽå¹´å…¥1498äº¿å…ƒå´è¢«ä¼ â€œå¤§è£å‘˜â€ï¼Ÿåšä¸–ä¸­å›½CEOï¼šä¸ªåˆ«éƒ¨é—¨è°ƒæ•´ï¼Œä¸æ˜¯è£å‘˜', 'æ—¶ä»£å‘¨æŠ¥', 'http://finance.eastmoney.com/a/202602053642927122.html', '2026-02-05 19:13:33.000000', None)
2026-02-09 20:56:30,137 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,137 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,137 INFO sqlalchemy.engine.Engine [no key 0.00023s] ('6350284778145779494', '002050', 'ä¸‰èŠ±æ™ºæŽ§ï¼šå®žé™…æŽ§åˆ¶äººåŠè‘£äº‹é«˜ç®¡æ‹Ÿåˆè®¡å‡æŒä¸è¶…0.2425%è‚¡ä»½', 'è´¢ä¸­ç¤¾', 'http://finance.eastmoney.com/a/202601233628493496.html', '2026-01-23 09:43:54.000000', None)
2026-02-09 20:56:30,137 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] ('6350284778145779494', '002050', 'ä¸‰èŠ±æ™ºæŽ§ï¼šå®žé™…æŽ§åˆ¶äººåŠè‘£äº‹é«˜ç®¡æ‹Ÿåˆè®¡å‡æŒä¸è¶…0.2425%è‚¡ä»½', 'è´¢ä¸­ç¤¾', 'http://finance.eastmoney.com/a/202601233628493496.html', '2026-01-23 09:43:54.000000', None)
2026-02-09 20:56:30,138 INFO sqlalchemy.engine.Engine INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,138 - sqlalchemy.engine.Engine - INFO - INSERT INTO stock_news (id, ticker, title, publisher, link, publish_time, summary) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT DO NOTHING
2026-02-09 20:56:30,138 INFO sqlalchemy.engine.Engine [no key 0.00021s] ('7249346400523078781', '002050', 'ä¸‰èŠ±æ™ºæŽ§ï¼šå®žæŽ§äººç­‰æ‹Ÿåˆè®¡å‡æŒä¸è¶…0.2425%å…¬å¸è‚¡ä»½', 'äººæ°‘è´¢è®¯', 'http://finance.eastmoney.com/a/202601223627695117.html', '2026-01-22 21:49:47.000000', None)
2026-02-09 20:56:30,138 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] ('7249346400523078781', '002050', 'ä¸‰èŠ±æ™ºæŽ§ï¼šå®žæŽ§äººç­‰æ‹Ÿåˆè®¡å‡æŒä¸è¶…0.2425%å…¬å¸è‚¡ä»½', 'äººæ°‘è´¢è®¯', 'http://finance.eastmoney.com/a/202601223627695117.html', '2026-01-22 21:49:47.000000', None)
2026-02-09 20:56:30,140 INFO sqlalchemy.engine.Engine UPDATE stocks SET market_cap=? WHERE stocks.ticker = ?
2026-02-09 20:56:30,140 - sqlalchemy.engine.Engine - INFO - UPDATE stocks SET market_cap=? WHERE stocks.ticker = ?
2026-02-09 20:56:30,140 INFO sqlalchemy.engine.Engine [generated in 0.00018s] (217049358767.3, '002050')
2026-02-09 20:56:30,140 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (217049358767.3, '002050')
2026-02-09 20:56:30,141 INFO sqlalchemy.engine.Engine UPDATE market_data_cache SET current_price=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, macd_hist_slope=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, adx_14=?, pivot_point=?, resistance_1=?, resistance_2=?, support_1=?, support_2=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:56:30,141 - sqlalchemy.engine.Engine - INFO - UPDATE market_data_cache SET current_price=?, rsi_14=?, ma_20=?, ma_50=?, ma_200=?, macd_val=?, macd_signal=?, macd_hist=?, macd_hist_slope=?, bb_upper=?, bb_middle=?, bb_lower=?, atr_14=?, k_line=?, d_line=?, j_line=?, volume_ma_20=?, volume_ratio=?, adx_14=?, pivot_point=?, resistance_1=?, resistance_2=?, support_1=?, support_2=?, last_updated=? WHERE market_data_cache.ticker = ?
2026-02-09 20:56:30,141 INFO sqlalchemy.engine.Engine [generated in 0.00020s] (51.58, 29.047301798800802, 53.632999999999996, 50.050399999999996, 37.3162, -0.15020814642794988, 0.44166979726075795, -0.5918779436887078, 0.12330805249168897, 59.48858878337493, 53.632999999999996, 47.77741121662506, 2.0800000000000005, 45.24256338938236, 31.619033142089712, 72.48962388396767, 189442077.65, 0.509444576396093, nan, 50.79, 52.5, 53.88, 49.41, 47.699999999999996, '2026-02-09 12:56:17.986087', '002050')
2026-02-09 20:56:30,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (51.58, 29.047301798800802, 53.632999999999996, 50.050399999999996, 37.3162, -0.15020814642794988, 0.44166979726075795, -0.5918779436887078, 0.12330805249168897, 59.48858878337493, 53.632999999999996, 47.77741121662506, 2.0800000000000005, 45.24256338938236, 31.619033142089712, 72.48962388396767, 189442077.65, 0.509444576396093, nan, 50.79, 52.5, 53.88, 49.41, 47.699999999999996, '2026-02-09 12:56:17.986087', '002050')
2026-02-09 20:56:30,142 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 20:56:30,142 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 20:56:30,143 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:30,143 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:30,143 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:56:30,143 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 20:56:30,144 INFO sqlalchemy.engine.Engine [cached since 2284s ago] ('002050',)
2026-02-09 20:56:30,144 - sqlalchemy.engine.Engine - INFO - [cached since 2284s ago] ('002050',)
2026-02-09 20:56:30,144 - api_logger - INFO - rid=/api/portfolio/002050/refresh method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=12160.67ms
INFO:     127.0.0.1:49861 - "POST /api/portfolio/002050/refresh HTTP/1.1" 200 OK
2026-02-09 20:56:30,145 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:30,145 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:56:30,153 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:56:30,153 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:56:30,153 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:30,153 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:56:30,154 INFO sqlalchemy.engine.Engine [cached since 1.154e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:30,154 - sqlalchemy.engine.Engine - INFO - [cached since 1.154e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:30,154 INFO sqlalchemy.engine.Engine SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 20:56:30,154 - sqlalchemy.engine.Engine - INFO - SELECT portfolios.id, portfolios.user_id, portfolios.ticker, portfolios.quantity, portfolios.avg_cost, portfolios.target_price, portfolios.stop_loss_price, portfolios.created_at, portfolios.updated_at, market_data_cache.ticker AS ticker_1, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated, stocks.ticker AS ticker_2, stocks.name, stocks.sector, stocks.industry, stocks.market_cap, stocks.pe_ratio, stocks.forward_pe, stocks.eps, stocks.dividend_yield, stocks.beta, stocks.fifty_two_week_high, stocks.fifty_two_week_low, stocks.exchange, stocks.currency 
FROM portfolios LEFT OUTER JOIN market_data_cache ON portfolios.ticker = market_data_cache.ticker LEFT OUTER JOIN stocks ON portfolios.ticker = stocks.ticker 
WHERE portfolios.user_id = ?
2026-02-09 20:56:30,154 INFO sqlalchemy.engine.Engine [cached since 1.154e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:30,154 - sqlalchemy.engine.Engine - INFO - [cached since 1.154e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:56:30,157 - api_logger - INFO - rid=/api/portfolio/ method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=4.36ms
INFO:     127.0.0.1:49861 - "GET /api/portfolio/?refresh=false HTTP/1.1" 200 OK
2026-02-09 20:56:30,158 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:56:30,158 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-09 20:57:39,768 - app.services.ai_service - ERROR - SiliconFlow Exception: 
Traceback (most recent call last):
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_async/http_proxy.py", line 343, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.READ_NUM_BYTES, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/breeze/Dev/ai-stock-advisor/backend/app/services/ai_service.py", line 44, in _call_siliconflow
    response = await client.post(url, json=payload, headers=headers)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/Users/breeze/Dev/ai-stock-advisor/.venv/lib/python3.14/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

2026-02-09 20:57:39,769 - app.api.v1.endpoints.analysis - INFO - AI Response for AMZN: **Error**: SiliconFlow ç½‘ç»œå¼‚å¸¸ã€‚
2026-02-09 20:57:39,769 - app.api.v1.endpoints.analysis - ERROR - AI Service returned an error: **Error**: SiliconFlow ç½‘ç»œå¼‚å¸¸ã€‚
2026-02-09 20:57:39,774 INFO sqlalchemy.engine.Engine INSERT INTO analysis_reports (id, user_id, ticker, input_context_snapshot, ai_response_markdown, sentiment_score, summary_status, risk_level, technical_analysis, fundamental_news, action_advice, investment_horizon, confidence_level, immediate_action, target_price, stop_loss_price, entry_zone, entry_price_low, entry_price_high, rr_ratio, model_used, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 20:57:39,774 - sqlalchemy.engine.Engine - INFO - INSERT INTO analysis_reports (id, user_id, ticker, input_context_snapshot, ai_response_markdown, sentiment_score, summary_status, risk_level, technical_analysis, fundamental_news, action_advice, investment_horizon, confidence_level, immediate_action, target_price, stop_loss_price, entry_zone, entry_price_low, entry_price_high, rr_ratio, model_used, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-02-09 20:57:39,774 INFO sqlalchemy.engine.Engine [cached since 2334s ago] ('4df3f5d1-7e3d-45d1-9dfb-277b41689a74', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', '{"market_data": {"current_price": 210.32, "change_percent": -5.55, "rsi_14": 27.83, "ma_20": 237.05, "ma_50": 233.3, "ma_200": 223.19, "macd_val": -2 ... (66 characters truncated) ... kdj_k": 28.25, "atr_14": 8.21, "market_status": "OPEN"}, "portfolio_data": {"avg_cost": 0.0, "quantity": 0.0, "unrealized_pl": 0.0, "pl_percent": 0}}', '**Error**: SiliconFlow ç½‘ç»œå¼‚å¸¸ã€‚', '50', 'è°ƒç”¨å¤±è´¥', 'æœªçŸ¥', 'AI æœåŠ¡è°ƒç”¨å¼‚å¸¸: **Error**: SiliconFlow ç½‘ç»œå¼‚å¸¸ã€‚', None, 'ç”±äºŽ AI æŽ¥å£è°ƒç”¨å¤±è´¥ï¼Œæš‚æ—¶æ— æ³•ç”Ÿæˆè¯¦ç»†è¯Šæ–­å»ºè®®ã€‚è¯·æ£€æŸ¥ API é…ç½®æˆ–ç¨åŽé‡è¯•ã€‚', None, None, None, None, None, None, None, None, None, 'qwen-3-vl-thinking', '2026-02-09 12:57:39.774308')
2026-02-09 20:57:39,774 - sqlalchemy.engine.Engine - INFO - [cached since 2334s ago] ('4df3f5d1-7e3d-45d1-9dfb-277b41689a74', '9fe069c3-5985-4d2a-8814-91898152fc4a', 'AMZN', '{"market_data": {"current_price": 210.32, "change_percent": -5.55, "rsi_14": 27.83, "ma_20": 237.05, "ma_50": 233.3, "ma_200": 223.19, "macd_val": -2 ... (66 characters truncated) ... kdj_k": 28.25, "atr_14": 8.21, "market_status": "OPEN"}, "portfolio_data": {"avg_cost": 0.0, "quantity": 0.0, "unrealized_pl": 0.0, "pl_percent": 0}}', '**Error**: SiliconFlow ç½‘ç»œå¼‚å¸¸ã€‚', '50', 'è°ƒç”¨å¤±è´¥', 'æœªçŸ¥', 'AI æœåŠ¡è°ƒç”¨å¼‚å¸¸: **Error**: SiliconFlow ç½‘ç»œå¼‚å¸¸ã€‚', None, 'ç”±äºŽ AI æŽ¥å£è°ƒç”¨å¤±è´¥ï¼Œæš‚æ—¶æ— æ³•ç”Ÿæˆè¯¦ç»†è¯Šæ–­å»ºè®®ã€‚è¯·æ£€æŸ¥ API é…ç½®æˆ–ç¨åŽé‡è¯•ã€‚', None, None, None, None, None, None, None, None, None, 'qwen-3-vl-thinking', '2026-02-09 12:57:39.774308')
2026-02-09 20:57:39,777 INFO sqlalchemy.engine.Engine COMMIT
2026-02-09 20:57:39,777 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-02-09 20:57:39,780 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:57:39,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:57:39,780 INFO sqlalchemy.engine.Engine SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.id = ?
2026-02-09 20:57:39,780 - sqlalchemy.engine.Engine - INFO - SELECT analysis_reports.id, analysis_reports.user_id, analysis_reports.ticker, analysis_reports.input_context_snapshot, analysis_reports.ai_response_markdown, analysis_reports.sentiment_score, analysis_reports.summary_status, analysis_reports.risk_level, analysis_reports.technical_analysis, analysis_reports.fundamental_news, analysis_reports.action_advice, analysis_reports.investment_horizon, analysis_reports.confidence_level, analysis_reports.immediate_action, analysis_reports.target_price, analysis_reports.stop_loss_price, analysis_reports.entry_zone, analysis_reports.entry_price_low, analysis_reports.entry_price_high, analysis_reports.rr_ratio, analysis_reports.model_used, analysis_reports.created_at 
FROM analysis_reports 
WHERE analysis_reports.id = ?
2026-02-09 20:57:39,780 INFO sqlalchemy.engine.Engine [cached since 2334s ago] ('4df3f5d1-7e3d-45d1-9dfb-277b41689a74',)
2026-02-09 20:57:39,780 - sqlalchemy.engine.Engine - INFO - [cached since 2334s ago] ('4df3f5d1-7e3d-45d1-9dfb-277b41689a74',)
2026-02-09 20:57:39,783 - api_logger - INFO - rid=/api/analysis/AMZN method=POST status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=120615.80ms
INFO:     127.0.0.1:49817 - "POST /api/analysis/AMZN?force=true HTTP/1.1" 200 OK
2026-02-09 20:57:39,784 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:57:39,784 - sqlalchemy.engine.Engine - INFO - ROLLBACK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 20:57:39,802 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 20:57:39,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 20:57:39,802 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:57:39,802 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 20:57:39,802 INFO sqlalchemy.engine.Engine [cached since 1.161e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:57:39,802 - sqlalchemy.engine.Engine - INFO - [cached since 1.161e+04s ago] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 20:57:39,803 INFO sqlalchemy.engine.Engine SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:57:39,803 - sqlalchemy.engine.Engine - INFO - SELECT stock_news.id, stock_news.ticker, stock_news.title, stock_news.publisher, stock_news.link, stock_news.publish_time, stock_news.summary, stock_news.sentiment 
FROM stock_news 
WHERE stock_news.ticker = ? ORDER BY stock_news.publish_time DESC
 LIMIT ? OFFSET ?
2026-02-09 20:57:39,803 INFO sqlalchemy.engine.Engine [cached since 1.148e+04s ago] ('AMZN', 20, 0)
2026-02-09 20:57:39,803 - sqlalchemy.engine.Engine - INFO - [cached since 1.148e+04s ago] ('AMZN', 20, 0)
2026-02-09 20:57:39,805 - api_logger - INFO - rid=/api/portfolio/AMZN/news method=GET status_code=200 user_id=9fe069c3-5985-4d2a-8814-91898152fc4a time=5.34ms
INFO:     127.0.0.1:49817 - "GET /api/portfolio/AMZN/news HTTP/1.1" 200 OK
2026-02-09 20:57:39,805 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-09 20:57:39,805 - sqlalchemy.engine.Engine - INFO - ROLLBACK
WARNING:  StatReload detected changes in 'app/services/market_providers/akshare.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [65343]
2026-02-09 21:02:05,827 - app.api.v1.endpoints.portfolio - INFO - PHASE: Portfolio router module importing...
INFO:     Started server process [70636]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:52078 - "OPTIONS /api/portfolio/002050/refresh HTTP/1.1" 200 OK
DEBUG: Validating token: eyJhbGciOi...
DEBUG: Token payload: {'exp': 1770710196, 'sub': '9fe069c3-5985-4d2a-8814-91898152fc4a'}
2026-02-09 21:19:16,792 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-09 21:19:16,792 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-09 21:19:16,801 INFO sqlalchemy.engine.Engine SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 21:19:16,801 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.email, users.hashed_password, users.is_active, users.membership_tier, users.api_key_gemini, users.api_key_deepseek, users.api_key_siliconflow, users.preferred_data_source, users.preferred_ai_model, users.created_at, users.last_login 
FROM users 
WHERE users.id = ?
2026-02-09 21:19:16,801 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 21:19:16,801 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('9fe069c3-5985-4d2a-8814-91898152fc4a',)
2026-02-09 21:19:16,836 INFO sqlalchemy.engine.Engine SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 21:19:16,836 - sqlalchemy.engine.Engine - INFO - SELECT market_data_cache.ticker, market_data_cache.current_price, market_data_cache.change_percent, market_data_cache.rsi_14, market_data_cache.ma_20, market_data_cache.ma_50, market_data_cache.ma_200, market_data_cache.macd_val, market_data_cache.macd_signal, market_data_cache.macd_hist, market_data_cache.macd_hist_slope, market_data_cache.bb_upper, market_data_cache.bb_middle, market_data_cache.bb_lower, market_data_cache.atr_14, market_data_cache.k_line, market_data_cache.d_line, market_data_cache.j_line, market_data_cache.volume_ma_20, market_data_cache.volume_ratio, market_data_cache.adx_14, market_data_cache.pivot_point, market_data_cache.resistance_1, market_data_cache.resistance_2, market_data_cache.support_1, market_data_cache.support_2, market_data_cache.market_status, market_data_cache.last_updated 
FROM market_data_cache 
WHERE market_data_cache.ticker = ?
2026-02-09 21:19:16,836 INFO sqlalchemy.engine.Engine [generated in 0.00022s] ('002050',)
2026-02-09 21:19:16,836 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('002050',)
2026-02-09 21:19:16,837 - app.services.market_providers.tavily - WARNING - TAVILY_API_KEY not set. TavilyProvider will be disabled.
2026-02-09 21:19:16,997 - app.services.market_providers.akshare - WARNING - Eastmoney hist failed for 002050, falling back to Sina: HTTPSConnectionPool(host='push2his.eastmoney.com', port=443): Max retries exceeded with url: /api/qt/stock/kline/get?fields1=f1%2Cf2%2Cf3%2Cf4%2Cf5%2Cf6&fields2=f51%2Cf52%2Cf53%2Cf54%2Cf55%2Cf56%2Cf57%2Cf58%2Cf59%2Cf60%2Cf61%2Cf116&ut=7eea3edcaed734bea9cbfc24409ed989&klt=101&fqt=1&secid=0.002050&beg=19700101&end=20500101 (Caused by ProxyError('Unable to connect to proxy', RemoteDisconnected('Remote end closed connection without response')))
[FATAL:address_pool_manager.cc(67)] Check failed: !pool->IsInitialized(). 
#00 0x11b9f046c  (libmini_racer.dylib+0x184046c)
#01 0x11b9ef2a0  (libmini_racer.dylib+0x183f2a0)
#02 0x11b9ef05c  (libmini_racer.dylib+0x183f05c)
#03 0x11b9f1320  (libmini_racer.dylib+0x1841320)
#04 0x11b9f1b98  (libmini_racer.dylib+0x1841b98)
#05 0x11a502dbc  (libmini_racer.dylib+0x352dbc)
#06 0x11a501078  (libmini_racer.dylib+0x351078)
#07 0x11a1ea16c  (libmini_racer.dylib+0x3a16c)
#08 0x11a1c1514  (libmini_racer.dylib+0x11514)
#09 0x11a1c15b8  (libmini_racer.dylib+0x115b8)
#10 0x11a1b81a0  (libmini_racer.dylib+0x81a0)
#11 0x11a1bfe7c  (libmini_racer.dylib+0xfe7c)
#12 0x19bca8050  (libffi.dylib+0x4050)
#13 0x19bcb1604  (libffi.dylib+0xd604)
#14 0x10b6bb508  (_ctypes.cpython-314-darwin.so+0xb508)
#15 0x10b6b89b8  (_ctypes.cpython-314-darwin.so+0x89b8)
#16 0x103771400  (Python+0x69400)
#17 0x1038a5ed8  (Python+0x19ded8)
#18 0x103793e04  (Python+0x8be04)
#19 0x103792d9c  (Python+0x8ad9c)
#20 0x10389ee1c  (Python+0x196e1c)
#21 0x1038a555c  (Python+0x19d55c)
#22 0x1038a28a4  (Python+0x19a8a4)
#23 0x103774d68  (Python+0x6cd68)
#24 0x1038d1234  (Python+0x1c9234)
#25 0x1038a4aa0  (Python+0x19caa0)
#26 0x1038a28a4  (Python+0x19a8a4)
#27 0x103774d68  (Python+0x6cd68)
#28 0x1039b48ec  (Python+0x2ac8ec)
#29 0x103936290  (Python+0x22e290)
#30 0x1879adc08  (libsystem_pthread.dylib+0x6c08)
#31 0x1879a8ba8  (libsystem_pthread.dylib+0x1ba8)
 GET /?ticker=002050 200 in 60ms (compile: 14ms, render: 46ms)
 GET /?ticker=002050 200 in 45ms (compile: 7ms, render: 38ms)
 GET /?ticker=002050 200 in 41ms (compile: 4ms, render: 37ms)
 GET /?ticker=002050 200 in 28ms (compile: 2ms, render: 26ms)
 GET /?ticker=002050 200 in 30ms (compile: 2ms, render: 27ms)
 GET /?ticker=002050 200 in 24ms (compile: 1581Âµs, render: 22ms)
 GET /?ticker=002050 200 in 18ms (compile: 934Âµs, render: 17ms)
 GET /?ticker=002050 200 in 14ms (compile: 1407Âµs, render: 13ms)
./start.sh: line 54: 65340 Killed: 9               $PYTHON_EXEC -m uvicorn app.main:app --reload --port 8000  (wd: ~/Dev/ai-stock-advisor/backend)
/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/multiprocessing/resource_tracker.py:396: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown: {'/mp-xyaw_srn'}
  warnings.warn(
